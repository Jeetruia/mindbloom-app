{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Routes,Route}from'react-router-dom';import{motion,AnimatePresence}from'framer-motion';import{useStore}from'./hooks/useStore';import{AvatarScene}from'./components/AvatarScene2D';import{ChatInterface}from'./components/ChatInterface';import{UserAvatar}from'./components/UserAvatar';import{XPBar}from'./components/XPBar';import{WelcomeScreen}from'./components/WelcomeScreen';import{CrisisModal}from'./components/CrisisModal';import{LoadingScreen}from'./components/LoadingScreen';import{CommunityPlatform}from'./components/CommunityPlatform';import{BotpressTest}from'./components/BotpressTest';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const{user,isLoading,crisisDetected,initializeApp,initializeBotpress,showInitialGreeting}=useStore();const[showWelcome,setShowWelcome]=useState(true);const[activeTab,setActiveTab]=useState('chat');useEffect(()=>{const initializeEverything=async()=>{await initializeApp();await initializeBotpress();};initializeEverything();},[initializeApp,initializeBotpress]);useEffect(()=>{if(user){setShowWelcome(false);// Show initial greeting after user is set and welcome screen is closed\nsetTimeout(()=>{showInitialGreeting();},1000);}},[user,showInitialGreeting]);if(isLoading){return/*#__PURE__*/_jsx(LoadingScreen,{});}return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"App min-h-screen bg-gradient-to-br from-primary-50 to-wellness-50\",children:[/*#__PURE__*/_jsx(AnimatePresence,{children:showWelcome&&/*#__PURE__*/_jsx(WelcomeScreen,{onComplete:()=>setShowWelcome(false)})}),crisisDetected&&/*#__PURE__*/_jsx(CrisisModal,{}),/*#__PURE__*/_jsxs(\"main\",{className:\"relative h-screen overflow-hidden\",children:[user&&/*#__PURE__*/_jsx(motion.header,{className:\"absolute top-0 left-0 right-0 z-10 p-4\",initial:{y:-100},animate:{y:0},transition:{duration:0.5},children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(UserAvatar,{level:user.avatarLevel}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-xl font-semibold text-gray-800\",children:[\"Welcome, \",user.nickname]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"Day \",user.streak,\" streak\"]})]})]}),/*#__PURE__*/_jsx(XPBar,{currentXP:user.xp,level:user.avatarLevel})]})}),user&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-20 left-0 right-0 z-10 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-1 bg-white/90 backdrop-blur-sm rounded-lg p-1 border border-gray-200 max-w-md mx-auto\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('chat'),className:\"flex-1 py-2 px-4 rounded-md transition-colors \".concat(activeTab==='chat'?'bg-primary-500 text-white':'text-gray-600 hover:bg-gray-100'),children:\"\\uD83D\\uDCAC Chat with Mira\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('community'),className:\"flex-1 py-2 px-4 rounded-md transition-colors \".concat(activeTab==='community'?'bg-emerald-500 text-white':'text-gray-600 hover:bg-gray-100'),children:\"\\uD83C\\uDF0D Community\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex h-full pt-32\",children:activeTab==='chat'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 relative\",children:/*#__PURE__*/_jsx(AvatarScene,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-96 bg-white/80 backdrop-blur-sm border-l border-gray-200\",children:/*#__PURE__*/_jsx(ChatInterface,{})})]}):/*#__PURE__*//* Community Platform */_jsxs(\"div\",{className:\"flex-1 p-4\",children:[/*#__PURE__*/_jsx(CommunityPlatform,{}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-8\",children:/*#__PURE__*/_jsx(BotpressTest,{})})]})})]}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/breathing\",element:/*#__PURE__*/_jsx(\"div\",{children:\"Breathing Exercise\"})}),/*#__PURE__*/_jsx(Route,{path:\"/journaling\",element:/*#__PURE__*/_jsx(\"div\",{children:\"Journaling\"})}),/*#__PURE__*/_jsx(Route,{path:\"/exercises\",element:/*#__PURE__*/_jsx(\"div\",{children:\"CBT Exercises\"})})]})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","motion","AnimatePresence","useStore","AvatarScene","ChatInterface","UserAvatar","XPBar","WelcomeScreen","CrisisModal","LoadingScreen","CommunityPlatform","BotpressTest","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","user","isLoading","crisisDetected","initializeApp","initializeBotpress","showInitialGreeting","showWelcome","setShowWelcome","activeTab","setActiveTab","initializeEverything","setTimeout","children","className","onComplete","header","initial","y","animate","transition","duration","level","avatarLevel","nickname","streak","currentXP","xp","onClick","concat","path","element"],"sources":["/Users/jeetruia/MINDBLOOM/mindbloom-app/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useStore } from './hooks/useStore';\nimport { AvatarScene } from './components/AvatarScene2D';\nimport { ChatInterface } from './components/ChatInterface';\nimport { UserAvatar } from './components/UserAvatar';\nimport { XPBar } from './components/XPBar';\nimport { WelcomeScreen } from './components/WelcomeScreen';\nimport { CrisisModal } from './components/CrisisModal';\nimport { LoadingScreen } from './components/LoadingScreen';\nimport { CommunityPlatform } from './components/CommunityPlatform';\nimport { BotpressTest } from './components/BotpressTest';\n\nfunction App() {\n  const { \n    user, \n    isLoading, \n    crisisDetected,\n    initializeApp,\n    initializeBotpress,\n    showInitialGreeting\n  } = useStore();\n\n  const [showWelcome, setShowWelcome] = useState(true);\n  const [activeTab, setActiveTab] = useState<'chat' | 'community'>('chat');\n\n  useEffect(() => {\n    const initializeEverything = async () => {\n      await initializeApp();\n      await initializeBotpress();\n    };\n    initializeEverything();\n  }, [initializeApp, initializeBotpress]);\n\n  useEffect(() => {\n    if (user) {\n      setShowWelcome(false);\n      // Show initial greeting after user is set and welcome screen is closed\n      setTimeout(() => {\n        showInitialGreeting();\n      }, 1000);\n    }\n  }, [user, showInitialGreeting]);\n\n  if (isLoading) {\n    return <LoadingScreen />;\n  }\n\n  return (\n    <Router>\n      <div className=\"App min-h-screen bg-gradient-to-br from-primary-50 to-wellness-50\">\n        <AnimatePresence>\n          {showWelcome && (\n            <WelcomeScreen onComplete={() => setShowWelcome(false)} />\n          )}\n        </AnimatePresence>\n\n        {crisisDetected && <CrisisModal />}\n\n        <main className=\"relative h-screen overflow-hidden\">\n          {/* Header with XP Bar */}\n          {user && (\n            <motion.header \n              className=\"absolute top-0 left-0 right-0 z-10 p-4\"\n              initial={{ y: -100 }}\n              animate={{ y: 0 }}\n              transition={{ duration: 0.5 }}\n            >\n              <div className=\"flex justify-between items-center\">\n                <div className=\"flex items-center space-x-4\">\n                  <UserAvatar level={user.avatarLevel} />\n                  <div>\n                    <h1 className=\"text-xl font-semibold text-gray-800\">\n                      Welcome, {user.nickname}\n                    </h1>\n                    <p className=\"text-sm text-gray-600\">\n                      Day {user.streak} streak\n                    </p>\n                  </div>\n                </div>\n                <XPBar currentXP={user.xp} level={user.avatarLevel} />\n              </div>\n            </motion.header>\n          )}\n\n          {/* Tab Navigation */}\n          {user && (\n            <div className=\"absolute top-20 left-0 right-0 z-10 p-4\">\n              <div className=\"flex space-x-1 bg-white/90 backdrop-blur-sm rounded-lg p-1 border border-gray-200 max-w-md mx-auto\">\n                <button\n                  onClick={() => setActiveTab('chat')}\n                  className={`flex-1 py-2 px-4 rounded-md transition-colors ${\n                    activeTab === 'chat'\n                      ? 'bg-primary-500 text-white'\n                      : 'text-gray-600 hover:bg-gray-100'\n                  }`}\n                >\n                  üí¨ Chat with Mira\n                </button>\n                <button\n                  onClick={() => setActiveTab('community')}\n                  className={`flex-1 py-2 px-4 rounded-md transition-colors ${\n                    activeTab === 'community'\n                      ? 'bg-emerald-500 text-white'\n                      : 'text-gray-600 hover:bg-gray-100'\n                  }`}\n                >\n                  üåç Community\n                </button>\n              </div>\n            </div>\n          )}\n\n          {/* Main Content Area */}\n          <div className=\"flex h-full pt-32\">\n            {activeTab === 'chat' ? (\n              <>\n                {/* Avatar Scene */}\n                <div className=\"flex-1 relative\">\n                  <AvatarScene />\n                </div>\n\n                {/* Chat Interface */}\n                <div className=\"w-96 bg-white/80 backdrop-blur-sm border-l border-gray-200\">\n                  <ChatInterface />\n                </div>\n              </>\n            ) : (\n              /* Community Platform */\n              <div className=\"flex-1 p-4\">\n                <CommunityPlatform />\n                <div className=\"mt-8\">\n                  <BotpressTest />\n                </div>\n              </div>\n            )}\n          </div>\n        </main>\n\n        <Routes>\n          <Route path=\"/breathing\" element={<div>Breathing Exercise</div>} />\n          <Route path=\"/journaling\" element={<div>Journaling</div>} />\n          <Route path=\"/exercises\" element={<div>CBT Exercises</div>} />\n        </Routes>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}