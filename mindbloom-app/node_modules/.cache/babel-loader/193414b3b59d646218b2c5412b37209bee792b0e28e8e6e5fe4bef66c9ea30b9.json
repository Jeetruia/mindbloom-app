{"ast":null,"code":"class GeminiService{constructor(apiKey){this.apiKey=void 0;this.baseUrl='https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent';this.apiKey=apiKey;}async generateResponse(messages){try{const response=await fetch(\"\".concat(this.baseUrl,\"?key=\").concat(this.apiKey),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({contents:messages,generationConfig:{temperature:0.7,topK:40,topP:0.95,maxOutputTokens:1024},safetySettings:[{category:'HARM_CATEGORY_HARASSMENT',threshold:'BLOCK_MEDIUM_AND_ABOVE'},{category:'HARM_CATEGORY_HATE_SPEECH',threshold:'BLOCK_MEDIUM_AND_ABOVE'},{category:'HARM_CATEGORY_SEXUALLY_EXPLICIT',threshold:'BLOCK_MEDIUM_AND_ABOVE'},{category:'HARM_CATEGORY_DANGEROUS_CONTENT',threshold:'BLOCK_MEDIUM_AND_ABOVE'}]})});if(!response.ok){throw new Error(\"Gemini API error: \".concat(response.status));}const data=await response.json();if(data.candidates&&data.candidates.length>0){return data.candidates[0].content.parts[0].text;}else{throw new Error('No response from Gemini API');}}catch(error){console.error('Error calling Gemini API:',error);throw error;}}async getInitialGreeting(){const messages=[{role:'user',parts:[{text:\"You are Mira, a warm and empathetic AI therapist. You're here to provide support, guidance, and a safe space for users to share their thoughts and feelings. \\n\\nYour personality:\\n- Warm, compassionate, and non-judgmental\\n- Uses gentle, encouraging language\\n- Focuses on empowerment and self-care\\n- Avoids clinical or medical terminology\\n- Speaks in a conversational, friendly tone\\n- Encourages users to explore their feelings safely\\n\\nPlease provide a brief, welcoming greeting (2-3 sentences) that introduces yourself and invites the user to share what's on their mind. Keep it warm and approachable.\"}]}];try{return await this.generateResponse(messages);}catch(error){console.error('Error getting initial greeting:',error);return\"Hello! I'm Mira, your wellness companion. I'm here to listen and support you. What's on your mind today?\";}}async generateTherapeuticResponse(userMessage){let conversationHistory=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];const systemPrompt=\"You are Mira, a warm and empathetic AI therapist. You're here to provide support, guidance, and a safe space for users to share their thoughts and feelings.\\n\\nYour approach:\\n- Listen actively and validate their feelings\\n- Ask gentle, open-ended questions to help them explore\\n- Offer practical, evidence-based coping strategies\\n- Use CBT techniques when appropriate (thought challenging, reframing)\\n- Encourage self-compassion and self-care\\n- Normalize their experiences\\n- Avoid giving medical advice or diagnoses\\n- If someone expresses suicidal thoughts, respond with empathy and encourage them to reach out to crisis resources\\n\\nKeep responses conversational, warm, and helpful. Aim for 2-4 sentences that provide meaningful support.\";const messages=[{role:'user',parts:[{text:systemPrompt}]},...conversationHistory,{role:'user',parts:[{text:userMessage}]}];try{return await this.generateResponse(messages);}catch(error){console.error('Error generating therapeutic response:',error);return\"I'm here to listen and support you. Could you tell me more about what you're experiencing right now?\";}}}// Initialize with API key from environment\nconst GEMINI_API_KEY=process.env.REACT_APP_GEMINI_API_KEY||'';if(!GEMINI_API_KEY){console.warn('Gemini API key not found. Please set REACT_APP_GEMINI_API_KEY in your .env file');}export const geminiService=new GeminiService(GEMINI_API_KEY);export default GeminiService;","map":{"version":3,"names":["GeminiService","constructor","apiKey","baseUrl","generateResponse","messages","response","fetch","concat","method","headers","body","JSON","stringify","contents","generationConfig","temperature","topK","topP","maxOutputTokens","safetySettings","category","threshold","ok","Error","status","data","json","candidates","length","content","parts","text","error","console","getInitialGreeting","role","generateTherapeuticResponse","userMessage","conversationHistory","arguments","undefined","systemPrompt","GEMINI_API_KEY","process","env","REACT_APP_GEMINI_API_KEY","warn","geminiService"],"sources":["/Users/jeetruia/MINDBLOOM/mindbloom-app/src/services/geminiService.ts"],"sourcesContent":["interface GeminiMessage {\n  role: 'user' | 'model';\n  parts: { text: string }[];\n}\n\ninterface GeminiResponse {\n  candidates: {\n    content: {\n      parts: { text: string }[];\n    };\n  }[];\n}\n\nclass GeminiService {\n  private apiKey: string;\n  private baseUrl: string = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent';\n\n  constructor(apiKey: string) {\n    this.apiKey = apiKey;\n  }\n\n  async generateResponse(messages: GeminiMessage[]): Promise<string> {\n    try {\n      const response = await fetch(`${this.baseUrl}?key=${this.apiKey}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          contents: messages,\n          generationConfig: {\n            temperature: 0.7,\n            topK: 40,\n            topP: 0.95,\n            maxOutputTokens: 1024,\n          },\n          safetySettings: [\n            {\n              category: 'HARM_CATEGORY_HARASSMENT',\n              threshold: 'BLOCK_MEDIUM_AND_ABOVE',\n            },\n            {\n              category: 'HARM_CATEGORY_HATE_SPEECH',\n              threshold: 'BLOCK_MEDIUM_AND_ABOVE',\n            },\n            {\n              category: 'HARM_CATEGORY_SEXUALLY_EXPLICIT',\n              threshold: 'BLOCK_MEDIUM_AND_ABOVE',\n            },\n            {\n              category: 'HARM_CATEGORY_DANGEROUS_CONTENT',\n              threshold: 'BLOCK_MEDIUM_AND_ABOVE',\n            },\n          ],\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(`Gemini API error: ${response.status}`);\n      }\n\n      const data: GeminiResponse = await response.json();\n      \n      if (data.candidates && data.candidates.length > 0) {\n        return data.candidates[0].content.parts[0].text;\n      } else {\n        throw new Error('No response from Gemini API');\n      }\n    } catch (error) {\n      console.error('Error calling Gemini API:', error);\n      throw error;\n    }\n  }\n\n  async getInitialGreeting(): Promise<string> {\n    const messages: GeminiMessage[] = [\n      {\n        role: 'user',\n        parts: [{\n          text: `You are Mira, a warm and empathetic AI therapist. You're here to provide support, guidance, and a safe space for users to share their thoughts and feelings. \n\nYour personality:\n- Warm, compassionate, and non-judgmental\n- Uses gentle, encouraging language\n- Focuses on empowerment and self-care\n- Avoids clinical or medical terminology\n- Speaks in a conversational, friendly tone\n- Encourages users to explore their feelings safely\n\nPlease provide a brief, welcoming greeting (2-3 sentences) that introduces yourself and invites the user to share what's on their mind. Keep it warm and approachable.`\n        }]\n      }\n    ];\n\n    try {\n      return await this.generateResponse(messages);\n    } catch (error) {\n      console.error('Error getting initial greeting:', error);\n      return \"Hello! I'm Mira, your wellness companion. I'm here to listen and support you. What's on your mind today?\";\n    }\n  }\n\n  async generateTherapeuticResponse(userMessage: string, conversationHistory: GeminiMessage[] = []): Promise<string> {\n    const systemPrompt = `You are Mira, a warm and empathetic AI therapist. You're here to provide support, guidance, and a safe space for users to share their thoughts and feelings.\n\nYour approach:\n- Listen actively and validate their feelings\n- Ask gentle, open-ended questions to help them explore\n- Offer practical, evidence-based coping strategies\n- Use CBT techniques when appropriate (thought challenging, reframing)\n- Encourage self-compassion and self-care\n- Normalize their experiences\n- Avoid giving medical advice or diagnoses\n- If someone expresses suicidal thoughts, respond with empathy and encourage them to reach out to crisis resources\n\nKeep responses conversational, warm, and helpful. Aim for 2-4 sentences that provide meaningful support.`;\n\n    const messages: GeminiMessage[] = [\n      {\n        role: 'user',\n        parts: [{ text: systemPrompt }]\n      },\n      ...conversationHistory,\n      {\n        role: 'user',\n        parts: [{ text: userMessage }]\n      }\n    ];\n\n    try {\n      return await this.generateResponse(messages);\n    } catch (error) {\n      console.error('Error generating therapeutic response:', error);\n      return \"I'm here to listen and support you. Could you tell me more about what you're experiencing right now?\";\n    }\n  }\n}\n\n// Initialize with API key from environment\nconst GEMINI_API_KEY = process.env.REACT_APP_GEMINI_API_KEY || '';\n\nif (!GEMINI_API_KEY) {\n  console.warn('Gemini API key not found. Please set REACT_APP_GEMINI_API_KEY in your .env file');\n}\n\nexport const geminiService = new GeminiService(GEMINI_API_KEY);\nexport default GeminiService;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}