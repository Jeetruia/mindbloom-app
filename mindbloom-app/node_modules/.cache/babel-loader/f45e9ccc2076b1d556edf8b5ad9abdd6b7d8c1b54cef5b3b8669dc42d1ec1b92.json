{"ast":null,"code":"class GeminiService {\n  constructor(apiKey) {\n    this.apiKey = void 0;\n    this.baseUrl = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent';\n    this.apiKey = apiKey;\n  }\n  async generateResponse(messages) {\n    try {\n      const response = await fetch(`${this.baseUrl}?key=${this.apiKey}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          contents: messages,\n          generationConfig: {\n            temperature: 0.7,\n            topK: 40,\n            topP: 0.95,\n            maxOutputTokens: 1024\n          },\n          safetySettings: [{\n            category: 'HARM_CATEGORY_HARASSMENT',\n            threshold: 'BLOCK_MEDIUM_AND_ABOVE'\n          }, {\n            category: 'HARM_CATEGORY_HATE_SPEECH',\n            threshold: 'BLOCK_MEDIUM_AND_ABOVE'\n          }, {\n            category: 'HARM_CATEGORY_SEXUALLY_EXPLICIT',\n            threshold: 'BLOCK_MEDIUM_AND_ABOVE'\n          }, {\n            category: 'HARM_CATEGORY_DANGEROUS_CONTENT',\n            threshold: 'BLOCK_MEDIUM_AND_ABOVE'\n          }]\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`Gemini API error: ${response.status}`);\n      }\n      const data = await response.json();\n      if (data.candidates && data.candidates.length > 0) {\n        return data.candidates[0].content.parts[0].text;\n      } else {\n        throw new Error('No response from Gemini API');\n      }\n    } catch (error) {\n      console.error('Error calling Gemini API:', error);\n      throw error;\n    }\n  }\n  async getInitialGreeting() {\n    const messages = [{\n      role: 'user',\n      parts: [{\n        text: `You are Mira, a warm and empathetic AI therapist. You're here to provide support, guidance, and a safe space for users to share their thoughts and feelings. \n\nYour personality:\n- Warm, compassionate, and non-judgmental\n- Uses gentle, encouraging language\n- Focuses on empowerment and self-care\n- Avoids clinical or medical terminology\n- Speaks in a conversational, friendly tone\n- Encourages users to explore their feelings safely\n\nPlease provide a brief, welcoming greeting (2-3 sentences) that introduces yourself and invites the user to share what's on their mind. Keep it warm and approachable.`\n      }]\n    }];\n    try {\n      return await this.generateResponse(messages);\n    } catch (error) {\n      console.error('Error getting initial greeting:', error);\n      return \"Hello! I'm Mira, your wellness companion. I'm here to listen and support you. What's on your mind today?\";\n    }\n  }\n  async generateTherapeuticResponse(userMessage, conversationHistory = []) {\n    const systemPrompt = `You are Mira, a warm and empathetic AI therapist. You're here to provide support, guidance, and a safe space for users to share their thoughts and feelings.\n\nYour approach:\n- Listen actively and validate their feelings\n- Ask gentle, open-ended questions to help them explore\n- Offer practical, evidence-based coping strategies\n- Use CBT techniques when appropriate (thought challenging, reframing)\n- Encourage self-compassion and self-care\n- Normalize their experiences\n- Avoid giving medical advice or diagnoses\n- If someone expresses suicidal thoughts, respond with empathy and encourage them to reach out to crisis resources\n\nKeep responses conversational, warm, and helpful. Aim for 2-4 sentences that provide meaningful support.`;\n    const messages = [{\n      role: 'user',\n      parts: [{\n        text: systemPrompt\n      }]\n    }, ...conversationHistory, {\n      role: 'user',\n      parts: [{\n        text: userMessage\n      }]\n    }];\n    try {\n      return await this.generateResponse(messages);\n    } catch (error) {\n      console.error('Error generating therapeutic response:', error);\n      return \"I'm here to listen and support you. Could you tell me more about what you're experiencing right now?\";\n    }\n  }\n}\n\n// Initialize with API key from environment\nconst GEMINI_API_KEY = process.env.REACT_APP_GEMINI_API_KEY || '';\nif (!GEMINI_API_KEY) {\n  console.warn('Gemini API key not found. Please set REACT_APP_GEMINI_API_KEY in your .env file');\n}\nexport const geminiService = new GeminiService(GEMINI_API_KEY);\nexport default GeminiService;","map":{"version":3,"names":["GeminiService","constructor","apiKey","baseUrl","generateResponse","messages","response","fetch","method","headers","body","JSON","stringify","contents","generationConfig","temperature","topK","topP","maxOutputTokens","safetySettings","category","threshold","ok","Error","status","data","json","candidates","length","content","parts","text","error","console","getInitialGreeting","role","generateTherapeuticResponse","userMessage","conversationHistory","systemPrompt","GEMINI_API_KEY","process","env","REACT_APP_GEMINI_API_KEY","warn","geminiService"],"sources":["/Users/jeetruia/MINDBLOOM/mindbloom-app/src/services/geminiService.ts"],"sourcesContent":["interface GeminiMessage {\n  role: 'user' | 'model';\n  parts: { text: string }[];\n}\n\ninterface GeminiResponse {\n  candidates: {\n    content: {\n      parts: { text: string }[];\n    };\n  }[];\n}\n\nclass GeminiService {\n  private apiKey: string;\n  private baseUrl: string = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent';\n\n  constructor(apiKey: string) {\n    this.apiKey = apiKey;\n  }\n\n  async generateResponse(messages: GeminiMessage[]): Promise<string> {\n    try {\n      const response = await fetch(`${this.baseUrl}?key=${this.apiKey}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          contents: messages,\n          generationConfig: {\n            temperature: 0.7,\n            topK: 40,\n            topP: 0.95,\n            maxOutputTokens: 1024,\n          },\n          safetySettings: [\n            {\n              category: 'HARM_CATEGORY_HARASSMENT',\n              threshold: 'BLOCK_MEDIUM_AND_ABOVE',\n            },\n            {\n              category: 'HARM_CATEGORY_HATE_SPEECH',\n              threshold: 'BLOCK_MEDIUM_AND_ABOVE',\n            },\n            {\n              category: 'HARM_CATEGORY_SEXUALLY_EXPLICIT',\n              threshold: 'BLOCK_MEDIUM_AND_ABOVE',\n            },\n            {\n              category: 'HARM_CATEGORY_DANGEROUS_CONTENT',\n              threshold: 'BLOCK_MEDIUM_AND_ABOVE',\n            },\n          ],\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(`Gemini API error: ${response.status}`);\n      }\n\n      const data: GeminiResponse = await response.json();\n      \n      if (data.candidates && data.candidates.length > 0) {\n        return data.candidates[0].content.parts[0].text;\n      } else {\n        throw new Error('No response from Gemini API');\n      }\n    } catch (error) {\n      console.error('Error calling Gemini API:', error);\n      throw error;\n    }\n  }\n\n  async getInitialGreeting(): Promise<string> {\n    const messages: GeminiMessage[] = [\n      {\n        role: 'user',\n        parts: [{\n          text: `You are Mira, a warm and empathetic AI therapist. You're here to provide support, guidance, and a safe space for users to share their thoughts and feelings. \n\nYour personality:\n- Warm, compassionate, and non-judgmental\n- Uses gentle, encouraging language\n- Focuses on empowerment and self-care\n- Avoids clinical or medical terminology\n- Speaks in a conversational, friendly tone\n- Encourages users to explore their feelings safely\n\nPlease provide a brief, welcoming greeting (2-3 sentences) that introduces yourself and invites the user to share what's on their mind. Keep it warm and approachable.`\n        }]\n      }\n    ];\n\n    try {\n      return await this.generateResponse(messages);\n    } catch (error) {\n      console.error('Error getting initial greeting:', error);\n      return \"Hello! I'm Mira, your wellness companion. I'm here to listen and support you. What's on your mind today?\";\n    }\n  }\n\n  async generateTherapeuticResponse(userMessage: string, conversationHistory: GeminiMessage[] = []): Promise<string> {\n    const systemPrompt = `You are Mira, a warm and empathetic AI therapist. You're here to provide support, guidance, and a safe space for users to share their thoughts and feelings.\n\nYour approach:\n- Listen actively and validate their feelings\n- Ask gentle, open-ended questions to help them explore\n- Offer practical, evidence-based coping strategies\n- Use CBT techniques when appropriate (thought challenging, reframing)\n- Encourage self-compassion and self-care\n- Normalize their experiences\n- Avoid giving medical advice or diagnoses\n- If someone expresses suicidal thoughts, respond with empathy and encourage them to reach out to crisis resources\n\nKeep responses conversational, warm, and helpful. Aim for 2-4 sentences that provide meaningful support.`;\n\n    const messages: GeminiMessage[] = [\n      {\n        role: 'user',\n        parts: [{ text: systemPrompt }]\n      },\n      ...conversationHistory,\n      {\n        role: 'user',\n        parts: [{ text: userMessage }]\n      }\n    ];\n\n    try {\n      return await this.generateResponse(messages);\n    } catch (error) {\n      console.error('Error generating therapeutic response:', error);\n      return \"I'm here to listen and support you. Could you tell me more about what you're experiencing right now?\";\n    }\n  }\n}\n\n// Initialize with API key from environment\nconst GEMINI_API_KEY = process.env.REACT_APP_GEMINI_API_KEY || '';\n\nif (!GEMINI_API_KEY) {\n  console.warn('Gemini API key not found. Please set REACT_APP_GEMINI_API_KEY in your .env file');\n}\n\nexport const geminiService = new GeminiService(GEMINI_API_KEY);\nexport default GeminiService;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}