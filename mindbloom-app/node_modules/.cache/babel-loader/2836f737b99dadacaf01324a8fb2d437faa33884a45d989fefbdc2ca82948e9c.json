{"ast":null,"code":"import _objectSpread from\"/Users/jeetruia/MINDBLOOM/mindbloom-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{create}from'zustand';import{persist}from'zustand/middleware';import{TTSService}from'../services/speechServiceSimple';import{botpressService}from'../services/botpressService';const CRISIS_KEYWORDS={critical:['suicide','kill myself','end it all','not worth living','want to die'],high:['depressed','hopeless','worthless','can\\'t go on','give up'],medium:['sad','lonely','anxious','worried','stressed'],low:['tired','overwhelmed','difficult','challenging']};export const useStore=create()(persist((set,get)=>({// Initial state\nuser:null,isLoading:true,messages:[],isTyping:false,avatarState:{isVisible:false,isSpeaking:false,currentAnimation:'idle',emotion:{type:'neutral',intensity:0.5},position:{x:0,y:0,z:0}},crisisDetected:null,sessions:[],ttsService:new TTSService(),isListening:false,botpressConnected:false,hasShownInitialGreeting:false,// Actions\nsetUser:user=>set({user}),addMessage:message=>set(state=>({messages:[...state.messages,message]})),setTyping:isTyping=>set({isTyping}),updateAvatarState:newState=>set(state=>({avatarState:_objectSpread(_objectSpread({},state.avatarState),newState)})),setCrisisDetected:crisis=>set({crisisDetected:crisis}),addSession:session=>set(state=>({sessions:[...state.sessions,session]})),initializeApp:async()=>{set({isLoading:true});try{// Check for existing user in localStorage\nconst savedUser=localStorage.getItem('mindbloom-user');if(savedUser){const user=JSON.parse(savedUser);set({user,isLoading:false});}else{set({isLoading:false});}}catch(error){console.error('Error initializing app:',error);set({isLoading:false});}},sendMessage:async content=>{const{user,addMessage,setTyping,processCrisisDetection,setCrisisDetected}=get();if(!user)return;// Add user message\nconst userMessage={id:Date.now().toString(),userId:user.id,content,isFromUser:true,timestamp:new Date()};addMessage(userMessage);// Check for crisis keywords\nconst crisis=processCrisisDetection(content);if(crisis){setCrisisDetected(crisis);}setTyping(true);try{// Use ONLY Botpress for AI response\nconst botpressMessages=await botpressService.sendMessage(content);let aiResponse='';if(botpressMessages.length>0){aiResponse=botpressMessages[0].text||'';}// If no response from Botpress, use a simple fallback\nif(!aiResponse){aiResponse=\"I'm here to listen and support you. How are you feeling today?\";}const aiMessage={id:(Date.now()+1).toString(),userId:'ai',content:aiResponse,isFromUser:false,timestamp:new Date(),emotion:{type:'encouraging',intensity:0.8}};addMessage(aiMessage);// Update avatar to speak and use TTS\nget().updateAvatarState({isSpeaking:true,currentAnimation:'speaking',emotion:{type:'encouraging',intensity:0.8}});// Use TTS to speak the response\ntry{await get().speakText(aiResponse);}catch(error){console.warn('TTS failed:',error);}// Stop speaking after TTS completes\nget().updateAvatarState({isSpeaking:false,currentAnimation:'idle'});}catch(error){console.error('Error sending message:',error);}finally{setTyping(false);}},processCrisisDetection:message=>{const lowerMessage=message.toLowerCase();for(const[severity,keywords]of Object.entries(CRISIS_KEYWORDS)){for(const keyword of keywords){if(lowerMessage.includes(keyword)){return{keywords:[keyword],severity:severity,action:severity==='critical'?'emergency':severity==='high'?'escalate':'monitor'};}}}return null;},speakText:async text=>{const{ttsService}=get();try{await ttsService.speak(text,{rate:0.9,pitch:1.0,volume:0.8});}catch(error){console.error('TTS Error:',error);throw error;}},startListening:()=>{set({isListening:true});// In a real implementation, you would start speech recognition here\nconsole.log('Started listening for voice input');},stopListening:()=>{set({isListening:false});// In a real implementation, you would stop speech recognition here\nconsole.log('Stopped listening for voice input');},initializeBotpress:async()=>{try{await botpressService.initialize();set({botpressConnected:true});console.log('Botpress initialized successfully');}catch(error){console.error('Failed to initialize Botpress:',error);set({botpressConnected:false});}},showInitialGreeting:async()=>{const{hasShownInitialGreeting,addMessage,updateAvatarState,speakText}=get();if(hasShownInitialGreeting)return;try{// Use ONLY Botpress for greeting\nconst botpressMessages=await botpressService.getInitialGreeting();let greetingText='';if(botpressMessages.length>0){greetingText=botpressMessages[0].text||'';}// Fallback greeting if Botpress fails\nif(!greetingText){greetingText=\"Hello! I'm Mira, your wellness guide. I'm here to listen and support you. How are you feeling today?\";}const greetingMessage={id:\"greeting_\".concat(Date.now()),userId:'ai',content:greetingText,isFromUser:false,timestamp:new Date(),emotion:{type:'welcoming',intensity:0.9}};addMessage(greetingMessage);// Update avatar to speak\nupdateAvatarState({isSpeaking:true,currentAnimation:'speaking',emotion:{type:'welcoming',intensity:0.9}});// Speak the greeting\ntry{await speakText(greetingText);}catch(error){console.warn('TTS failed for greeting:',error);}// Stop speaking\nupdateAvatarState({isSpeaking:false,currentAnimation:'idle'});set({hasShownInitialGreeting:true});}catch(error){console.error('Error showing initial greeting:',error);}},setBotpressConnected:connected=>set({botpressConnected:connected})}),{name:'mindbloom-storage',partialize:state=>({user:state.user,sessions:state.sessions})}));// Local AI response generation removed - using only Botpress","map":{"version":3,"names":["create","persist","TTSService","botpressService","CRISIS_KEYWORDS","critical","high","medium","low","useStore","set","get","user","isLoading","messages","isTyping","avatarState","isVisible","isSpeaking","currentAnimation","emotion","type","intensity","position","x","y","z","crisisDetected","sessions","ttsService","isListening","botpressConnected","hasShownInitialGreeting","setUser","addMessage","message","state","setTyping","updateAvatarState","newState","_objectSpread","setCrisisDetected","crisis","addSession","session","initializeApp","savedUser","localStorage","getItem","JSON","parse","error","console","sendMessage","content","processCrisisDetection","userMessage","id","Date","now","toString","userId","isFromUser","timestamp","botpressMessages","aiResponse","length","text","aiMessage","speakText","warn","lowerMessage","toLowerCase","severity","keywords","Object","entries","keyword","includes","action","speak","rate","pitch","volume","startListening","log","stopListening","initializeBotpress","initialize","showInitialGreeting","getInitialGreeting","greetingText","greetingMessage","concat","setBotpressConnected","connected","name","partialize"],"sources":["/Users/jeetruia/MINDBLOOM/mindbloom-app/src/hooks/useStore.ts"],"sourcesContent":["import { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\nimport { User, ChatMessage, AvatarState, CrisisDetection, WellnessSession } from '../types';\nimport { TTSService } from '../services/speechServiceSimple';\nimport { botpressService } from '../services/botpressService';\n\ninterface AppState {\n  // User state\n  user: User | null;\n  isLoading: boolean;\n  \n  // Chat state\n  messages: ChatMessage[];\n  isTyping: boolean;\n  \n  // Avatar state\n  avatarState: AvatarState;\n  \n  // Crisis detection\n  crisisDetected: CrisisDetection | null;\n  \n  // Sessions\n  sessions: WellnessSession[];\n  \n  // Speech service\n  ttsService: TTSService;\n  isListening: boolean;\n  \n  // Botpress state\n  botpressConnected: boolean;\n  hasShownInitialGreeting: boolean;\n  \n  // Actions\n  setUser: (user: User) => void;\n  addMessage: (message: ChatMessage) => void;\n  setTyping: (isTyping: boolean) => void;\n  updateAvatarState: (state: Partial<AvatarState>) => void;\n  setCrisisDetected: (crisis: CrisisDetection | null) => void;\n  addSession: (session: WellnessSession) => void;\n  initializeApp: () => Promise<void>;\n  sendMessage: (content: string) => Promise<void>;\n  processCrisisDetection: (message: string) => CrisisDetection | null;\n  speakText: (text: string) => Promise<void>;\n  startListening: () => void;\n  stopListening: () => void;\n  initializeBotpress: () => Promise<void>;\n  showInitialGreeting: () => Promise<void>;\n  setBotpressConnected: (connected: boolean) => void;\n}\n\nconst CRISIS_KEYWORDS = {\n  critical: ['suicide', 'kill myself', 'end it all', 'not worth living', 'want to die'],\n  high: ['depressed', 'hopeless', 'worthless', 'can\\'t go on', 'give up'],\n  medium: ['sad', 'lonely', 'anxious', 'worried', 'stressed'],\n  low: ['tired', 'overwhelmed', 'difficult', 'challenging']\n};\n\nexport const useStore = create<AppState>()(\n  persist(\n    (set, get) => ({\n      // Initial state\n      user: null,\n      isLoading: true,\n      messages: [],\n      isTyping: false,\n      avatarState: {\n        isVisible: false,\n        isSpeaking: false,\n        currentAnimation: 'idle',\n        emotion: { type: 'neutral', intensity: 0.5 },\n        position: { x: 0, y: 0, z: 0 }\n      },\n      crisisDetected: null,\n      sessions: [],\n      ttsService: new TTSService(),\n      isListening: false,\n      botpressConnected: false,\n      hasShownInitialGreeting: false,\n\n      // Actions\n      setUser: (user) => set({ user }),\n      \n      addMessage: (message) => set((state) => ({\n        messages: [...state.messages, message]\n      })),\n      \n      setTyping: (isTyping) => set({ isTyping }),\n      \n      updateAvatarState: (newState) => set((state) => ({\n        avatarState: { ...state.avatarState, ...newState }\n      })),\n      \n      setCrisisDetected: (crisis) => set({ crisisDetected: crisis }),\n      \n      addSession: (session) => set((state) => ({\n        sessions: [...state.sessions, session]\n      })),\n\n      initializeApp: async () => {\n        set({ isLoading: true });\n        \n        try {\n          // Check for existing user in localStorage\n          const savedUser = localStorage.getItem('mindbloom-user');\n          if (savedUser) {\n            const user = JSON.parse(savedUser);\n            set({ user, isLoading: false });\n          } else {\n            set({ isLoading: false });\n          }\n        } catch (error) {\n          console.error('Error initializing app:', error);\n          set({ isLoading: false });\n        }\n      },\n\n      sendMessage: async (content) => {\n        const { user, addMessage, setTyping, processCrisisDetection, setCrisisDetected } = get();\n        \n        if (!user) return;\n\n        // Add user message\n        const userMessage: ChatMessage = {\n          id: Date.now().toString(),\n          userId: user.id,\n          content,\n          isFromUser: true,\n          timestamp: new Date()\n        };\n        addMessage(userMessage);\n\n        // Check for crisis keywords\n        const crisis = processCrisisDetection(content);\n        if (crisis) {\n          setCrisisDetected(crisis);\n        }\n\n        setTyping(true);\n\n        try {\n          // Use ONLY Botpress for AI response\n          const botpressMessages = await botpressService.sendMessage(content);\n          let aiResponse = '';\n          \n          if (botpressMessages.length > 0) {\n            aiResponse = botpressMessages[0].text || '';\n          }\n          \n          // If no response from Botpress, use a simple fallback\n          if (!aiResponse) {\n            aiResponse = \"I'm here to listen and support you. How are you feeling today?\";\n          }\n          \n          const aiMessage: ChatMessage = {\n            id: (Date.now() + 1).toString(),\n            userId: 'ai',\n            content: aiResponse,\n            isFromUser: false,\n            timestamp: new Date(),\n            emotion: { type: 'encouraging', intensity: 0.8 }\n          };\n          \n          addMessage(aiMessage);\n          \n          // Update avatar to speak and use TTS\n          get().updateAvatarState({\n            isSpeaking: true,\n            currentAnimation: 'speaking',\n            emotion: { type: 'encouraging', intensity: 0.8 }\n          });\n\n          // Use TTS to speak the response\n          try {\n            await get().speakText(aiResponse);\n          } catch (error) {\n            console.warn('TTS failed:', error);\n          }\n\n          // Stop speaking after TTS completes\n          get().updateAvatarState({\n            isSpeaking: false,\n            currentAnimation: 'idle'\n          });\n\n        } catch (error) {\n          console.error('Error sending message:', error);\n        } finally {\n          setTyping(false);\n        }\n      },\n\n      processCrisisDetection: (message) => {\n        const lowerMessage = message.toLowerCase();\n        \n        for (const [severity, keywords] of Object.entries(CRISIS_KEYWORDS)) {\n          for (const keyword of keywords) {\n            if (lowerMessage.includes(keyword)) {\n              return {\n                keywords: [keyword],\n                severity: severity as CrisisDetection['severity'],\n                action: severity === 'critical' ? 'emergency' : \n                       severity === 'high' ? 'escalate' : 'monitor'\n              };\n            }\n          }\n        }\n        \n        return null;\n      },\n\n      speakText: async (text) => {\n        const { ttsService } = get();\n        try {\n          await ttsService.speak(text, {\n            rate: 0.9,\n            pitch: 1.0,\n            volume: 0.8\n          });\n        } catch (error) {\n          console.error('TTS Error:', error);\n          throw error;\n        }\n      },\n\n      startListening: () => {\n        set({ isListening: true });\n        // In a real implementation, you would start speech recognition here\n        console.log('Started listening for voice input');\n      },\n\n      stopListening: () => {\n        set({ isListening: false });\n        // In a real implementation, you would stop speech recognition here\n        console.log('Stopped listening for voice input');\n      },\n\n      initializeBotpress: async () => {\n        try {\n          await botpressService.initialize();\n          set({ botpressConnected: true });\n          console.log('Botpress initialized successfully');\n        } catch (error) {\n          console.error('Failed to initialize Botpress:', error);\n          set({ botpressConnected: false });\n        }\n      },\n\n      showInitialGreeting: async () => {\n        const { hasShownInitialGreeting, addMessage, updateAvatarState, speakText } = get();\n        \n        if (hasShownInitialGreeting) return;\n\n        try {\n          // Use ONLY Botpress for greeting\n          const botpressMessages = await botpressService.getInitialGreeting();\n          let greetingText = '';\n          \n          if (botpressMessages.length > 0) {\n            greetingText = botpressMessages[0].text || '';\n          }\n          \n          // Fallback greeting if Botpress fails\n          if (!greetingText) {\n            greetingText = \"Hello! I'm Mira, your wellness guide. I'm here to listen and support you. How are you feeling today?\";\n          }\n\n          const greetingMessage: ChatMessage = {\n            id: `greeting_${Date.now()}`,\n            userId: 'ai',\n            content: greetingText,\n            isFromUser: false,\n            timestamp: new Date(),\n            emotion: { type: 'welcoming', intensity: 0.9 }\n          };\n\n          addMessage(greetingMessage);\n\n          // Update avatar to speak\n          updateAvatarState({\n            isSpeaking: true,\n            currentAnimation: 'speaking',\n            emotion: { type: 'welcoming', intensity: 0.9 }\n          });\n\n          // Speak the greeting\n          try {\n            await speakText(greetingText);\n          } catch (error) {\n            console.warn('TTS failed for greeting:', error);\n          }\n\n          // Stop speaking\n          updateAvatarState({\n            isSpeaking: false,\n            currentAnimation: 'idle'\n          });\n\n          set({ hasShownInitialGreeting: true });\n        } catch (error) {\n          console.error('Error showing initial greeting:', error);\n        }\n      },\n\n      setBotpressConnected: (connected) => set({ botpressConnected: connected })\n    }),\n    {\n      name: 'mindbloom-storage',\n      partialize: (state) => ({\n        user: state.user,\n        sessions: state.sessions\n      })\n    }\n  )\n);\n\n// Local AI response generation removed - using only Botpress\n"],"mappings":"4HAAA,OAASA,MAAM,KAAQ,SAAS,CAChC,OAASC,OAAO,KAAQ,oBAAoB,CAE5C,OAASC,UAAU,KAAQ,iCAAiC,CAC5D,OAASC,eAAe,KAAQ,6BAA6B,CA8C7D,KAAM,CAAAC,eAAe,CAAG,CACtBC,QAAQ,CAAE,CAAC,SAAS,CAAE,aAAa,CAAE,YAAY,CAAE,kBAAkB,CAAE,aAAa,CAAC,CACrFC,IAAI,CAAE,CAAC,WAAW,CAAE,UAAU,CAAE,WAAW,CAAE,cAAc,CAAE,SAAS,CAAC,CACvEC,MAAM,CAAE,CAAC,KAAK,CAAE,QAAQ,CAAE,SAAS,CAAE,SAAS,CAAE,UAAU,CAAC,CAC3DC,GAAG,CAAE,CAAC,OAAO,CAAE,aAAa,CAAE,WAAW,CAAE,aAAa,CAC1D,CAAC,CAED,MAAO,MAAM,CAAAC,QAAQ,CAAGT,MAAM,CAAW,CAAC,CACxCC,OAAO,CACL,CAACS,GAAG,CAAEC,GAAG,IAAM,CACb;AACAC,IAAI,CAAE,IAAI,CACVC,SAAS,CAAE,IAAI,CACfC,QAAQ,CAAE,EAAE,CACZC,QAAQ,CAAE,KAAK,CACfC,WAAW,CAAE,CACXC,SAAS,CAAE,KAAK,CAChBC,UAAU,CAAE,KAAK,CACjBC,gBAAgB,CAAE,MAAM,CACxBC,OAAO,CAAE,CAAEC,IAAI,CAAE,SAAS,CAAEC,SAAS,CAAE,GAAI,CAAC,CAC5CC,QAAQ,CAAE,CAAEC,CAAC,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAE,CAC/B,CAAC,CACDC,cAAc,CAAE,IAAI,CACpBC,QAAQ,CAAE,EAAE,CACZC,UAAU,CAAE,GAAI,CAAA3B,UAAU,CAAC,CAAC,CAC5B4B,WAAW,CAAE,KAAK,CAClBC,iBAAiB,CAAE,KAAK,CACxBC,uBAAuB,CAAE,KAAK,CAE9B;AACAC,OAAO,CAAGrB,IAAI,EAAKF,GAAG,CAAC,CAAEE,IAAK,CAAC,CAAC,CAEhCsB,UAAU,CAAGC,OAAO,EAAKzB,GAAG,CAAE0B,KAAK,GAAM,CACvCtB,QAAQ,CAAE,CAAC,GAAGsB,KAAK,CAACtB,QAAQ,CAAEqB,OAAO,CACvC,CAAC,CAAC,CAAC,CAEHE,SAAS,CAAGtB,QAAQ,EAAKL,GAAG,CAAC,CAAEK,QAAS,CAAC,CAAC,CAE1CuB,iBAAiB,CAAGC,QAAQ,EAAK7B,GAAG,CAAE0B,KAAK,GAAM,CAC/CpB,WAAW,CAAAwB,aAAA,CAAAA,aAAA,IAAOJ,KAAK,CAACpB,WAAW,EAAKuB,QAAQ,CAClD,CAAC,CAAC,CAAC,CAEHE,iBAAiB,CAAGC,MAAM,EAAKhC,GAAG,CAAC,CAAEiB,cAAc,CAAEe,MAAO,CAAC,CAAC,CAE9DC,UAAU,CAAGC,OAAO,EAAKlC,GAAG,CAAE0B,KAAK,GAAM,CACvCR,QAAQ,CAAE,CAAC,GAAGQ,KAAK,CAACR,QAAQ,CAAEgB,OAAO,CACvC,CAAC,CAAC,CAAC,CAEHC,aAAa,CAAE,KAAAA,CAAA,GAAY,CACzBnC,GAAG,CAAC,CAAEG,SAAS,CAAE,IAAK,CAAC,CAAC,CAExB,GAAI,CACF;AACA,KAAM,CAAAiC,SAAS,CAAGC,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAC,CACxD,GAAIF,SAAS,CAAE,CACb,KAAM,CAAAlC,IAAI,CAAGqC,IAAI,CAACC,KAAK,CAACJ,SAAS,CAAC,CAClCpC,GAAG,CAAC,CAAEE,IAAI,CAAEC,SAAS,CAAE,KAAM,CAAC,CAAC,CACjC,CAAC,IAAM,CACLH,GAAG,CAAC,CAAEG,SAAS,CAAE,KAAM,CAAC,CAAC,CAC3B,CACF,CAAE,MAAOsC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CAC/CzC,GAAG,CAAC,CAAEG,SAAS,CAAE,KAAM,CAAC,CAAC,CAC3B,CACF,CAAC,CAEDwC,WAAW,CAAE,KAAO,CAAAC,OAAO,EAAK,CAC9B,KAAM,CAAE1C,IAAI,CAAEsB,UAAU,CAAEG,SAAS,CAAEkB,sBAAsB,CAAEd,iBAAkB,CAAC,CAAG9B,GAAG,CAAC,CAAC,CAExF,GAAI,CAACC,IAAI,CAAE,OAEX;AACA,KAAM,CAAA4C,WAAwB,CAAG,CAC/BC,EAAE,CAAEC,IAAI,CAACC,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CACzBC,MAAM,CAAEjD,IAAI,CAAC6C,EAAE,CACfH,OAAO,CACPQ,UAAU,CAAE,IAAI,CAChBC,SAAS,CAAE,GAAI,CAAAL,IAAI,CAAC,CACtB,CAAC,CACDxB,UAAU,CAACsB,WAAW,CAAC,CAEvB;AACA,KAAM,CAAAd,MAAM,CAAGa,sBAAsB,CAACD,OAAO,CAAC,CAC9C,GAAIZ,MAAM,CAAE,CACVD,iBAAiB,CAACC,MAAM,CAAC,CAC3B,CAEAL,SAAS,CAAC,IAAI,CAAC,CAEf,GAAI,CACF;AACA,KAAM,CAAA2B,gBAAgB,CAAG,KAAM,CAAA7D,eAAe,CAACkD,WAAW,CAACC,OAAO,CAAC,CACnE,GAAI,CAAAW,UAAU,CAAG,EAAE,CAEnB,GAAID,gBAAgB,CAACE,MAAM,CAAG,CAAC,CAAE,CAC/BD,UAAU,CAAGD,gBAAgB,CAAC,CAAC,CAAC,CAACG,IAAI,EAAI,EAAE,CAC7C,CAEA;AACA,GAAI,CAACF,UAAU,CAAE,CACfA,UAAU,CAAG,gEAAgE,CAC/E,CAEA,KAAM,CAAAG,SAAsB,CAAG,CAC7BX,EAAE,CAAE,CAACC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAG,CAAC,EAAEC,QAAQ,CAAC,CAAC,CAC/BC,MAAM,CAAE,IAAI,CACZP,OAAO,CAAEW,UAAU,CACnBH,UAAU,CAAE,KAAK,CACjBC,SAAS,CAAE,GAAI,CAAAL,IAAI,CAAC,CAAC,CACrBtC,OAAO,CAAE,CAAEC,IAAI,CAAE,aAAa,CAAEC,SAAS,CAAE,GAAI,CACjD,CAAC,CAEDY,UAAU,CAACkC,SAAS,CAAC,CAErB;AACAzD,GAAG,CAAC,CAAC,CAAC2B,iBAAiB,CAAC,CACtBpB,UAAU,CAAE,IAAI,CAChBC,gBAAgB,CAAE,UAAU,CAC5BC,OAAO,CAAE,CAAEC,IAAI,CAAE,aAAa,CAAEC,SAAS,CAAE,GAAI,CACjD,CAAC,CAAC,CAEF;AACA,GAAI,CACF,KAAM,CAAAX,GAAG,CAAC,CAAC,CAAC0D,SAAS,CAACJ,UAAU,CAAC,CACnC,CAAE,MAAOd,KAAK,CAAE,CACdC,OAAO,CAACkB,IAAI,CAAC,aAAa,CAAEnB,KAAK,CAAC,CACpC,CAEA;AACAxC,GAAG,CAAC,CAAC,CAAC2B,iBAAiB,CAAC,CACtBpB,UAAU,CAAE,KAAK,CACjBC,gBAAgB,CAAE,MACpB,CAAC,CAAC,CAEJ,CAAE,MAAOgC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAChD,CAAC,OAAS,CACRd,SAAS,CAAC,KAAK,CAAC,CAClB,CACF,CAAC,CAEDkB,sBAAsB,CAAGpB,OAAO,EAAK,CACnC,KAAM,CAAAoC,YAAY,CAAGpC,OAAO,CAACqC,WAAW,CAAC,CAAC,CAE1C,IAAK,KAAM,CAACC,QAAQ,CAAEC,QAAQ,CAAC,EAAI,CAAAC,MAAM,CAACC,OAAO,CAACxE,eAAe,CAAC,CAAE,CAClE,IAAK,KAAM,CAAAyE,OAAO,GAAI,CAAAH,QAAQ,CAAE,CAC9B,GAAIH,YAAY,CAACO,QAAQ,CAACD,OAAO,CAAC,CAAE,CAClC,MAAO,CACLH,QAAQ,CAAE,CAACG,OAAO,CAAC,CACnBJ,QAAQ,CAAEA,QAAuC,CACjDM,MAAM,CAAEN,QAAQ,GAAK,UAAU,CAAG,WAAW,CACtCA,QAAQ,GAAK,MAAM,CAAG,UAAU,CAAG,SAC5C,CAAC,CACH,CACF,CACF,CAEA,MAAO,KAAI,CACb,CAAC,CAEDJ,SAAS,CAAE,KAAO,CAAAF,IAAI,EAAK,CACzB,KAAM,CAAEtC,UAAW,CAAC,CAAGlB,GAAG,CAAC,CAAC,CAC5B,GAAI,CACF,KAAM,CAAAkB,UAAU,CAACmD,KAAK,CAACb,IAAI,CAAE,CAC3Bc,IAAI,CAAE,GAAG,CACTC,KAAK,CAAE,GAAG,CACVC,MAAM,CAAE,GACV,CAAC,CAAC,CACJ,CAAE,MAAOhC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,YAAY,CAAEA,KAAK,CAAC,CAClC,KAAM,CAAAA,KAAK,CACb,CACF,CAAC,CAEDiC,cAAc,CAAEA,CAAA,GAAM,CACpB1E,GAAG,CAAC,CAAEoB,WAAW,CAAE,IAAK,CAAC,CAAC,CAC1B;AACAsB,OAAO,CAACiC,GAAG,CAAC,mCAAmC,CAAC,CAClD,CAAC,CAEDC,aAAa,CAAEA,CAAA,GAAM,CACnB5E,GAAG,CAAC,CAAEoB,WAAW,CAAE,KAAM,CAAC,CAAC,CAC3B;AACAsB,OAAO,CAACiC,GAAG,CAAC,mCAAmC,CAAC,CAClD,CAAC,CAEDE,kBAAkB,CAAE,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACF,KAAM,CAAApF,eAAe,CAACqF,UAAU,CAAC,CAAC,CAClC9E,GAAG,CAAC,CAAEqB,iBAAiB,CAAE,IAAK,CAAC,CAAC,CAChCqB,OAAO,CAACiC,GAAG,CAAC,mCAAmC,CAAC,CAClD,CAAE,MAAOlC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,gCAAgC,CAAEA,KAAK,CAAC,CACtDzC,GAAG,CAAC,CAAEqB,iBAAiB,CAAE,KAAM,CAAC,CAAC,CACnC,CACF,CAAC,CAED0D,mBAAmB,CAAE,KAAAA,CAAA,GAAY,CAC/B,KAAM,CAAEzD,uBAAuB,CAAEE,UAAU,CAAEI,iBAAiB,CAAE+B,SAAU,CAAC,CAAG1D,GAAG,CAAC,CAAC,CAEnF,GAAIqB,uBAAuB,CAAE,OAE7B,GAAI,CACF;AACA,KAAM,CAAAgC,gBAAgB,CAAG,KAAM,CAAA7D,eAAe,CAACuF,kBAAkB,CAAC,CAAC,CACnE,GAAI,CAAAC,YAAY,CAAG,EAAE,CAErB,GAAI3B,gBAAgB,CAACE,MAAM,CAAG,CAAC,CAAE,CAC/ByB,YAAY,CAAG3B,gBAAgB,CAAC,CAAC,CAAC,CAACG,IAAI,EAAI,EAAE,CAC/C,CAEA;AACA,GAAI,CAACwB,YAAY,CAAE,CACjBA,YAAY,CAAG,sGAAsG,CACvH,CAEA,KAAM,CAAAC,eAA4B,CAAG,CACnCnC,EAAE,aAAAoC,MAAA,CAAcnC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAE,CAC5BE,MAAM,CAAE,IAAI,CACZP,OAAO,CAAEqC,YAAY,CACrB7B,UAAU,CAAE,KAAK,CACjBC,SAAS,CAAE,GAAI,CAAAL,IAAI,CAAC,CAAC,CACrBtC,OAAO,CAAE,CAAEC,IAAI,CAAE,WAAW,CAAEC,SAAS,CAAE,GAAI,CAC/C,CAAC,CAEDY,UAAU,CAAC0D,eAAe,CAAC,CAE3B;AACAtD,iBAAiB,CAAC,CAChBpB,UAAU,CAAE,IAAI,CAChBC,gBAAgB,CAAE,UAAU,CAC5BC,OAAO,CAAE,CAAEC,IAAI,CAAE,WAAW,CAAEC,SAAS,CAAE,GAAI,CAC/C,CAAC,CAAC,CAEF;AACA,GAAI,CACF,KAAM,CAAA+C,SAAS,CAACsB,YAAY,CAAC,CAC/B,CAAE,MAAOxC,KAAK,CAAE,CACdC,OAAO,CAACkB,IAAI,CAAC,0BAA0B,CAAEnB,KAAK,CAAC,CACjD,CAEA;AACAb,iBAAiB,CAAC,CAChBpB,UAAU,CAAE,KAAK,CACjBC,gBAAgB,CAAE,MACpB,CAAC,CAAC,CAEFT,GAAG,CAAC,CAAEsB,uBAAuB,CAAE,IAAK,CAAC,CAAC,CACxC,CAAE,MAAOmB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,iCAAiC,CAAEA,KAAK,CAAC,CACzD,CACF,CAAC,CAED2C,oBAAoB,CAAGC,SAAS,EAAKrF,GAAG,CAAC,CAAEqB,iBAAiB,CAAEgE,SAAU,CAAC,CAC3E,CAAC,CAAC,CACF,CACEC,IAAI,CAAE,mBAAmB,CACzBC,UAAU,CAAG7D,KAAK,GAAM,CACtBxB,IAAI,CAAEwB,KAAK,CAACxB,IAAI,CAChBgB,QAAQ,CAAEQ,KAAK,CAACR,QAClB,CAAC,CACH,CACF,CACF,CAAC,CAED","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}