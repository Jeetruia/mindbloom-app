/*! For license information please see main.52fe2897.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},67:(e,t,n)=>{e.exports=n(612)},153:(e,t,n)=>{var a=n(43),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var a,s={},c=null,d=null;for(a in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,a)&&!l.hasOwnProperty(a)&&(s[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===s[a]&&(s[a]=t[a]);return{$$typeof:r,type:e,key:c,ref:d,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),h=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=x.prototype;var b=v.prototype=new y;b.constructor=v,f(b,x.prototype),b.isPureReactComponent=!0;var w=Array.isArray,j=Object.prototype.hasOwnProperty,N={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,a){var r,s={},i=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)j.call(t,r)&&!k.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=a;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:e,key:i,ref:o,props:s,_owner:N.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function P(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(e,t,r,s,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case a:l=!0}}if(l)return i=i(l=e),e=""===s?"."+P(l,0):s,w(i)?(r="",null!=e&&(r=e.replace(E,"$&/")+"/"),A(i,t,r,"",function(e){return e})):null!=i&&(C(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,r+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(E,"$&/")+"/")+e)),t.push(i)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var d=s+P(o=e[c],c);l+=A(o,t,r,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=A(o=o.value,t,r,d=s+P(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,n){if(null==e)return e;var a=[],r=0;return A(e,a,"","",function(e){return t.call(n,e,r++)}),a}function M(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},R={transition:null},D={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:R,ReactCurrentOwner:N};function I(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=x,t.Fragment=r,t.Profiler=i,t.PureComponent=v,t.StrictMode=s,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=I,t.cloneElement=function(e,t,a){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=f({},e.props),s=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=N.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)j.call(t,c)&&!k.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=a;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:n,type:e.type,key:s,ref:i,props:r,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=I,t.useCallback=function(e,t){return L.current.useCallback(e,t)},t.useContext=function(e){return L.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return L.current.useDeferredValue(e)},t.useEffect=function(e,t){return L.current.useEffect(e,t)},t.useId=function(){return L.current.useId()},t.useImperativeHandle=function(e,t,n){return L.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return L.current.useMemo(e,t)},t.useReducer=function(e,t,n){return L.current.useReducer(e,t,n)},t.useRef=function(e){return L.current.useRef(e)},t.useState=function(e){return L.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return L.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return L.current.useTransition()},t.version="18.3.1"},330:(e,t,n)=>{var a=n(43);var r="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=a.useState,i=a.useEffect,o=a.useLayoutEffect,l=a.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!r(e,n)}catch(a){return!0}}var d="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),a=s({inst:{value:n,getSnapshot:t}}),r=a[0].inst,d=a[1];return o(function(){r.value=n,r.getSnapshot=t,c(r)&&d({inst:r})},[e,n,t]),i(function(){return c(r)&&d({inst:r}),e(function(){c(r)&&d({inst:r})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:d},391:(e,t,n)=>{var a=n(950);t.createRoot=a.createRoot,t.hydrateRoot=a.hydrateRoot},392:(e,t,n)=>{n.d(t,{vertexAIService:()=>r});class a{constructor(){this.projectId=void 0,this.location=void 0,this.modelName=void 0,this.proxyUrl=void 0,this.fallbackApiKey=void 0,this.projectId={NODE_ENV:"production",PUBLIC_URL:"/mindbloom-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GOOGLE_CLOUD_PROXY_URL:"http://localhost:5001/api/google-cloud",REACT_APP_GEMINI_API_KEY:"",REACT_APP_SUPABASE_URL:"",REACT_APP_SUPABASE_ANON_KEY:"",REACT_APP_BOTPRESS_BOT_ID:"",REACT_APP_BOTPRESS_CONFIG_URL:"",REACT_APP_APP_NAME:"MindBloom",REACT_APP_APP_VERSION:"1.0.0",REACT_APP_ENVIRONMENT:"development"}.REACT_APP_GOOGLE_CLOUD_PROJECT_ID||"",this.location={NODE_ENV:"production",PUBLIC_URL:"/mindbloom-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GOOGLE_CLOUD_PROXY_URL:"http://localhost:5001/api/google-cloud",REACT_APP_GEMINI_API_KEY:"",REACT_APP_SUPABASE_URL:"",REACT_APP_SUPABASE_ANON_KEY:"",REACT_APP_BOTPRESS_BOT_ID:"",REACT_APP_BOTPRESS_CONFIG_URL:"",REACT_APP_APP_NAME:"MindBloom",REACT_APP_APP_VERSION:"1.0.0",REACT_APP_ENVIRONMENT:"development"}.REACT_APP_GEMINI_LOCATION||"us-central1",this.modelName={NODE_ENV:"production",PUBLIC_URL:"/mindbloom-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GOOGLE_CLOUD_PROXY_URL:"http://localhost:5001/api/google-cloud",REACT_APP_GEMINI_API_KEY:"",REACT_APP_SUPABASE_URL:"",REACT_APP_SUPABASE_ANON_KEY:"",REACT_APP_BOTPRESS_BOT_ID:"",REACT_APP_BOTPRESS_CONFIG_URL:"",REACT_APP_APP_NAME:"MindBloom",REACT_APP_APP_VERSION:"1.0.0",REACT_APP_ENVIRONMENT:"development"}.REACT_APP_GEMINI_MODEL||"gemini-1.5-flash",this.proxyUrl="http://localhost:5001/api/google-cloud",this.fallbackApiKey=null}async generateResponse(e){if(this.proxyUrl)try{return await this.generateViaProxy(e)}catch(t){if(console.warn("Vertex AI proxy failed, falling back to free API:",t),this.fallbackApiKey)return await this.generateViaFreeAPI(e);throw t}if(this.fallbackApiKey)return await this.generateViaFreeAPI(e);throw new Error("No Google Cloud configuration found. Please set up either Vertex AI proxy or Gemini API key.")}async generateViaProxy(e){if(!this.proxyUrl)throw new Error("Proxy URL not configured");const t=await fetch("".concat(this.proxyUrl,"/api/google-cloud/vertex-ai/generate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:this.projectId,location:this.location,model:this.modelName,messages:e})});if(!t.ok){const e=await t.json().catch(()=>({message:"Unknown error"})),n=e.message||e.error||"Unknown error";if(console.error("Vertex AI proxy error:",t.status,n),n.includes("API key")||n.includes("not configured"))throw new Error("Google Cloud API key not configured on server. Please set GEMINI_API_KEY in server-proxy/.env file. Error: ".concat(n));throw new Error("Vertex AI proxy error: ".concat(t.status," - ").concat(n))}const n=await t.json();if(console.log("Vertex AI proxy response data:",JSON.stringify(n).substring(0,300)),n.candidates&&n.candidates.length>0){var a,r,s;const e=n.candidates[0];if(null!==(a=e.content)&&void 0!==a&&null!==(r=a.parts)&&void 0!==r&&null!==(s=r[0])&&void 0!==s&&s.text)return e.content.parts[0].text}if(n.text)return n.text;throw console.error("Unexpected response format:",n),new Error("No valid response from Vertex AI - unexpected response format")}async generateViaFreeAPI(e){if(!this.fallbackApiKey)throw new Error("Fallback API key not configured");const t=await fetch("".concat("https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent","?key=").concat(this.fallbackApiKey),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:e,generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:1024},safetySettings:[{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"}]})});if(!t.ok)throw new Error("Gemini API error: ".concat(t.status));const n=await t.json();if(n.candidates&&n.candidates.length>0)return n.candidates[0].content.parts[0].text;throw new Error("No response from Gemini API")}async getInitialGreeting(){const e=[{role:"user",parts:[{text:"You are Mira, a licensed and experienced therapist with expertise in Cognitive Behavioral Therapy (CBT), Dialectical Behavior Therapy (DBT), and Acceptance and Commitment Therapy (ACT).\n\nYour therapeutic approach:\n- Warm, compassionate, and non-judgmental\n- Uses evidence-based therapeutic techniques\n- Creates a safe space for exploration\n- Validates feelings while offering insights\n- Asks thoughtful, open-ended questions\n- Provides practical coping strategies\n- Encourages self-compassion and acceptance\n- Speaks professionally but warmly (like a caring therapist)\n\nPlease provide a brief, professional greeting (2-3 sentences) that:\n1. Introduces yourself as their therapist\n2. Acknowledges it's okay to share what's on their mind\n3. Invites them to begin the conversation\n\nKeep it warm, professional, and inviting."}]}];try{return await this.generateResponse(e)}catch(t){return console.error("Error getting initial greeting:",t),"Hello! I'm Mira, your therapist. I'm here to provide a safe and supportive space for you to explore your thoughts and feelings. What would you like to talk about today?"}}async generateTherapeuticResponse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=[{role:"user",parts:[{text:"You are Mira, a licensed and experienced therapist with expertise in:\n- Cognitive Behavioral Therapy (CBT): Identifying thought patterns, challenging cognitive distortions, reframing\n- Dialectical Behavior Therapy (DBT): Emotion regulation, distress tolerance, mindfulness\n- Acceptance and Commitment Therapy (ACT): Acceptance, mindfulness, values-based action\n\nYOUR THERAPEUTIC APPROACH:\n1. Active Listening: Fully hear and understand what they're sharing\n2. Validation: Acknowledge their feelings are valid and understandable\n3. Exploration: Ask insightful, open-ended questions to deepen understanding\n4. Evidence-Based Techniques: Use CBT (thought challenging, reframing), DBT (emotion regulation), ACT (acceptance), mindfulness\n5. Normalization: Help them understand their experiences are human and common\n6. Empowerment: Encourage self-compassion, self-care, and agency\n7. Practical Strategies: Offer concrete coping techniques and tools\n8. Professional Boundaries: Never diagnose, never provide medical advice, always encourage professional help for serious concerns\n9. Crisis Response: If suicidal thoughts expressed, validate their pain, express care, provide immediate crisis resources (988), encourage safety\n\nRESPONSE GUIDELINES:\n- Warm and professional tone\n- 3-5 sentences that are meaningful and therapeutic\n- Show genuine care and understanding\n- Ask questions that encourage deeper exploration\n- Offer insights that help them see patterns or new perspectives\n- Suggest practical techniques when appropriate\n- End with a question or invitation to continue exploring\n\nConversation Context:\n".concat(t.length>0?"Previous conversation: ".concat(t.slice(-3).map(e=>{var t;return null===(t=e.parts[0])||void 0===t?void 0:t.text}).join(" | ")):"Beginning of session",'\n\nCurrent User Message: "').concat(e,'"\n\nProvide a therapeutic response that validates, explores, and supports.')}]}];try{return await this.generateResponse(n)}catch(a){return console.error("Error generating therapeutic response:",a),"I hear you, and I want to understand better. Can you tell me more about what you're experiencing? I'm here to support you through this."}}}const r=new a},443:(e,t,n)=>{e.exports=n(717)},461:(e,t,n)=>{e.exports=n(330)},555:(e,t,n)=>{function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function r(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function s(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,{A:()=>o})},564:(e,t,n)=>{n.d(t,{xpService:()=>s});var a=n(555),r=n(727);const s=new class{constructor(){this.xpHistory=[],this.achievements=[{id:"first_breath",title:"First Breath",description:"Complete your first breathing exercise",icon:"\ud83c\udf2c\ufe0f",xpReward:50},{id:"breathing_master",title:"Breathing Master",description:"Complete 10 breathing cycles",icon:"\ud83d\udc09",xpReward:100},{id:"daily_streak_7",title:"Week Warrior",description:"Maintain a 7-day streak",icon:"\ud83d\udd25",xpReward:200},{id:"gratitude_pro",title:"Gratitude Pro",description:"Complete 5 gratitude exercises",icon:"\ud83d\ude4f",xpReward:150},{id:"meditation_zen",title:"Zen Master",description:"Complete 20 meditation sessions",icon:"\ud83e\uddd8",xpReward:300},{id:"level_5",title:"Rising Star",description:"Reach Level 5",icon:"\u2b50",xpReward:250},{id:"level_10",title:"Champion",description:"Reach Level 10",icon:"\ud83d\udc51",xpReward:500},{id:"community_hero",title:"Community Hero",description:"Share 5 stories with the community",icon:"\ud83d\udc9d",xpReward:200}]}xpForLevel(e){return Math.floor(100*Math.pow(e,1.5))}calculateLevel(e){let t=1,n=this.xpForLevel(t+1);for(;e>=n;)t++,n=this.xpForLevel(t+1);return t}getLevelProgress(e){const t=this.calculateLevel(e),n=this.xpForLevel(t),a=this.xpForLevel(t+1),r=a-e,s=(e-n)/(a-n)*100;return{currentLevel:t,currentXP:e,xpForCurrentLevel:n,xpForNextLevel:a,progress:Math.max(0,Math.min(100,s)),xpToNextLevel:Math.max(0,r)}}async addXP(e,t,n){const s=(0,a.A)((0,a.A)({},n),{},{timestamp:new Date});this.xpHistory.push(s);const i=t+n.xp,o=this.calculateLevel(t),l=this.calculateLevel(i),c=l>o,d=this.checkAchievements(i,l,n.type);try{const t={userId:e,xp:i,level:l,action:s,unlockedAchievements:d.map(e=>e.id),timestamp:(new Date).toISOString()},n=new Blob([JSON.stringify(t)],{type:"application/json"});await r.P.uploadAudio(n,e,"recording","xp-progress-".concat(Date.now(),".json"))}catch(u){console.error("Error saving XP to Google Cloud:",u)}return{newXP:i,newLevel:l,levelUp:c,unlockedAchievements:d}}checkAchievements(e,t,n){var a,r;const s=[];if(t>=5&&(null===(a=this.achievements.find(e=>"level_5"===e.id))||void 0===a||!a.unlockedAt)){const e=this.achievements.find(e=>"level_5"===e.id);e&&(e.unlockedAt=new Date,s.push(e))}if(t>=10&&(null===(r=this.achievements.find(e=>"level_10"===e.id))||void 0===r||!r.unlockedAt)){const e=this.achievements.find(e=>"level_10"===e.id);e&&(e.unlockedAt=new Date,s.push(e))}return s}getAchievements(){return this.achievements}getXPHistory(){return[...this.xpHistory].reverse()}calculateStreak(e){const t=new Date;t.setHours(0,0,0,0);return e.filter(e=>new Date(e.timestamp)>=t).length>0?1:0}}},579:(e,t,n)=>{e.exports=n(153)},612:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var a=n-1>>>1,r=e[a];if(!(0<s(r,t)))break e;e[a]=t,e[n]=r,n=a}}function a(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var a=0,r=e.length,i=r>>>1;a<i;){var o=2*(a+1)-1,l=e[o],c=o+1,d=e[c];if(0>s(l,n))c<r&&0>s(d,l)?(e[a]=d,e[c]=n,a=c):(e[a]=l,e[o]=n,a=o);else{if(!(c<r&&0>s(d,n)))break e;e[a]=d,e[c]=n,a=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,m=null,h=3,p=!1,f=!1,g=!1,x="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=a(d);null!==t;){if(null===t.callback)r(d);else{if(!(t.startTime<=e))break;r(d),t.sortIndex=t.expirationTime,n(c,t)}t=a(d)}}function w(e){if(g=!1,b(e),!f)if(null!==a(c))f=!0,R(j);else{var t=a(d);null!==t&&D(w,t.startTime-e)}}function j(e,n){f=!1,g&&(g=!1,y(C),C=-1),p=!0;var s=h;try{for(b(n),m=a(c);null!==m&&(!(m.expirationTime>n)||e&&!A());){var i=m.callback;if("function"===typeof i){m.callback=null,h=m.priorityLevel;var o=i(m.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?m.callback=o:m===a(c)&&r(c),b(n)}else r(c);m=a(c)}if(null!==m)var l=!0;else{var u=a(d);null!==u&&D(w,u.startTime-n),l=!1}return l}finally{m=null,h=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,k=!1,S=null,C=-1,E=5,P=-1;function A(){return!(t.unstable_now()-P<E)}function T(){if(null!==S){var e=t.unstable_now();P=e;var n=!0;try{n=S(!0,e)}finally{n?N():(k=!1,S=null)}}else k=!1}if("function"===typeof v)N=function(){v(T)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,L=M.port2;M.port1.onmessage=T,N=function(){L.postMessage(null)}}else N=function(){x(T,0)};function R(e){S=e,k||(k=!0,N())}function D(e,n){C=x(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,R(j))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return a(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,r,s){var i=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?i+s:i:s=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:r,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>i?(e.sortIndex=s,n(d,e),null===a(c)&&e===a(d)&&(g?(y(C),C=-1):g=!0,D(w,s-i))):(e.sortIndex=o,n(c,e),f||p||(f=!0,R(j))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},717:(e,t,n)=>{var a=n(43),r=n(461);var s="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=r.useSyncExternalStore,o=a.useRef,l=a.useEffect,c=a.useMemo,d=a.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,a,r){var u=o(null);if(null===u.current){var m={hasValue:!1,value:null};u.current=m}else m=u.current;u=c(function(){function e(e){if(!l){if(l=!0,i=e,e=a(e),void 0!==r&&m.hasValue){var t=m.value;if(r(t,e))return o=t}return o=e}if(t=o,s(i,e))return t;var n=a(e);return void 0!==r&&r(t,n)?(i=e,t):(i=e,o=n)}var i,o,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,a,r]);var h=i(e,u[0],u[1]);return l(function(){m.hasValue=!0,m.value=h},[h]),d(h),h}},727:(e,t,n)=>{n.d(t,{P:()=>r});class a{constructor(){this.proxyUrl=void 0,this.bucketName=void 0,this.proxyUrl="http://localhost:5001/api/google-cloud",this.bucketName={NODE_ENV:"production",PUBLIC_URL:"/mindbloom-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GOOGLE_CLOUD_PROXY_URL:"http://localhost:5001/api/google-cloud",REACT_APP_GEMINI_API_KEY:"",REACT_APP_SUPABASE_URL:"",REACT_APP_SUPABASE_ANON_KEY:"",REACT_APP_BOTPRESS_BOT_ID:"",REACT_APP_BOTPRESS_CONFIG_URL:"",REACT_APP_APP_NAME:"MindBloom",REACT_APP_APP_VERSION:"1.0.0",REACT_APP_ENVIRONMENT:"development"}.REACT_APP_GOOGLE_CLOUD_STORAGE_BUCKET||"mindbloom-app-storage"}async uploadFile(e,t,n){if(!this.proxyUrl)throw new Error("Google Cloud Storage proxy not configured. Please set REACT_APP_GOOGLE_CLOUD_PROXY_URL");const a=await this.blobToBase64(e),r=await fetch("".concat(this.proxyUrl,"/storage/upload"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bucket:this.bucketName,path:t,file:a.split(",")[1],contentType:(null===n||void 0===n?void 0:n.contentType)||e.type||"application/octet-stream",metadata:(null===n||void 0===n?void 0:n.metadata)||{},makePublic:(null===n||void 0===n?void 0:n.public)||!1,cacheControl:(null===n||void 0===n?void 0:n.cacheControl)||"public, max-age=3600"})});if(!r.ok){const e=await r.json().catch(()=>({message:"Unknown error"}));throw new Error("Storage upload error: ".concat(r.status," - ").concat(e.message||"Unknown error"))}return await r.json()}async getDownloadUrl(e,t){if(!this.proxyUrl)throw new Error("Google Cloud Storage proxy not configured");const n=await fetch("".concat(this.proxyUrl,"/storage/get-url"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bucket:this.bucketName,path:e,expiresIn:t||3600})});if(!n.ok){const e=await n.json().catch(()=>({message:"Unknown error"}));throw new Error("Get download URL error: ".concat(n.status," - ").concat(e.message||"Unknown error"))}return(await n.json()).url}async deleteFile(e){if(!this.proxyUrl)throw new Error("Google Cloud Storage proxy not configured");const t=await fetch("".concat(this.proxyUrl,"/storage/delete"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bucket:this.bucketName,path:e})});if(!t.ok){const e=await t.json().catch(()=>({message:"Unknown error"}));throw new Error("Delete file error: ".concat(t.status," - ").concat(e.message||"Unknown error"))}}async listFiles(e,t){if(!this.proxyUrl)throw new Error("Google Cloud Storage proxy not configured");const n=await fetch("".concat(this.proxyUrl,"/storage/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bucket:this.bucketName,prefix:e||"",maxResults:t||100})});if(!n.ok){const e=await n.json().catch(()=>({message:"Unknown error"}));throw new Error("List files error: ".concat(n.status," - ").concat(e.message||"Unknown error"))}return(await n.json()).files||[]}async uploadAudio(e,t,n,a){const r=Date.now(),s=e.type.includes("mpeg")?"mp3":e.type.split("/")[1]||"webm",i="audio/".concat(t,"/").concat(n,"/").concat(a||"".concat(r,".").concat(s));return(await this.uploadFile(e,i,{contentType:e.type,metadata:{userId:t,type:n,uploadedAt:(new Date).toISOString()},public:"story"===n})).publicUrl||await this.getDownloadUrl(i)}async uploadImage(e,t,n,a){const r=Date.now(),s=e.type.split("/")[1]||"png",i="images/".concat(t,"/").concat(n,"/").concat(a||"".concat(r,".").concat(s));return(await this.uploadFile(e,i,{contentType:e.type,metadata:{userId:t,type:n,uploadedAt:(new Date).toISOString()},public:!0,cacheControl:"public, max-age=31536000"})).publicUrl||await this.getDownloadUrl(i)}blobToBase64(e){return new Promise((t,n)=>{const a=new FileReader;a.onloadend=()=>t(a.result),a.onerror=n,a.readAsDataURL(e)})}}const r=new a},730:(e,t,n)=>{var a=n(43),r=n(67);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function f(e,t,n,a,r,s,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=a,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function v(e,t,n,a){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:a||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,a){if(null===t||"undefined"===typeof t||function(e,t,n,a){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!a&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,a))return!0;if(a)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,a)&&(n=null),a||null===r?function(e){return!!u.call(p,e)||!u.call(h,e)&&(m.test(e)?p[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,a=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,a?e.setAttributeNS(a,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(x,y);g[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(x,y);g[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(x,y);g[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),j=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),E=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function I(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var _,O=Object.assign;function F(e){if(void 0===_)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);_=t&&t[1]||""}return"\n"+_+e}var z=!1;function V(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var a=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){a=c}e.call(t.prototype)}else{try{throw Error()}catch(c){a=c}e()}}catch(c){if(c&&a&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),s=a.stack.split("\n"),i=r.length-1,o=s.length-1;1<=i&&0<=o&&r[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(r[i]!==s[o]){if(1!==i||1!==o)do{if(i--,0>--o||r[i]!==s[o]){var l="\n"+r[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case j:return"Portal";case S:return"Profiler";case k:return"StrictMode";case A:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case P:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){a=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=G(e)?e.checked?"true":"false":e.value),(e=a)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return O({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,a=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:a,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function Q(e,t){J(e,t);var n=W(t.value),a=t.type;if(null!=n)"number"===a?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===a||"reset"===a)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!("submit"!==a&&"reset"!==a||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,a){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&a&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(a&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return O({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),a=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=a&&(e.defaultValue=""+a)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,a){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function me(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var a=0===n.indexOf("--"),r=fe(n,t[n],a);"float"===n&&(n="cssFloat"),a?e.setProperty(n,r):e[n]=r}}Object.keys(he).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]})});var xe=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var je=null,Ne=null,ke=null;function Se(e){if(e=vr(e)){if("function"!==typeof je)throw Error(s(280));var t=e.stateNode;t&&(t=wr(t),je(e.stateNode,e.type,t))}}function Ce(e){Ne?ke?ke.push(e):ke=[e]:Ne=e}function Ee(){if(Ne){var e=Ne,t=ke;if(ke=Ne=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Pe(e,t){return e(t)}function Ae(){}var Te=!1;function Me(e,t,n){if(Te)return e(t,n);Te=!0;try{return Pe(e,t,n)}finally{Te=!1,(null!==Ne||null!==ke)&&(Ae(),Ee())}}function Le(e,t){var n=e.stateNode;if(null===n)return null;var a=wr(n);if(null===a)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Re=!1;if(d)try{var De={};Object.defineProperty(De,"passive",{get:function(){Re=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(de){Re=!1}function Ie(e,t,n,a,r,s,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var _e=!1,Oe=null,Fe=!1,ze=null,Ve={onError:function(e){_e=!0,Oe=e}};function Be(e,t,n,a,r,s,i,o,l){_e=!1,Oe=null,Ie.apply(Ve,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ue(e)!==e)throw Error(s(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,a=t;;){var r=n.return;if(null===r)break;var i=r.alternate;if(null===i){if(null!==(a=r.return)){n=a;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return We(r),e;if(i===a)return We(r),t;i=i.sibling}throw Error(s(188))}if(n.return!==a.return)n=r,a=i;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,a=i;break}if(l===a){o=!0,a=r,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,a=r;break}if(l===a){o=!0,a=i,n=r;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==a)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ye=r.unstable_scheduleCallback,Xe=r.unstable_cancelCallback,$e=r.unstable_shouldYield,Ke=r.unstable_requestPaint,Je=r.unstable_now,Qe=r.unstable_getCurrentPriorityLevel,Ze=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,at=r.unstable_IdlePriority,rt=null,st=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function mt(e,t){var n=e.pendingLanes;if(0===n)return 0;var a=0,r=e.suspendedLanes,s=e.pingedLanes,i=268435455&n;if(0!==i){var o=i&~r;0!==o?a=ut(o):0!==(s&=i)&&(a=ut(s))}else 0!==(i=n&~r)?a=ut(i):0!==s&&(a=ut(s));if(0===a)return 0;if(0!==t&&t!==a&&0===(t&r)&&((r=a&-a)>=(s=t&-t)||16===r&&0!==(4194240&s)))return t;if(0!==(4&a)&&(a|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=a;0<t;)r=1<<(n=31-it(t)),a|=e[n],t&=~r;return a}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function xt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-it(n),r=1<<a;r&t|e[a]&t&&(e[a]|=t),n&=~r}}var vt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,jt,Nt,kt,St,Ct=!1,Et=[],Pt=null,At=null,Tt=null,Mt=new Map,Lt=new Map,Rt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function It(e,t){switch(e){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lt.delete(t.pointerId)}}function _t(e,t,n,a,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=vr(t))&&jt(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Ot(e){var t=yr(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void St(e.priority,function(){Nt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=vr(n))&&jt(t),e.blockedOn=n,!1;var a=new(n=e.nativeEvent).constructor(n.type,n);be=a,n.target.dispatchEvent(a),be=null,t.shift()}return!0}function zt(e,t,n){Ft(e)&&n.delete(t)}function Vt(){Ct=!1,null!==Pt&&Ft(Pt)&&(Pt=null),null!==At&&Ft(At)&&(At=null),null!==Tt&&Ft(Tt)&&(Tt=null),Mt.forEach(zt),Lt.forEach(zt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Vt)))}function Ut(e){function t(t){return Bt(t,e)}if(0<Et.length){Bt(Et[0],e);for(var n=1;n<Et.length;n++){var a=Et[n];a.blockedOn===e&&(a.blockedOn=null)}}for(null!==Pt&&Bt(Pt,e),null!==At&&Bt(At,e),null!==Tt&&Bt(Tt,e),Mt.forEach(t),Lt.forEach(t),n=0;n<Rt.length;n++)(a=Rt[n]).blockedOn===e&&(a.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ot(n),null===n.blockedOn&&Rt.shift()}var Ht=b.ReactCurrentBatchConfig,Wt=!0;function Gt(e,t,n,a){var r=vt,s=Ht.transition;Ht.transition=null;try{vt=1,Yt(e,t,n,a)}finally{vt=r,Ht.transition=s}}function qt(e,t,n,a){var r=vt,s=Ht.transition;Ht.transition=null;try{vt=4,Yt(e,t,n,a)}finally{vt=r,Ht.transition=s}}function Yt(e,t,n,a){if(Wt){var r=$t(e,t,n,a);if(null===r)Wa(e,t,a,Xt,n),It(e,a);else if(function(e,t,n,a,r){switch(t){case"focusin":return Pt=_t(Pt,e,t,n,a,r),!0;case"dragenter":return At=_t(At,e,t,n,a,r),!0;case"mouseover":return Tt=_t(Tt,e,t,n,a,r),!0;case"pointerover":var s=r.pointerId;return Mt.set(s,_t(Mt.get(s)||null,e,t,n,a,r)),!0;case"gotpointercapture":return s=r.pointerId,Lt.set(s,_t(Lt.get(s)||null,e,t,n,a,r)),!0}return!1}(r,e,t,n,a))a.stopPropagation();else if(It(e,a),4&t&&-1<Dt.indexOf(e)){for(;null!==r;){var s=vr(r);if(null!==s&&wt(s),null===(s=$t(e,t,n,a))&&Wa(e,t,a,Xt,n),s===r)break;r=s}null!==r&&a.stopPropagation()}else Wa(e,t,a,null,n)}}var Xt=null;function $t(e,t,n,a){if(Xt=null,null!==(e=yr(e=we(a))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case at:return 536870912;default:return 16}default:return 16}}var Jt=null,Qt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Qt,a=n.length,r="value"in Jt?Jt.value:Jt.textContent,s=r.length;for(e=0;e<a&&n[e]===r[e];e++);var i=a-e;for(t=1;t<=i&&n[a-t]===r[s-t];t++);return Zt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function an(){return!1}function rn(e){function t(t,n,a,r,s){for(var i in this._reactName=t,this._targetInst=a,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(r):r[i]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:an,this.isPropagationStopped=an,this}return O(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=rn(cn),un=O({},cn,{view:0,detail:0}),mn=rn(un),hn=O({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=rn(hn),fn=rn(O({},hn,{dataTransfer:0})),gn=rn(O({},un,{relatedTarget:0})),xn=rn(O({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=O({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=rn(yn),bn=rn(O({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nn[e])&&!!t[e]}function Sn(){return kn}var Cn=O({},un,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?jn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=rn(Cn),Pn=rn(O({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=rn(O({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Tn=rn(O({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=O({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=rn(Mn),Rn=[9,13,27,32],Dn=d&&"CompositionEvent"in window,In=null;d&&"documentMode"in document&&(In=document.documentMode);var _n=d&&"TextEvent"in window&&!In,On=d&&(!Dn||In&&8<In&&11>=In),Fn=String.fromCharCode(32),zn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Gn(e,t,n,a){Ce(a),0<(t=qa(t,"onChange")).length&&(n=new dn("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var qn=null,Yn=null;function Xn(e){Fa(e,0)}function $n(e){if(Y(br(e)))return e}function Kn(e,t){if("change"===e)return t}var Jn=!1;if(d){var Qn;if(d){var Zn="oninput"in document;if(!Zn){var ea=document.createElement("div");ea.setAttribute("oninput","return;"),Zn="function"===typeof ea.oninput}Qn=Zn}else Qn=!1;Jn=Qn&&(!document.documentMode||9<document.documentMode)}function ta(){qn&&(qn.detachEvent("onpropertychange",na),Yn=qn=null)}function na(e){if("value"===e.propertyName&&$n(Yn)){var t=[];Gn(t,Yn,e,we(e)),Me(Xn,t)}}function aa(e,t,n){"focusin"===e?(ta(),Yn=n,(qn=t).attachEvent("onpropertychange",na)):"focusout"===e&&ta()}function ra(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Yn)}function sa(e,t){if("click"===e)return $n(t)}function ia(e,t){if("input"===e||"change"===e)return $n(t)}var oa="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function la(e,t){if(oa(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var r=n[a];if(!u.call(t,r)||!oa(e[r],t[r]))return!1}return!0}function ca(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function da(e,t){var n,a=ca(e);for(e=0;a;){if(3===a.nodeType){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ca(a)}}function ua(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ua(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ma(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(a){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function ha(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pa(e){var t=ma(),n=e.focusedElem,a=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ua(n.ownerDocument.documentElement,n)){if(null!==a&&ha(n))if(t=a.start,void 0===(e=a.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,s=Math.min(a.start,r);a=void 0===a.end?s:Math.min(a.end,r),!e.extend&&s>a&&(r=a,a=s,s=r),r=da(n,s);var i=da(n,a);r&&i&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),s>a?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fa=d&&"documentMode"in document&&11>=document.documentMode,ga=null,xa=null,ya=null,va=!1;function ba(e,t,n){var a=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;va||null==ga||ga!==X(a)||("selectionStart"in(a=ga)&&ha(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},ya&&la(ya,a)||(ya=a,0<(a=qa(xa,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=ga)))}function wa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ja={animationend:wa("Animation","AnimationEnd"),animationiteration:wa("Animation","AnimationIteration"),animationstart:wa("Animation","AnimationStart"),transitionend:wa("Transition","TransitionEnd")},Na={},ka={};function Sa(e){if(Na[e])return Na[e];if(!ja[e])return e;var t,n=ja[e];for(t in n)if(n.hasOwnProperty(t)&&t in ka)return Na[e]=n[t];return e}d&&(ka=document.createElement("div").style,"AnimationEvent"in window||(delete ja.animationend.animation,delete ja.animationiteration.animation,delete ja.animationstart.animation),"TransitionEvent"in window||delete ja.transitionend.transition);var Ca=Sa("animationend"),Ea=Sa("animationiteration"),Pa=Sa("animationstart"),Aa=Sa("transitionend"),Ta=new Map,Ma="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function La(e,t){Ta.set(e,t),l(t,[e])}for(var Ra=0;Ra<Ma.length;Ra++){var Da=Ma[Ra];La(Da.toLowerCase(),"on"+(Da[0].toUpperCase()+Da.slice(1)))}La(Ca,"onAnimationEnd"),La(Ea,"onAnimationIteration"),La(Pa,"onAnimationStart"),La("dblclick","onDoubleClick"),La("focusin","onFocus"),La("focusout","onBlur"),La(Aa,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_a=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ia));function Oa(e,t,n){var a=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,a,r,i,o,l,c){if(Be.apply(this,arguments),_e){if(!_e)throw Error(s(198));var d=Oe;_e=!1,Oe=null,Fe||(Fe=!0,ze=d)}}(a,t,void 0,e),e.currentTarget=null}function Fa(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var a=e[n],r=a.event;a=a.listeners;e:{var s=void 0;if(t)for(var i=a.length-1;0<=i;i--){var o=a[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;Oa(r,o,c),s=l}else for(i=0;i<a.length;i++){if(l=(o=a[i]).instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;Oa(r,o,c),s=l}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function za(e,t){var n=t[fr];void 0===n&&(n=t[fr]=new Set);var a=e+"__bubble";n.has(a)||(Ha(t,e,2,!1),n.add(a))}function Va(e,t,n){var a=0;t&&(a|=4),Ha(n,e,a,t)}var Ba="_reactListening"+Math.random().toString(36).slice(2);function Ua(e){if(!e[Ba]){e[Ba]=!0,i.forEach(function(t){"selectionchange"!==t&&(_a.has(t)||Va(t,!1,e),Va(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ba]||(t[Ba]=!0,Va("selectionchange",!1,t))}}function Ha(e,t,n,a){switch(Kt(t)){case 1:var r=Gt;break;case 4:r=qt;break;default:r=Yt}n=r.bind(null,t,n,e),r=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),a?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Wa(e,t,n,a,r){var s=a;if(0===(1&t)&&0===(2&t)&&null!==a)e:for(;;){if(null===a)return;var i=a.tag;if(3===i||4===i){var o=a.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===i)for(i=a.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;i=i.return}for(;null!==o;){if(null===(i=yr(o)))return;if(5===(l=i.tag)||6===l){a=s=i;continue e}o=o.parentNode}}a=a.return}Me(function(){var a=s,r=we(n),i=[];e:{var o=Ta.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=En;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Ca:case Ea:case Pa:l=xn;break;case Aa:l=Tn;break;case"scroll":l=mn;break;case"wheel":l=Ln;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Pn}var d=0!==(4&t),u=!d&&"scroll"===e,m=d?null!==o?o+"Capture":null:o;d=[];for(var h,p=a;null!==p;){var f=(h=p).stateNode;if(5===h.tag&&null!==f&&(h=f,null!==m&&(null!=(f=Le(p,m))&&d.push(Ga(p,f,h)))),u)break;p=p.return}0<d.length&&(o=new l(o,c,null,n,r),i.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yr(c)&&!c[pr])&&(l||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=a,null!==(c=(c=n.relatedTarget||n.toElement)?yr(c):null)&&(c!==(u=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=a),l!==c)){if(d=pn,f="onMouseLeave",m="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=Pn,f="onPointerLeave",m="onPointerEnter",p="pointer"),u=null==l?o:br(l),h=null==c?o:br(c),(o=new d(f,p+"leave",l,n,r)).target=u,o.relatedTarget=h,f=null,yr(r)===a&&((d=new d(m,p+"enter",c,n,r)).target=h,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(m=c,p=0,h=d=l;h;h=Ya(h))p++;for(h=0,f=m;f;f=Ya(f))h++;for(;0<p-h;)d=Ya(d),p--;for(;0<h-p;)m=Ya(m),h--;for(;p--;){if(d===m||null!==m&&d===m.alternate)break e;d=Ya(d),m=Ya(m)}d=null}else d=null;null!==l&&Xa(i,o,l,d,!1),null!==c&&null!==u&&Xa(i,u,c,d,!0)}if("select"===(l=(o=a?br(a):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Kn;else if(Wn(o))if(Jn)g=ia;else{g=ra;var x=aa}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sa);switch(g&&(g=g(e,a))?Gn(i,g,n,r):(x&&x(e,o,a),"focusout"===e&&(x=o._wrapperState)&&x.controlled&&"number"===o.type&&ee(o,"number",o.value)),x=a?br(a):window,e){case"focusin":(Wn(x)||"true"===x.contentEditable)&&(ga=x,xa=a,ya=null);break;case"focusout":ya=xa=ga=null;break;case"mousedown":va=!0;break;case"contextmenu":case"mouseup":case"dragend":va=!1,ba(i,n,r);break;case"selectionchange":if(fa)break;case"keydown":case"keyup":ba(i,n,r)}var y;if(Dn)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Un?Vn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(On&&"ko"!==n.locale&&(Un||"onCompositionStart"!==v?"onCompositionEnd"===v&&Un&&(y=en()):(Qt="value"in(Jt=r)?Jt.value:Jt.textContent,Un=!0)),0<(x=qa(a,v)).length&&(v=new bn(v,e,null,n,r),i.push({event:v,listeners:x}),y?v.data=y:null!==(y=Bn(n))&&(v.data=y))),(y=_n?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(zn=!0,Fn);case"textInput":return(e=t.data)===Fn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Qt=Jt=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return On&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(a=qa(a,"onBeforeInput")).length&&(r=new bn("onBeforeInput","beforeinput",null,n,r),i.push({event:r,listeners:a}),r.data=y))}Fa(i,t)})}function Ga(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qa(e,t){for(var n=t+"Capture",a=[];null!==e;){var r=e,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=Le(e,n))&&a.unshift(Ga(e,s,r)),null!=(s=Le(e,t))&&a.push(Ga(e,s,r))),e=e.return}return a}function Ya(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xa(e,t,n,a,r){for(var s=t._reactName,i=[];null!==n&&n!==a;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===a)break;5===o.tag&&null!==c&&(o=c,r?null!=(l=Le(n,s))&&i.unshift(Ga(n,l,o)):r||null!=(l=Le(n,s))&&i.push(Ga(n,l,o))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var $a=/\r\n?/g,Ka=/\u0000|\uFFFD/g;function Ja(e){return("string"===typeof e?e:""+e).replace($a,"\n").replace(Ka,"")}function Qa(e,t,n){if(t=Ja(t),Ja(e)!==t&&n)throw Error(s(425))}function Za(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ar="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,ir="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(e){return sr.resolve(null).then(e).catch(or)}:ar;function or(e){setTimeout(function(){throw e})}function lr(e,t){var n=t,a=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===a)return e.removeChild(r),void Ut(t);a--}else"$"!==n&&"$?"!==n&&"$!"!==n||a++;n=r}while(n);Ut(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function dr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ur=Math.random().toString(36).slice(2),mr="__reactFiber$"+ur,hr="__reactProps$"+ur,pr="__reactContainer$"+ur,fr="__reactEvents$"+ur,gr="__reactListeners$"+ur,xr="__reactHandles$"+ur;function yr(e){var t=e[mr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pr]||n[mr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=dr(e);null!==e;){if(n=e[mr])return n;e=dr(e)}return t}n=(e=n).parentNode}return null}function vr(e){return!(e=e[mr]||e[pr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function br(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wr(e){return e[hr]||null}var jr=[],Nr=-1;function kr(e){return{current:e}}function Sr(e){0>Nr||(e.current=jr[Nr],jr[Nr]=null,Nr--)}function Cr(e,t){Nr++,jr[Nr]=e.current,e.current=t}var Er={},Pr=kr(Er),Ar=kr(!1),Tr=Er;function Mr(e,t){var n=e.type.contextTypes;if(!n)return Er;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=t[r];return a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Lr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Rr(){Sr(Ar),Sr(Pr)}function Dr(e,t,n){if(Pr.current!==Er)throw Error(s(168));Cr(Pr,t),Cr(Ar,n)}function Ir(e,t,n){var a=e.stateNode;if(t=t.childContextTypes,"function"!==typeof a.getChildContext)return n;for(var r in a=a.getChildContext())if(!(r in t))throw Error(s(108,H(e)||"Unknown",r));return O({},n,a)}function _r(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Er,Tr=Pr.current,Cr(Pr,e),Cr(Ar,Ar.current),!0}function Or(e,t,n){var a=e.stateNode;if(!a)throw Error(s(169));n?(e=Ir(e,t,Tr),a.__reactInternalMemoizedMergedChildContext=e,Sr(Ar),Sr(Pr),Cr(Pr,e)):Sr(Ar),Cr(Ar,n)}var Fr=null,zr=!1,Vr=!1;function Br(e){null===Fr?Fr=[e]:Fr.push(e)}function Ur(){if(!Vr&&null!==Fr){Vr=!0;var e=0,t=vt;try{var n=Fr;for(vt=1;e<n.length;e++){var a=n[e];do{a=a(!0)}while(null!==a)}Fr=null,zr=!1}catch(r){throw null!==Fr&&(Fr=Fr.slice(e+1)),Ye(Ze,Ur),r}finally{vt=t,Vr=!1}}return null}var Hr=[],Wr=0,Gr=null,qr=0,Yr=[],Xr=0,$r=null,Kr=1,Jr="";function Qr(e,t){Hr[Wr++]=qr,Hr[Wr++]=Gr,Gr=e,qr=t}function Zr(e,t,n){Yr[Xr++]=Kr,Yr[Xr++]=Jr,Yr[Xr++]=$r,$r=e;var a=Kr;e=Jr;var r=32-it(a)-1;a&=~(1<<r),n+=1;var s=32-it(t)+r;if(30<s){var i=r-r%5;s=(a&(1<<i)-1).toString(32),a>>=i,r-=i,Kr=1<<32-it(t)+r|n<<r|a,Jr=s+e}else Kr=1<<s|n<<r|a,Jr=e}function es(e){null!==e.return&&(Qr(e,1),Zr(e,1,0))}function ts(e){for(;e===Gr;)Gr=Hr[--Wr],Hr[Wr]=null,qr=Hr[--Wr],Hr[Wr]=null;for(;e===$r;)$r=Yr[--Xr],Yr[Xr]=null,Jr=Yr[--Xr],Yr[Xr]=null,Kr=Yr[--Xr],Yr[Xr]=null}var ns=null,as=null,rs=!1,ss=null;function is(e,t){var n=Mc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,as=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,as=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$r?{id:Kr,overflow:Jr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Mc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,as=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(rs){var t=as;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=cr(n.nextSibling);var a=ns;t&&os(e,t)?is(a,n):(e.flags=-4097&e.flags|2,rs=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,rs=!1,ns=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function us(e){if(e!==ns)return!1;if(!rs)return ds(e),rs=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=as)){if(ls(e))throw ms(),Error(s(418));for(;t;)is(e,t),t=cr(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){as=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}as=null}}else as=ns?cr(e.stateNode.nextSibling):null;return!0}function ms(){for(var e=as;e;)e=cr(e.nextSibling)}function hs(){as=ns=null,rs=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var fs=b.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var a=n.stateNode}if(!a)throw Error(s(147,e));var r=a,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function xs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function vs(e){function t(t,n){if(e){var a=t.deletions;null===a?(t.deletions=[n],t.flags|=16):a.push(n)}}function n(n,a){if(!e)return null;for(;null!==a;)t(n,a),a=a.sibling;return null}function a(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function i(t,n,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<n?(t.flags|=2,n):a:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,a){return null===t||6!==t.tag?((t=Oc(n,e.mode,a)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,a){var s=n.type;return s===N?u(e,t,n.props.children,a,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===L&&ys(s)===t.type)?((a=r(t,n.props)).ref=gs(e,t,n),a.return=e,a):((a=Dc(n.type,n.key,n.props,null,e.mode,a)).ref=gs(e,t,n),a.return=e,a)}function d(e,t,n,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,a)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function u(e,t,n,a,s){return null===t||7!==t.tag?((t=Ic(n,e.mode,a,s)).return=e,t):((t=r(t,n)).return=e,t)}function m(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Oc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case j:return(t=Fc(t,e.mode,n)).return=e,t;case L:return m(e,(0,t._init)(t._payload),n)}if(te(t)||I(t))return(t=Ic(t,e.mode,n,null)).return=e,t;xs(e,t)}return null}function h(e,t,n,a){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===r?c(e,t,n,a):null;case j:return n.key===r?d(e,t,n,a):null;case L:return h(e,t,(r=n._init)(n._payload),a)}if(te(n)||I(n))return null!==r?null:u(e,t,n,a,null);xs(e,n)}return null}function p(e,t,n,a,r){if("string"===typeof a&&""!==a||"number"===typeof a)return l(t,e=e.get(n)||null,""+a,r);if("object"===typeof a&&null!==a){switch(a.$$typeof){case w:return c(t,e=e.get(null===a.key?n:a.key)||null,a,r);case j:return d(t,e=e.get(null===a.key?n:a.key)||null,a,r);case L:return p(e,t,n,(0,a._init)(a._payload),r)}if(te(a)||I(a))return u(t,e=e.get(n)||null,a,r,null);xs(t,a)}return null}function f(r,s,o,l){for(var c=null,d=null,u=s,f=s=0,g=null;null!==u&&f<o.length;f++){u.index>f?(g=u,u=null):g=u.sibling;var x=h(r,u,o[f],l);if(null===x){null===u&&(u=g);break}e&&u&&null===x.alternate&&t(r,u),s=i(x,s,f),null===d?c=x:d.sibling=x,d=x,u=g}if(f===o.length)return n(r,u),rs&&Qr(r,f),c;if(null===u){for(;f<o.length;f++)null!==(u=m(r,o[f],l))&&(s=i(u,s,f),null===d?c=u:d.sibling=u,d=u);return rs&&Qr(r,f),c}for(u=a(r,u);f<o.length;f++)null!==(g=p(u,r,f,o[f],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?f:g.key),s=i(g,s,f),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach(function(e){return t(r,e)}),rs&&Qr(r,f),c}function g(r,o,l,c){var d=I(l);if("function"!==typeof d)throw Error(s(150));if(null==(l=d.call(l)))throw Error(s(151));for(var u=d=null,f=o,g=o=0,x=null,y=l.next();null!==f&&!y.done;g++,y=l.next()){f.index>g?(x=f,f=null):x=f.sibling;var v=h(r,f,y.value,c);if(null===v){null===f&&(f=x);break}e&&f&&null===v.alternate&&t(r,f),o=i(v,o,g),null===u?d=v:u.sibling=v,u=v,f=x}if(y.done)return n(r,f),rs&&Qr(r,g),d;if(null===f){for(;!y.done;g++,y=l.next())null!==(y=m(r,y.value,c))&&(o=i(y,o,g),null===u?d=y:u.sibling=y,u=y);return rs&&Qr(r,g),d}for(f=a(r,f);!y.done;g++,y=l.next())null!==(y=p(f,r,g,y.value,c))&&(e&&null!==y.alternate&&f.delete(null===y.key?g:y.key),o=i(y,o,g),null===u?d=y:u.sibling=y,u=y);return e&&f.forEach(function(e){return t(r,e)}),rs&&Qr(r,g),d}return function e(a,s,i,l){if("object"===typeof i&&null!==i&&i.type===N&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case w:e:{for(var c=i.key,d=s;null!==d;){if(d.key===c){if((c=i.type)===N){if(7===d.tag){n(a,d.sibling),(s=r(d,i.props.children)).return=a,a=s;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===L&&ys(c)===d.type){n(a,d.sibling),(s=r(d,i.props)).ref=gs(a,d,i),s.return=a,a=s;break e}n(a,d);break}t(a,d),d=d.sibling}i.type===N?((s=Ic(i.props.children,a.mode,l,i.key)).return=a,a=s):((l=Dc(i.type,i.key,i.props,null,a.mode,l)).ref=gs(a,s,i),l.return=a,a=l)}return o(a);case j:e:{for(d=i.key;null!==s;){if(s.key===d){if(4===s.tag&&s.stateNode.containerInfo===i.containerInfo&&s.stateNode.implementation===i.implementation){n(a,s.sibling),(s=r(s,i.children||[])).return=a,a=s;break e}n(a,s);break}t(a,s),s=s.sibling}(s=Fc(i,a.mode,l)).return=a,a=s}return o(a);case L:return e(a,s,(d=i._init)(i._payload),l)}if(te(i))return f(a,s,i,l);if(I(i))return g(a,s,i,l);xs(a,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==s&&6===s.tag?(n(a,s.sibling),(s=r(s,i)).return=a,a=s):(n(a,s),(s=Oc(i,a.mode,l)).return=a,a=s),o(a)):n(a,s)}}var bs=vs(!0),ws=vs(!1),js=kr(null),Ns=null,ks=null,Ss=null;function Cs(){Ss=ks=Ns=null}function Es(e){var t=js.current;Sr(js),e._currentValue=t}function Ps(e,t,n){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function As(e,t){Ns=e,Ss=ks=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vo=!0),e.firstContext=null)}function Ts(e){var t=e._currentValue;if(Ss!==e)if(e={context:e,memoizedValue:t,next:null},null===ks){if(null===Ns)throw Error(s(308));ks=e,Ns.dependencies={lanes:0,firstContext:e}}else ks=ks.next=e;return t}var Ms=null;function Ls(e){null===Ms?Ms=[e]:Ms.push(e)}function Rs(e,t,n,a){var r=t.interleaved;return null===r?(n.next=n,Ls(t)):(n.next=r.next,r.next=n),t.interleaved=n,Ds(e,a)}function Ds(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Is=!1;function _s(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Os(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zs(e,t,n){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,0!==(2&Pl)){var r=a.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),a.pending=t,Ds(e,n)}return null===(r=a.interleaved)?(t.next=t,Ls(a)):(t.next=r.next,r.next=t),a.interleaved=t,Ds(e,n)}function Vs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Bs(e,t){var n=e.updateQueue,a=e.alternate;if(null!==a&&n===(a=a.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=i:s=s.next=i,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:a.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:a.shared,effects:a.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Us(e,t,n,a){var r=e.updateQueue;Is=!1;var s=r.firstBaseUpdate,i=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?s=c:i.next=c,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==s){var u=r.baseState;for(i=0,d=c=l=null,o=s;;){var m=o.lane,h=o.eventTime;if((a&m)===m){null!==d&&(d=d.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,f=o;switch(m=t,h=n,f.tag){case 1:if("function"===typeof(p=f.payload)){u=p.call(h,u,m);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(m="function"===typeof(p=f.payload)?p.call(h,u,m):p)||void 0===m)break e;u=O({},u,m);break e;case 2:Is=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(m=r.effects)?r.effects=[o]:m.push(o))}else h={eventTime:h,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=h,l=u):d=d.next=h,i|=m;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(m=o).next,m.next=null,r.lastBaseUpdate=m,r.shared.pending=null}}if(null===d&&(l=u),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=d,null!==(t=r.shared.interleaved)){r=t;do{i|=r.lane,r=r.next}while(r!==t)}else null===s&&(r.shared.lanes=0);_l|=i,e.lanes=i,e.memoizedState=u}}function Hs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var a=e[t],r=a.callback;if(null!==r){if(a.callback=null,a=n,"function"!==typeof r)throw Error(s(191,r));r.call(a)}}}var Ws={},Gs=kr(Ws),qs=kr(Ws),Ys=kr(Ws);function Xs(e){if(e===Ws)throw Error(s(174));return e}function $s(e,t){switch(Cr(Ys,t),Cr(qs,e),Cr(Gs,Ws),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Sr(Gs),Cr(Gs,t)}function Ks(){Sr(Gs),Sr(qs),Sr(Ys)}function Js(e){Xs(Ys.current);var t=Xs(Gs.current),n=le(t,e.type);t!==n&&(Cr(qs,e),Cr(Gs,n))}function Qs(e){qs.current===e&&(Sr(Gs),Sr(qs))}var Zs=kr(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ni(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ai=b.ReactCurrentDispatcher,ri=b.ReactCurrentBatchConfig,si=0,ii=null,oi=null,li=null,ci=!1,di=!1,ui=0,mi=0;function hi(){throw Error(s(321))}function pi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!oa(e[n],t[n]))return!1;return!0}function fi(e,t,n,a,r,i){if(si=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ai.current=null===e||null===e.memoizedState?Qi:Zi,e=n(a,r),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(s(301));i+=1,li=oi=null,t.updateQueue=null,ai.current=eo,e=n(a,r)}while(di)}if(ai.current=Ji,t=null!==oi&&null!==oi.next,si=0,li=oi=ii=null,ci=!1,t)throw Error(s(300));return e}function gi(){var e=0!==ui;return ui=0,e}function xi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function yi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function vi(e,t){return"function"===typeof t?t(e):t}function bi(e){var t=yi(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var a=oi,r=a.baseQueue,i=n.pending;if(null!==i){if(null!==r){var o=r.next;r.next=i.next,i.next=o}a.baseQueue=r=i,n.pending=null}if(null!==r){i=r.next,a=a.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((si&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:e(a,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=m,o=a):c=c.next=m,ii.lanes|=u,_l|=u}d=d.next}while(null!==d&&d!==i);null===c?o=a:c.next=l,oa(a,t.memoizedState)||(vo=!0),t.memoizedState=a,t.baseState=o,t.baseQueue=c,n.lastRenderedState=a}if(null!==(e=n.interleaved)){r=e;do{i=r.lane,ii.lanes|=i,_l|=i,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wi(e){var t=yi(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var a=n.dispatch,r=n.pending,i=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{i=e(i,o.action),o=o.next}while(o!==r);oa(i,t.memoizedState)||(vo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,a]}function ji(){}function Ni(e,t){var n=ii,a=yi(),r=t(),i=!oa(a.memoizedState,r);if(i&&(a.memoizedState=r,vo=!0),a=a.queue,Ii(Ci.bind(null,n,a,e),[e]),a.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(n.flags|=2048,Ti(9,Si.bind(null,n,a,r,t),void 0,null),null===Al)throw Error(s(349));0!==(30&si)||ki(n,t,r)}return r}function ki(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Si(e,t,n,a){t.value=n,t.getSnapshot=a,Ei(t)&&Pi(e)}function Ci(e,t,n){return n(function(){Ei(t)&&Pi(e)})}function Ei(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oa(e,n)}catch(a){return!0}}function Pi(e){var t=Ds(e,1);null!==t&&nc(t,e,1,-1)}function Ai(e){var t=xi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:e},t.queue=e,e=e.dispatch=Yi.bind(null,ii,e),[t.memoizedState,e]}function Ti(e,t,n,a){return e={tag:e,create:t,destroy:n,deps:a,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Mi(){return yi().memoizedState}function Li(e,t,n,a){var r=xi();ii.flags|=e,r.memoizedState=Ti(1|t,n,void 0,void 0===a?null:a)}function Ri(e,t,n,a){var r=yi();a=void 0===a?null:a;var s=void 0;if(null!==oi){var i=oi.memoizedState;if(s=i.destroy,null!==a&&pi(a,i.deps))return void(r.memoizedState=Ti(t,n,s,a))}ii.flags|=e,r.memoizedState=Ti(1|t,n,s,a)}function Di(e,t){return Li(8390656,8,e,t)}function Ii(e,t){return Ri(2048,8,e,t)}function _i(e,t){return Ri(4,2,e,t)}function Oi(e,t){return Ri(4,4,e,t)}function Fi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ri(4,4,Fi.bind(null,t,e),n)}function Vi(){}function Bi(e,t){var n=yi();t=void 0===t?null:t;var a=n.memoizedState;return null!==a&&null!==t&&pi(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Ui(e,t){var n=yi();t=void 0===t?null:t;var a=n.memoizedState;return null!==a&&null!==t&&pi(t,a[1])?a[0]:(e=e(),n.memoizedState=[e,t],e)}function Hi(e,t,n){return 0===(21&si)?(e.baseState&&(e.baseState=!1,vo=!0),e.memoizedState=n):(oa(n,t)||(n=ft(),ii.lanes|=n,_l|=n,e.baseState=!0),t)}function Wi(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var a=ri.transition;ri.transition={};try{e(!1),t()}finally{vt=n,ri.transition=a}}function Gi(){return yi().memoizedState}function qi(e,t,n){var a=tc(e);if(n={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null},Xi(e))$i(t,n);else if(null!==(n=Rs(e,t,n,a))){nc(n,e,a,ec()),Ki(n,t,a)}}function Yi(e,t,n){var a=tc(e),r={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xi(e))$i(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=s(i,n);if(r.hasEagerState=!0,r.eagerState=o,oa(o,i)){var l=t.interleaved;return null===l?(r.next=r,Ls(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=Rs(e,t,r,a))&&(nc(n,e,a,r=ec()),Ki(n,t,a))}}function Xi(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function $i(e,t){di=ci=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ki(e,t,n){if(0!==(4194240&n)){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Ji={readContext:Ts,useCallback:hi,useContext:hi,useEffect:hi,useImperativeHandle:hi,useInsertionEffect:hi,useLayoutEffect:hi,useMemo:hi,useReducer:hi,useRef:hi,useState:hi,useDebugValue:hi,useDeferredValue:hi,useTransition:hi,useMutableSource:hi,useSyncExternalStore:hi,useId:hi,unstable_isNewReconciler:!1},Qi={readContext:Ts,useCallback:function(e,t){return xi().memoizedState=[e,void 0===t?null:t],e},useContext:Ts,useEffect:Di,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Li(4194308,4,Fi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Li(4194308,4,e,t)},useInsertionEffect:function(e,t){return Li(4,2,e,t)},useMemo:function(e,t){var n=xi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var a=xi();return t=void 0!==n?n(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=qi.bind(null,ii,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},xi().memoizedState=e},useState:Ai,useDebugValue:Vi,useDeferredValue:function(e){return xi().memoizedState=e},useTransition:function(){var e=Ai(!1),t=e[0];return e=Wi.bind(null,e[1]),xi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var a=ii,r=xi();if(rs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Al)throw Error(s(349));0!==(30&si)||ki(a,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,Di(Ci.bind(null,a,i,e),[e]),a.flags|=2048,Ti(9,Si.bind(null,a,i,n,t),void 0,null),n},useId:function(){var e=xi(),t=Al.identifierPrefix;if(rs){var n=Jr;t=":"+t+"R"+(n=(Kr&~(1<<32-it(Kr)-1)).toString(32)+n),0<(n=ui++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=mi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zi={readContext:Ts,useCallback:Bi,useContext:Ts,useEffect:Ii,useImperativeHandle:zi,useInsertionEffect:_i,useLayoutEffect:Oi,useMemo:Ui,useReducer:bi,useRef:Mi,useState:function(){return bi(vi)},useDebugValue:Vi,useDeferredValue:function(e){return Hi(yi(),oi.memoizedState,e)},useTransition:function(){return[bi(vi)[0],yi().memoizedState]},useMutableSource:ji,useSyncExternalStore:Ni,useId:Gi,unstable_isNewReconciler:!1},eo={readContext:Ts,useCallback:Bi,useContext:Ts,useEffect:Ii,useImperativeHandle:zi,useInsertionEffect:_i,useLayoutEffect:Oi,useMemo:Ui,useReducer:wi,useRef:Mi,useState:function(){return wi(vi)},useDebugValue:Vi,useDeferredValue:function(e){var t=yi();return null===oi?t.memoizedState=e:Hi(t,oi.memoizedState,e)},useTransition:function(){return[wi(vi)[0],yi().memoizedState]},useMutableSource:ji,useSyncExternalStore:Ni,useId:Gi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=O({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,a){n=null===(n=n(a,t=e.memoizedState))||void 0===n?t:O({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ao={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var a=ec(),r=tc(e),s=Fs(a,r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,r))&&(nc(t,e,r,a),Vs(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=ec(),r=tc(e),s=Fs(a,r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,r))&&(nc(t,e,r,a),Vs(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),a=tc(e),r=Fs(n,a);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=zs(e,r,a))&&(nc(t,e,a,n),Vs(t,e,a))}};function ro(e,t,n,a,r,s,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!la(n,a)||!la(r,s))}function so(e,t,n){var a=!1,r=Er,s=t.contextType;return"object"===typeof s&&null!==s?s=Ts(s):(r=Lr(t)?Tr:Pr.current,s=(a=null!==(a=t.contextTypes)&&void 0!==a)?Mr(e,r):Er),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ao,e.stateNode=t,t._reactInternals=e,a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function io(e,t,n,a){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,a),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&ao.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,a){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},_s(e);var s=t.contextType;"object"===typeof s&&null!==s?r.context=Ts(s):(s=Lr(t)?Tr:Pr.current,r.context=Mr(e,s)),r.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&ao.enqueueReplaceState(r,r.state,null),Us(e,n,r,a),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",a=t;do{n+=B(a),a=a.return}while(a);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:r,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var mo="function"===typeof WeakMap?WeakMap:Map;function ho(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var a=t.value;return n.callback=function(){Wl||(Wl=!0,Gl=a),uo(0,t)},n}function po(e,t,n){(n=Fs(-1,n)).tag=3;var a=e.type.getDerivedStateFromError;if("function"===typeof a){var r=t.value;n.payload=function(){return a(r)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof a&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fo(e,t,n){var a=e.pingCache;if(null===a){a=e.pingCache=new mo;var r=new Set;a.set(t,r)}else void 0===(r=a.get(t))&&(r=new Set,a.set(t,r));r.has(n)||(r.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function xo(e,t,n,a,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,zs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var yo=b.ReactCurrentOwner,vo=!1;function bo(e,t,n,a){t.child=null===e?ws(t,null,n,a):bs(t,e.child,n,a)}function wo(e,t,n,a,r){n=n.render;var s=t.ref;return As(t,r),a=fi(e,t,n,a,s,r),n=gi(),null===e||vo?(rs&&n&&es(t),t.flags|=1,bo(e,t,a,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Wo(e,t,r))}function jo(e,t,n,a,r){if(null===e){var s=n.type;return"function"!==typeof s||Lc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,a,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,No(e,t,s,a,r))}if(s=e.child,0===(e.lanes&r)){var i=s.memoizedProps;if((n=null!==(n=n.compare)?n:la)(i,a)&&e.ref===t.ref)return Wo(e,t,r)}return t.flags|=1,(e=Rc(s,a)).ref=t.ref,e.return=t,t.child=e}function No(e,t,n,a,r){if(null!==e){var s=e.memoizedProps;if(la(s,a)&&e.ref===t.ref){if(vo=!1,t.pendingProps=a=s,0===(e.lanes&r))return t.lanes=e.lanes,Wo(e,t,r);0!==(131072&e.flags)&&(vo=!0)}}return Co(e,t,n,a,r)}function ko(e,t,n){var a=t.pendingProps,r=a.children,s=null!==e?e.memoizedState:null;if("hidden"===a.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cr(Rl,Ll),Ll|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cr(Rl,Ll),Ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=null!==s?s.baseLanes:n,Cr(Rl,Ll),Ll|=a}else null!==s?(a=s.baseLanes|n,t.memoizedState=null):a=n,Cr(Rl,Ll),Ll|=a;return bo(e,t,r,n),t.child}function So(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,n,a,r){var s=Lr(n)?Tr:Pr.current;return s=Mr(t,s),As(t,r),n=fi(e,t,n,a,s,r),a=gi(),null===e||vo?(rs&&a&&es(t),t.flags|=1,bo(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Wo(e,t,r))}function Eo(e,t,n,a,r){if(Lr(n)){var s=!0;_r(t)}else s=!1;if(As(t,r),null===t.stateNode)Ho(e,t),so(t,n,a),oo(t,n,a,r),a=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ts(c):c=Mr(t,c=Lr(n)?Tr:Pr.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==a||l!==c)&&io(t,i,a,c),Is=!1;var m=t.memoizedState;i.state=m,Us(t,a,i,r),l=t.memoizedState,o!==a||m!==l||Ar.current||Is?("function"===typeof d&&(no(t,n,d,a),l=t.memoizedState),(o=Is||ro(t,n,o,a,m,l,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=l),i.props=a,i.state=l,i.context=c,a=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),a=!1)}else{i=t.stateNode,Os(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,u=t.pendingProps,m=i.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ts(l):l=Mr(t,l=Lr(n)?Tr:Pr.current);var h=n.getDerivedStateFromProps;(d="function"===typeof h||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==u||m!==l)&&io(t,i,a,l),Is=!1,m=t.memoizedState,i.state=m,Us(t,a,i,r);var p=t.memoizedState;o!==u||m!==p||Ar.current||Is?("function"===typeof h&&(no(t,n,h,a),p=t.memoizedState),(c=Is||ro(t,n,c,a,m,p,l)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(a,p,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(a,p,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=p),i.props=a,i.state=p,i.context=l,a=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),a=!1)}return Po(e,t,n,a,s,r)}function Po(e,t,n,a,r,s){So(e,t);var i=0!==(128&t.flags);if(!a&&!i)return r&&Or(t,n,!1),Wo(e,t,s);a=t.stateNode,yo.current=t;var o=i&&"function"!==typeof n.getDerivedStateFromError?null:a.render();return t.flags|=1,null!==e&&i?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,o,s)):bo(e,t,o,s),t.memoizedState=a.state,r&&Or(t,n,!0),t.child}function Ao(e){var t=e.stateNode;t.pendingContext?Dr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Dr(0,t.context,!1),$s(e,t.containerInfo)}function To(e,t,n,a,r){return hs(),ps(r),t.flags|=256,bo(e,t,n,a),t.child}var Mo,Lo,Ro,Do,Io={dehydrated:null,treeContext:null,retryLane:0};function _o(e){return{baseLanes:e,cachePool:null,transitions:null}}function Oo(e,t,n){var a,r=t.pendingProps,i=Zs.current,o=!1,l=0!==(128&t.flags);if((a=l)||(a=(null===e||null!==e.memoizedState)&&0!==(2&i)),a?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Cr(Zs,1&i),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=_c(l,r,0,null),e=Ic(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=_o(n),t.memoizedState=Io,e):Fo(t,l));if(null!==(i=e.memoizedState)&&null!==(a=i.dehydrated))return function(e,t,n,a,r,i,o){if(n)return 256&t.flags?(t.flags&=-257,zo(e,t,o,a=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=a.fallback,r=t.mode,a=_c({mode:"visible",children:a.children},r,0,null),(i=Ic(i,r,o,null)).flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,0!==(1&t.mode)&&bs(t,e.child,null,o),t.child.memoizedState=_o(o),t.memoizedState=Io,i);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===r.data){if(a=r.nextSibling&&r.nextSibling.dataset)var l=a.dgst;return a=l,zo(e,t,o,a=co(i=Error(s(419)),a,void 0))}if(l=0!==(o&e.childLanes),vo||l){if(null!==(a=Al)){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(a.suspendedLanes|o))?0:r)&&r!==i.retryLane&&(i.retryLane=r,Ds(e,r),nc(a,e,r,-1))}return fc(),zo(e,t,o,a=co(Error(s(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),r._reactRetry=t,null):(e=i.treeContext,as=cr(r.nextSibling),ns=t,rs=!0,ss=null,null!==e&&(Yr[Xr++]=Kr,Yr[Xr++]=Jr,Yr[Xr++]=$r,Kr=e.id,Jr=e.overflow,$r=t),t=Fo(t,a.children),t.flags|=4096,t)}(e,t,l,r,a,i,n);if(o){o=r.fallback,l=t.mode,a=(i=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==i?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Rc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==a?o=Rc(a,o):(o=Ic(o,l,n,null)).flags|=2,o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=null===(l=e.child.memoizedState)?_o(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Io,r}return e=(o=e.child).sibling,r=Rc(o,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Fo(e,t){return(t=_c({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,n,a){return null!==a&&ps(a),bs(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vo(e,t,n){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),Ps(e.return,t,n)}function Bo(e,t,n,a,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=a,s.tail=n,s.tailMode=r)}function Uo(e,t,n){var a=t.pendingProps,r=a.revealOrder,s=a.tail;if(bo(e,t,a.children,n),0!==(2&(a=Zs.current)))a=1&a|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vo(e,n,t);else if(19===e.tag)Vo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Cr(Zs,a),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ei(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Bo(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ei(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Bo(t,!0,n,null,s);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ho(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),_l|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Go(e,t){if(!rs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;null!==n;)null!==n.alternate&&(a=n),n=n.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,a=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,a|=14680064&r.subtreeFlags,a|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,a|=r.subtreeFlags,a|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function Yo(e,t,n){var a=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qo(t),null;case 1:case 17:return Lr(t.type)&&Rr(),qo(t),null;case 3:return a=t.stateNode,Ks(),Sr(Ar),Sr(Pr),ni(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(us(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ic(ss),ss=null))),Lo(e,t),qo(t),null;case 5:Qs(t);var r=Xs(Ys.current);if(n=t.type,null!==e&&null!=t.stateNode)Ro(e,t,n,a,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(null===t.stateNode)throw Error(s(166));return qo(t),null}if(e=Xs(Gs.current),us(t)){a=t.stateNode,n=t.type;var i=t.memoizedProps;switch(a[mr]=t,a[hr]=i,e=0!==(1&t.mode),n){case"dialog":za("cancel",a),za("close",a);break;case"iframe":case"object":case"embed":za("load",a);break;case"video":case"audio":for(r=0;r<Ia.length;r++)za(Ia[r],a);break;case"source":za("error",a);break;case"img":case"image":case"link":za("error",a),za("load",a);break;case"details":za("toggle",a);break;case"input":K(a,i),za("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},za("invalid",a);break;case"textarea":re(a,i),za("invalid",a)}for(var l in ye(n,i),r=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?a.textContent!==c&&(!0!==i.suppressHydrationWarning&&Qa(a.textContent,c,e),r=["children",c]):"number"===typeof c&&a.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Qa(a.textContent,c,e),r=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&za("scroll",a)}switch(n){case"input":q(a),Z(a,i,!0);break;case"textarea":q(a),ie(a);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(a.onclick=Za)}a=r,t.updateQueue=a,null!==a&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof a.is?e=l.createElement(n,{is:a.is}):(e=l.createElement(n),"select"===n&&(l=e,a.multiple?l.multiple=!0:a.size&&(l.size=a.size))):e=l.createElementNS(e,n),e[mr]=t,e[hr]=a,Mo(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,a),n){case"dialog":za("cancel",e),za("close",e),r=a;break;case"iframe":case"object":case"embed":za("load",e),r=a;break;case"video":case"audio":for(r=0;r<Ia.length;r++)za(Ia[r],e);r=a;break;case"source":za("error",e),r=a;break;case"img":case"image":case"link":za("error",e),za("load",e),r=a;break;case"details":za("toggle",e),r=a;break;case"input":K(e,a),r=$(e,a),za("invalid",e);break;case"option":default:r=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},r=O({},a,{value:void 0}),za("invalid",e);break;case"textarea":re(e,a),r=ae(e,a),za("invalid",e)}for(i in ye(n,r),c=r)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?ge(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==n||""!==d)&&me(e,d):"number"===typeof d&&me(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=d&&"onScroll"===i&&za("scroll",e):null!=d&&v(e,i,d,l))}switch(n){case"input":q(e),Z(e,a,!1);break;case"textarea":q(e),ie(e);break;case"option":null!=a.value&&e.setAttribute("value",""+W(a.value));break;case"select":e.multiple=!!a.multiple,null!=(i=a.value)?ne(e,!!a.multiple,i,!1):null!=a.defaultValue&&ne(e,!!a.multiple,a.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Za)}switch(n){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qo(t),null;case 6:if(e&&null!=t.stateNode)Do(e,t,e.memoizedProps,a);else{if("string"!==typeof a&&null===t.stateNode)throw Error(s(166));if(n=Xs(Ys.current),Xs(Gs.current),us(t)){if(a=t.stateNode,n=t.memoizedProps,a[mr]=t,(i=a.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Qa(a.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qa(a.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(a=(9===n.nodeType?n:n.ownerDocument).createTextNode(a))[mr]=t,t.stateNode=a}return qo(t),null;case 13:if(Sr(Zs),a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(rs&&null!==as&&0!==(1&t.mode)&&0===(128&t.flags))ms(),hs(),t.flags|=98560,i=!1;else if(i=us(t),null!==a&&null!==a.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[mr]=t}else hs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qo(t),i=!1}else null!==ss&&(ic(ss),ss=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((a=null!==a)!==(null!==e&&null!==e.memoizedState)&&a&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Dl&&(Dl=3):fc())),null!==t.updateQueue&&(t.flags|=4),qo(t),null);case 4:return Ks(),Lo(e,t),null===e&&Ua(t.stateNode.containerInfo),qo(t),null;case 10:return Es(t.type._context),qo(t),null;case 19:if(Sr(Zs),null===(i=t.memoizedState))return qo(t),null;if(a=0!==(128&t.flags),null===(l=i.rendering))if(a)Go(i,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Go(i,!1),null!==(a=l.updateQueue)&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=n,n=t.child;null!==n;)e=a,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Cr(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==i.tail&&Je()>Ul&&(t.flags|=128,a=!0,Go(i,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=ei(l))){if(t.flags|=128,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Go(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!rs)return qo(t),null}else 2*Je()-i.renderingStartTime>Ul&&1073741824!==n&&(t.flags|=128,a=!0,Go(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Je(),t.sibling=null,n=Zs.current,Cr(Zs,a?1&n|2:1&n),t):(qo(t),null);case 22:case 23:return uc(),a=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==a&&(t.flags|=8192),a&&0!==(1&t.mode)?0!==(1073741824&Ll)&&(qo(t),6&t.subtreeFlags&&(t.flags|=8192)):qo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Xo(e,t){switch(ts(t),t.tag){case 1:return Lr(t.type)&&Rr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ks(),Sr(Ar),Sr(Pr),ni(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Qs(t),null;case 13:if(Sr(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));hs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Sr(Zs),null;case 4:return Ks(),null;case 10:return Es(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Mo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Lo=function(){},Ro=function(e,t,n,a){var r=e.memoizedProps;if(r!==a){e=t.stateNode,Xs(Gs.current);var s,i=null;switch(n){case"input":r=$(e,r),a=$(e,a),i=[];break;case"select":r=O({},r,{value:void 0}),a=O({},a,{value:void 0}),i=[];break;case"textarea":r=ae(e,r),a=ae(e,a),i=[];break;default:"function"!==typeof r.onClick&&"function"===typeof a.onClick&&(e.onclick=Za)}for(d in ye(n,a),n=null,r)if(!a.hasOwnProperty(d)&&r.hasOwnProperty(d)&&null!=r[d])if("style"===d){var l=r[d];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in a){var c=a[d];if(l=null!=r?r[d]:void 0,a.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(i||(i=[]),i.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&za("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Do=function(e,t,n,a){n!==a&&(t.flags|=4)};var $o=!1,Ko=!1,Jo="function"===typeof WeakSet?WeakSet:Set,Qo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(a){kc(e,t,a)}else n.current=null}function el(e,t,n){try{n()}catch(a){kc(e,t,a)}}var tl=!1;function nl(e,t,n){var a=t.updateQueue;if(null!==(a=null!==a?a.lastEffect:null)){var r=a=a.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,void 0!==s&&el(t,n,s)}r=r.next}while(r!==a)}}function al(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var a=n.create;n.destroy=a()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[mr],delete t[hr],delete t[fr],delete t[gr],delete t[xr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Za));else if(4!==a&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==a&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,ul=!1;function ml(e,t,n){for(n=n.child;null!==n;)hl(e,t,n),n=n.sibling}function hl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(rt,n)}catch(o){}switch(n.tag){case 5:Ko||Zo(n,t);case 6:var a=dl,r=ul;dl=null,ml(e,t,n),ul=r,null!==(dl=a)&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Ut(e)):lr(dl,n.stateNode));break;case 4:a=dl,r=ul,dl=n.stateNode.containerInfo,ul=!0,ml(e,t,n),dl=a,ul=r;break;case 0:case 11:case 14:case 15:if(!Ko&&(null!==(a=n.updateQueue)&&null!==(a=a.lastEffect))){r=a=a.next;do{var s=r,i=s.destroy;s=s.tag,void 0!==i&&(0!==(2&s)||0!==(4&s))&&el(n,t,i),r=r.next}while(r!==a)}ml(e,t,n);break;case 1:if(!Ko&&(Zo(n,t),"function"===typeof(a=n.stateNode).componentWillUnmount))try{a.props=n.memoizedProps,a.state=n.memoizedState,a.componentWillUnmount()}catch(o){kc(n,t,o)}ml(e,t,n);break;case 21:ml(e,t,n);break;case 22:1&n.mode?(Ko=(a=Ko)||null!==n.memoizedState,ml(e,t,n),Ko=a):ml(e,t,n);break;default:ml(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Jo),t.forEach(function(t){var a=Pc.bind(null,e,t);n.has(t)||(n.add(t),t.then(a,a))})}}function fl(e,t){var n=t.deletions;if(null!==n)for(var a=0;a<n.length;a++){var r=n[a];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(s(160));hl(i,o,r),dl=null,ul=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(d){kc(r,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),xl(e),4&a){try{nl(3,e,e.return),al(3,e)}catch(g){kc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){kc(e,e.return,g)}}break;case 1:fl(t,e),xl(e),512&a&&null!==n&&Zo(n,n.return);break;case 5:if(fl(t,e),xl(e),512&a&&null!==n&&Zo(n,n.return),32&e.flags){var r=e.stateNode;try{me(r,"")}catch(g){kc(e,e.return,g)}}if(4&a&&null!=(r=e.stateNode)){var i=e.memoizedProps,o=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&J(r,i),ve(l,o);var d=ve(l,i);for(o=0;o<c.length;o+=2){var u=c[o],m=c[o+1];"style"===u?ge(r,m):"dangerouslySetInnerHTML"===u?ue(r,m):"children"===u?me(r,m):v(r,u,m,d)}switch(l){case"input":Q(r,i);break;case"textarea":se(r,i);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?ne(r,!!i.multiple,p,!1):h!==!!i.multiple&&(null!=i.defaultValue?ne(r,!!i.multiple,i.defaultValue,!0):ne(r,!!i.multiple,i.multiple?[]:"",!1))}r[hr]=i}catch(g){kc(e,e.return,g)}}break;case 6:if(fl(t,e),xl(e),4&a){if(null===e.stateNode)throw Error(s(162));r=e.stateNode,i=e.memoizedProps;try{r.nodeValue=i}catch(g){kc(e,e.return,g)}}break;case 3:if(fl(t,e),xl(e),4&a&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(g){kc(e,e.return,g)}break;case 4:default:fl(t,e),xl(e);break;case 13:fl(t,e),xl(e),8192&(r=e.child).flags&&(i=null!==r.memoizedState,r.stateNode.isHidden=i,!i||null!==r.alternate&&null!==r.alternate.memoizedState||(Bl=Je())),4&a&&pl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Ko=(d=Ko)||u,fl(t,e),Ko=d):fl(t,e),xl(e),8192&a){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Qo=e,u=e.child;null!==u;){for(m=Qo=u;null!==Qo;){switch(p=(h=Qo).child,h.tag){case 0:case 11:case 14:case 15:nl(4,h,h.return);break;case 1:Zo(h,h.return);var f=h.stateNode;if("function"===typeof f.componentWillUnmount){a=h,n=h.return;try{t=a,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){kc(a,n,g)}}break;case 5:Zo(h,h.return);break;case 22:if(null!==h.memoizedState){wl(m);continue}}null!==p?(p.return=h,Qo=p):wl(m)}u=u.sibling}e:for(u=null,m=e;;){if(5===m.tag){if(null===u){u=m;try{r=m.stateNode,d?"function"===typeof(i=r.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=m.stateNode,o=void 0!==(c=m.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(g){kc(e,e.return,g)}}}else if(6===m.tag){if(null===u)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(g){kc(e,e.return,g)}}else if((22!==m.tag&&23!==m.tag||null===m.memoizedState||m===e)&&null!==m.child){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;null===m.sibling;){if(null===m.return||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:fl(t,e),xl(e),4&a&&pl(e);case 21:}}function xl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var a=n;break e}n=n.return}throw Error(s(160))}switch(a.tag){case 5:var r=a.stateNode;32&a.flags&&(me(r,""),a.flags&=-33),cl(e,ol(e),r);break;case 3:case 4:var i=a.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(s(161))}}catch(o){kc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Qo=e,vl(e,t,n)}function vl(e,t,n){for(var a=0!==(1&e.mode);null!==Qo;){var r=Qo,s=r.child;if(22===r.tag&&a){var i=null!==r.memoizedState||$o;if(!i){var o=r.alternate,l=null!==o&&null!==o.memoizedState||Ko;o=$o;var c=Ko;if($o=i,(Ko=l)&&!c)for(Qo=r;null!==Qo;)l=(i=Qo).child,22===i.tag&&null!==i.memoizedState?jl(r):null!==l?(l.return=i,Qo=l):jl(r);for(;null!==s;)Qo=s,vl(s,t,n),s=s.sibling;Qo=r,$o=o,Ko=c}bl(e)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,Qo=s):bl(e)}}function bl(e){for(;null!==Qo;){var t=Qo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ko||al(5,t);break;case 1:var a=t.stateNode;if(4&t.flags&&!Ko)if(null===n)a.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);a.componentDidUpdate(r,n.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Hs(t,i,a);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Hs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var m=u.dehydrated;null!==m&&Ut(m)}}}break;default:throw Error(s(163))}Ko||512&t.flags&&rl(t)}catch(h){kc(t,t.return,h)}}if(t===e){Qo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qo=n;break}Qo=t.return}}function wl(e){for(;null!==Qo;){var t=Qo;if(t===e){Qo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qo=n;break}Qo=t.return}}function jl(e){for(;null!==Qo;){var t=Qo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{al(4,t)}catch(l){kc(t,n,l)}break;case 1:var a=t.stateNode;if("function"===typeof a.componentDidMount){var r=t.return;try{a.componentDidMount()}catch(l){kc(t,r,l)}}var s=t.return;try{rl(t)}catch(l){kc(t,s,l)}break;case 5:var i=t.return;try{rl(t)}catch(l){kc(t,i,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Qo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Qo=o;break}Qo=t.return}}var Nl,kl=Math.ceil,Sl=b.ReactCurrentDispatcher,Cl=b.ReactCurrentOwner,El=b.ReactCurrentBatchConfig,Pl=0,Al=null,Tl=null,Ml=0,Ll=0,Rl=kr(0),Dl=0,Il=null,_l=0,Ol=0,Fl=0,zl=null,Vl=null,Bl=0,Ul=1/0,Hl=null,Wl=!1,Gl=null,ql=null,Yl=!1,Xl=null,$l=0,Kl=0,Jl=null,Ql=-1,Zl=0;function ec(){return 0!==(6&Pl)?Je():-1!==Ql?Ql:Ql=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Pl)&&0!==Ml?Ml&-Ml:null!==fs.transition?(0===Zl&&(Zl=ft()),Zl):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function nc(e,t,n,a){if(50<Kl)throw Kl=0,Jl=null,Error(s(185));xt(e,n,a),0!==(2&Pl)&&e===Al||(e===Al&&(0===(2&Pl)&&(Ol|=n),4===Dl&&oc(e,Ml)),ac(e,a),1===n&&0===Pl&&0===(1&t.mode)&&(Ul=Je()+500,zr&&Ur()))}function ac(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-it(s),o=1<<i,l=r[i];-1===l?0!==(o&n)&&0===(o&a)||(r[i]=ht(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var a=mt(e,e===Al?Ml:0);if(0===a)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){zr=!0,Br(e)}(lc.bind(null,e)):Br(lc.bind(null,e)),ir(function(){0===(6&Pl)&&Ur()}),n=null;else{switch(bt(a)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=at}n=Ac(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Ql=-1,Zl=0,0!==(6&Pl))throw Error(s(327));var n=e.callbackNode;if(jc()&&e.callbackNode!==n)return null;var a=mt(e,e===Al?Ml:0);if(0===a)return null;if(0!==(30&a)||0!==(a&e.expiredLanes)||t)t=gc(e,a);else{t=a;var r=Pl;Pl|=2;var i=pc();for(Al===e&&Ml===t||(Hl=null,Ul=Je()+500,mc(e,t));;)try{yc();break}catch(l){hc(e,l)}Cs(),Sl.current=i,Pl=r,null!==Tl?t=0:(Al=null,Ml=0,t=Dl)}if(0!==t){if(2===t&&(0!==(r=pt(e))&&(a=r,t=sc(e,r))),1===t)throw n=Il,mc(e,0),oc(e,a),ac(e,Je()),n;if(6===t)oc(e,a);else{if(r=e.current.alternate,0===(30&a)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var a=0;a<n.length;a++){var r=n[a],s=r.getSnapshot;r=r.value;try{if(!oa(s(),r))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=gc(e,a))&&(0!==(i=pt(e))&&(a=i,t=sc(e,i))),1===t))throw n=Il,mc(e,0),oc(e,a),ac(e,Je()),n;switch(e.finishedWork=r,e.finishedLanes=a,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,Vl,Hl);break;case 3:if(oc(e,a),(130023424&a)===a&&10<(t=Bl+500-Je())){if(0!==mt(e,0))break;if(((r=e.suspendedLanes)&a)!==a){ec(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ar(wc.bind(null,e,Vl,Hl),t);break}wc(e,Vl,Hl);break;case 4:if(oc(e,a),(4194240&a)===a)break;for(t=e.eventTimes,r=-1;0<a;){var o=31-it(a);i=1<<o,(o=t[o])>r&&(r=o),a&=~i}if(a=r,10<(a=(120>(a=Je()-a)?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*kl(a/1960))-a)){e.timeoutHandle=ar(wc.bind(null,e,Vl,Hl),a);break}wc(e,Vl,Hl);break;default:throw Error(s(329))}}}return ac(e,Je()),e.callbackNode===n?rc.bind(null,e):null}function sc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(mc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Vl,Vl=n,null!==t&&ic(t)),e}function ic(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function oc(e,t){for(t&=~Fl,t&=~Ol,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),a=1<<n;e[n]=-1,t&=~a}}function lc(e){if(0!==(6&Pl))throw Error(s(327));jc();var t=mt(e,0);if(0===(1&t))return ac(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var a=pt(e);0!==a&&(t=a,n=sc(e,a))}if(1===n)throw n=Il,mc(e,0),oc(e,t),ac(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Vl,Hl),ac(e,Je()),null}function cc(e,t){var n=Pl;Pl|=1;try{return e(t)}finally{0===(Pl=n)&&(Ul=Je()+500,zr&&Ur())}}function dc(e){null!==Xl&&0===Xl.tag&&0===(6&Pl)&&jc();var t=Pl;Pl|=1;var n=El.transition,a=vt;try{if(El.transition=null,vt=1,e)return e()}finally{vt=a,El.transition=n,0===(6&(Pl=t))&&Ur()}}function uc(){Ll=Rl.current,Sr(Rl)}function mc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Tl)for(n=Tl.return;null!==n;){var a=n;switch(ts(a),a.tag){case 1:null!==(a=a.type.childContextTypes)&&void 0!==a&&Rr();break;case 3:Ks(),Sr(Ar),Sr(Pr),ni();break;case 5:Qs(a);break;case 4:Ks();break;case 13:case 19:Sr(Zs);break;case 10:Es(a.type._context);break;case 22:case 23:uc()}n=n.return}if(Al=e,Tl=e=Rc(e.current,null),Ml=Ll=t,Dl=0,Il=null,Fl=Ol=_l=0,Vl=zl=null,null!==Ms){for(t=0;t<Ms.length;t++)if(null!==(a=(n=Ms[t]).interleaved)){n.interleaved=null;var r=a.next,s=n.pending;if(null!==s){var i=s.next;s.next=r,a.next=i}n.pending=a}Ms=null}return e}function hc(e,t){for(;;){var n=Tl;try{if(Cs(),ai.current=Ji,ci){for(var a=ii.memoizedState;null!==a;){var r=a.queue;null!==r&&(r.pending=null),a=a.next}ci=!1}if(si=0,li=oi=ii=null,di=!1,ui=0,Cl.current=null,null===n||null===n.return){Dl=1,Il=t,Tl=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Ml,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,m=u.tag;if(0===(1&u.mode)&&(0===m||11===m||15===m)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,xo(p,o,l,0,t),1&p.mode&&fo(i,d,t),c=d;var f=(t=p).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(0===(1&t)){fo(i,d,t),fc();break e}c=Error(s(426))}else if(rs&&1&l.mode){var x=go(o);if(null!==x){0===(65536&x.flags)&&(x.flags|=256),xo(x,o,l,0,t),ps(lo(c,l));break e}}i=c=lo(c,l),4!==Dl&&(Dl=2),null===zl?zl=[i]:zl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Bs(i,ho(0,c,t));break e;case 1:l=c;var y=i.type,v=i.stateNode;if(0===(128&i.flags)&&("function"===typeof y.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===ql||!ql.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t,Bs(i,po(i,l,t));break e}}i=i.return}while(null!==i)}bc(n)}catch(b){t=b,Tl===n&&null!==n&&(Tl=n=n.return);continue}break}}function pc(){var e=Sl.current;return Sl.current=Ji,null===e?Ji:e}function fc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Al||0===(268435455&_l)&&0===(268435455&Ol)||oc(Al,Ml)}function gc(e,t){var n=Pl;Pl|=2;var a=pc();for(Al===e&&Ml===t||(Hl=null,mc(e,t));;)try{xc();break}catch(r){hc(e,r)}if(Cs(),Pl=n,Sl.current=a,null!==Tl)throw Error(s(261));return Al=null,Ml=0,Dl}function xc(){for(;null!==Tl;)vc(Tl)}function yc(){for(;null!==Tl&&!$e();)vc(Tl)}function vc(e){var t=Nl(e.alternate,e,Ll);e.memoizedProps=e.pendingProps,null===t?bc(e):Tl=t,Cl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Yo(n,t,Ll)))return void(Tl=n)}else{if(null!==(n=Xo(n,t)))return n.flags&=32767,void(Tl=n);if(null===e)return Dl=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tl=t);Tl=t=e}while(null!==t);0===Dl&&(Dl=5)}function wc(e,t,n){var a=vt,r=El.transition;try{El.transition=null,vt=1,function(e,t,n,a){do{jc()}while(null!==Xl);if(0!==(6&Pl))throw Error(s(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-it(n),s=1<<r;t[r]=0,a[r]=-1,e[r]=-1,n&=~s}}(e,i),e===Al&&(Tl=Al=null,Ml=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Ac(tt,function(){return jc(),null})),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=El.transition,El.transition=null;var o=vt;vt=1;var l=Pl;Pl|=4,Cl.current=null,function(e,t){if(er=Wt,ha(e=ma())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(a&&0!==a.rangeCount){n=a.anchorNode;var r=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{n.nodeType,i.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,m=e,h=null;t:for(;;){for(var p;m!==n||0!==r&&3!==m.nodeType||(l=o+r),m!==i||0!==a&&3!==m.nodeType||(c=o+a),3===m.nodeType&&(o+=m.nodeValue.length),null!==(p=m.firstChild);)h=m,m=p;for(;;){if(m===e)break t;if(h===n&&++d===r&&(l=o),h===i&&++u===a&&(c=o),null!==(p=m.nextSibling))break;h=(m=h).parentNode}m=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Wt=!1,Qo=t;null!==Qo;)if(e=(t=Qo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qo=e;else for(;null!==Qo;){t=Qo;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var g=f.memoizedProps,x=f.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),x);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(w){kc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Qo=e;break}Qo=t.return}f=tl,tl=!1}(e,n),gl(n,e),pa(tr),Wt=!!er,tr=er=null,e.current=n,yl(n,e,r),Ke(),Pl=l,vt=o,El.transition=i}else e.current=n;if(Yl&&(Yl=!1,Xl=e,$l=r),i=e.pendingLanes,0===i&&(ql=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ac(e,Je()),null!==t)for(a=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],a(r.value,{componentStack:r.stack,digest:r.digest});if(Wl)throw Wl=!1,e=Gl,Gl=null,e;0!==(1&$l)&&0!==e.tag&&jc(),i=e.pendingLanes,0!==(1&i)?e===Jl?Kl++:(Kl=0,Jl=e):Kl=0,Ur()}(e,t,n,a)}finally{El.transition=r,vt=a}return null}function jc(){if(null!==Xl){var e=bt($l),t=El.transition,n=vt;try{if(El.transition=null,vt=16>e?16:e,null===Xl)var a=!1;else{if(e=Xl,Xl=null,$l=0,0!==(6&Pl))throw Error(s(331));var r=Pl;for(Pl|=4,Qo=e.current;null!==Qo;){var i=Qo,o=i.child;if(0!==(16&Qo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Qo=d;null!==Qo;){var u=Qo;switch(u.tag){case 0:case 11:case 15:nl(8,u,i)}var m=u.child;if(null!==m)m.return=u,Qo=m;else for(;null!==Qo;){var h=(u=Qo).sibling,p=u.return;if(sl(u),u===d){Qo=null;break}if(null!==h){h.return=p,Qo=h;break}Qo=p}}}var f=i.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(null!==g)}}Qo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Qo=o;else e:for(;null!==Qo;){if(0!==(2048&(i=Qo).flags))switch(i.tag){case 0:case 11:case 15:nl(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Qo=y;break e}Qo=i.return}}var v=e.current;for(Qo=v;null!==Qo;){var b=(o=Qo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Qo=b;else e:for(o=v;null!==Qo;){if(0!==(2048&(l=Qo).flags))try{switch(l.tag){case 0:case 11:case 15:al(9,l)}}catch(j){kc(l,l.return,j)}if(l===o){Qo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Qo=w;break e}Qo=l.return}}if(Pl=r,Ur(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(rt,e)}catch(j){}a=!0}return a}finally{vt=n,El.transition=t}}return!1}function Nc(e,t,n){e=zs(e,t=ho(0,t=lo(n,t),1),1),t=ec(),null!==e&&(xt(e,1,t),ac(e,t))}function kc(e,t,n){if(3===e.tag)Nc(e,e,n);else for(;null!==t;){if(3===t.tag){Nc(t,e,n);break}if(1===t.tag){var a=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof a.componentDidCatch&&(null===ql||!ql.has(a))){t=zs(t,e=po(t,e=lo(n,e),1),1),e=ec(),null!==t&&(xt(t,1,e),ac(t,e));break}}t=t.return}}function Sc(e,t,n){var a=e.pingCache;null!==a&&a.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Ml&n)===n&&(4===Dl||3===Dl&&(130023424&Ml)===Ml&&500>Je()-Bl?mc(e,0):Fl|=n),ac(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=Ds(e,t))&&(xt(e,t,n),ac(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Pc(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(s(314))}null!==a&&a.delete(t),Cc(e,n)}function Ac(e,t){return Ye(e,t)}function Tc(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mc(e,t,n,a){return new Tc(e,t,n,a)}function Lc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Mc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,a,r,i){var o=2;if(a=e,"function"===typeof e)Lc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case N:return Ic(n.children,r,i,t);case k:o=8,r|=8;break;case S:return(e=Mc(12,n,t,2|r)).elementType=S,e.lanes=i,e;case A:return(e=Mc(13,n,t,r)).elementType=A,e.lanes=i,e;case T:return(e=Mc(19,n,t,r)).elementType=T,e.lanes=i,e;case R:return _c(n,r,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:o=10;break e;case E:o=9;break e;case P:o=11;break e;case M:o=14;break e;case L:o=16,a=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Mc(o,n,t,r)).elementType=e,t.type=a,t.lanes=i,t}function Ic(e,t,n,a){return(e=Mc(7,e,a,t)).lanes=n,e}function _c(e,t,n,a){return(e=Mc(22,e,a,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Oc(e,t,n){return(e=Mc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Mc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,a,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=a,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,a,r,s,i,o,l){return e=new zc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Mc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:a,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_s(s),e}function Bc(e){if(!e)return Er;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Lr(n))return Ir(e,n,t)}return t}function Uc(e,t,n,a,r,s,i,o,l){return(e=Vc(n,a,!0,e,0,s,0,o,l)).context=Bc(null),n=e.current,(s=Fs(a=ec(),r=tc(n))).callback=void 0!==t&&null!==t?t:null,zs(n,s,r),e.current.lanes=r,xt(e,r,a),ac(e,a),e}function Hc(e,t,n,a){var r=t.current,s=ec(),i=tc(r);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,i)).payload={element:e},null!==(a=void 0===a?null:a)&&(t.callback=a),null!==(e=zs(r,t,i))&&(nc(e,r,i,s),Vs(e,r,i)),i}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Nl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ar.current)vo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return vo=!1,function(e,t,n){switch(t.tag){case 3:Ao(t),hs();break;case 5:Js(t);break;case 1:Lr(t.type)&&_r(t);break;case 4:$s(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,r=t.memoizedProps.value;Cr(js,a._currentValue),a._currentValue=r;break;case 13:if(null!==(a=t.memoizedState))return null!==a.dehydrated?(Cr(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Oo(e,t,n):(Cr(Zs,1&Zs.current),null!==(e=Wo(e,t,n))?e.sibling:null);Cr(Zs,1&Zs.current);break;case 19:if(a=0!==(n&t.childLanes),0!==(128&e.flags)){if(a)return Uo(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Cr(Zs,Zs.current),a)break;return null;case 22:case 23:return t.lanes=0,ko(e,t,n)}return Wo(e,t,n)}(e,t,n);vo=0!==(131072&e.flags)}else vo=!1,rs&&0!==(1048576&t.flags)&&Zr(t,qr,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Ho(e,t),e=t.pendingProps;var r=Mr(t,Pr.current);As(t,n),r=fi(null,t,a,e,r,n);var i=gi();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lr(a)?(i=!0,_r(t)):i=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,_s(t),r.updater=ao,t.stateNode=r,r._reactInternals=t,oo(t,a,e,n),t=Po(null,t,a,!0,i,n)):(t.tag=0,rs&&i&&es(t),bo(null,t,r,n),t=t.child),t;case 16:a=t.elementType;e:{switch(Ho(e,t),e=t.pendingProps,a=(r=a._init)(a._payload),t.type=a,r=t.tag=function(e){if("function"===typeof e)return Lc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===P)return 11;if(e===M)return 14}return 2}(a),e=to(a,e),r){case 0:t=Co(null,t,a,e,n);break e;case 1:t=Eo(null,t,a,e,n);break e;case 11:t=wo(null,t,a,e,n);break e;case 14:t=jo(null,t,a,to(a.type,e),n);break e}throw Error(s(306,a,""))}return t;case 0:return a=t.type,r=t.pendingProps,Co(e,t,a,r=t.elementType===a?r:to(a,r),n);case 1:return a=t.type,r=t.pendingProps,Eo(e,t,a,r=t.elementType===a?r:to(a,r),n);case 3:e:{if(Ao(t),null===e)throw Error(s(387));a=t.pendingProps,r=(i=t.memoizedState).element,Os(e,t),Us(t,a,null,n);var o=t.memoizedState;if(a=o.element,i.isDehydrated){if(i={element:a,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=To(e,t,a,n,r=lo(Error(s(423)),t));break e}if(a!==r){t=To(e,t,a,n,r=lo(Error(s(424)),t));break e}for(as=cr(t.stateNode.containerInfo.firstChild),ns=t,rs=!0,ss=null,n=ws(t,null,a,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(hs(),a===r){t=Wo(e,t,n);break e}bo(e,t,a,n)}t=t.child}return t;case 5:return Js(t),null===e&&cs(t),a=t.type,r=t.pendingProps,i=null!==e?e.memoizedProps:null,o=r.children,nr(a,r)?o=null:null!==i&&nr(a,i)&&(t.flags|=32),So(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Oo(e,t,n);case 4:return $s(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=bs(t,null,a,n):bo(e,t,a,n),t.child;case 11:return a=t.type,r=t.pendingProps,wo(e,t,a,r=t.elementType===a?r:to(a,r),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(a=t.type._context,r=t.pendingProps,i=t.memoizedProps,o=r.value,Cr(js,a._currentValue),a._currentValue=o,null!==i)if(oa(i.value,o)){if(i.children===r.children&&!Ar.current){t=Wo(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===a){if(1===i.tag){(c=Fs(-1,n&-n)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Ps(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ps(o,n,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}bo(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,a=t.pendingProps.children,As(t,n),a=a(r=Ts(r)),t.flags|=1,bo(e,t,a,n),t.child;case 14:return r=to(a=t.type,t.pendingProps),jo(e,t,a,r=to(a.type,r),n);case 15:return No(e,t,t.type,t.pendingProps,n);case 17:return a=t.type,r=t.pendingProps,r=t.elementType===a?r:to(a,r),Ho(e,t),t.tag=1,Lr(a)?(e=!0,_r(t)):e=!1,As(t,n),so(t,a,r),oo(t,a,r,n),Po(null,t,a,!0,e,n);case 19:return Uo(e,t,n);case 22:return ko(e,t,n)}throw Error(s(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Zc(e,t,n,a,r){var s=n._reactRootContainer;if(s){var i=s;if("function"===typeof r){var o=r;r=function(){var e=Wc(i);o.call(e)}}Hc(t,i,e,r)}else i=function(e,t,n,a,r){if(r){if("function"===typeof a){var s=a;a=function(){var e=Wc(i);s.call(e)}}var i=Uc(t,a,e,0,null,!1,0,"",Qc);return e._reactRootContainer=i,e[pr]=i.current,Ua(8===e.nodeType?e.parentNode:e),dc(),i}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof a){var o=a;a=function(){var e=Wc(l);o.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[pr]=l.current,Ua(8===e.nodeType?e.parentNode:e),dc(function(){Hc(t,l,n,a)}),l}(n,t,e,r,a);return Wc(i)}$c.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Hc(e,t,null,null)},$c.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Hc(null,e,null,null)}),t[pr]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ot(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(yt(t,1|n),ac(t,Je()),0===(6&Pl)&&(Ul=Je()+500,Ur()))}break;case 13:dc(function(){var t=Ds(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),qc(e,1)}},jt=function(e){if(13===e.tag){var t=Ds(e,134217728);if(null!==t)nc(t,e,134217728,ec());qc(e,134217728)}},Nt=function(e){if(13===e.tag){var t=tc(e),n=Ds(e,t);if(null!==n)nc(n,e,t,ec());qc(e,t)}},kt=function(){return vt},St=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},je=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var r=wr(a);if(!r)throw Error(s(90));Y(a),Q(a,r)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Pe=cc,Ae=dc;var ed={usingClientEntryPoint:!1,Events:[vr,br,wr,Ce,Ee,cc]},td={findFiberByHostInstance:yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ad.isDisabled&&ad.supportsFiber)try{rt=ad.inject(nd),st=ad}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kc(t))throw Error(s(200));return function(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:j,key:null==a?null:""+a,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Kc(e))throw Error(s(299));var n=!1,a="",r=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,a,r),e[pr]=t.current,Ua(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Kc(e))throw Error(s(405));var a=null!=n&&n.hydratedSources||null,r=!1,i="",o=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Uc(t,null,e,1,null!=n?n:null,r,0,i,o),e[pr]=t.current,Ua(e),a)for(e=0;e<a.length;e++)r=(r=(n=a[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new $c(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(s(40));return!!e._reactRootContainer&&(dc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[pr]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,a){if(!Jc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,a)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{n.d(t,{geminiService:()=>s});var a=n(392);class r{constructor(e){this.apiKey=void 0,this.baseUrl="https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent",this.useVertexAI=void 0,this.apiKey=e,this.useVertexAI=!0}async generateResponse(e){if(this.useVertexAI)try{return await a.vertexAIService.generateResponse(e)}catch(t){console.warn("Vertex AI failed, falling back to free API:",t)}if(!this.apiKey)throw new Error("No API key configured for Gemini API");try{const t=await fetch("".concat(this.baseUrl,"?key=").concat(this.apiKey),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:e,generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:1024},safetySettings:[{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"}]})});if(!t.ok)throw new Error("Gemini API error: ".concat(t.status));const n=await t.json();if(n.candidates&&n.candidates.length>0)return n.candidates[0].content.parts[0].text;throw new Error("No response from Gemini API")}catch(t){throw console.error("Error calling Gemini API:",t),t}}async getInitialGreeting(){const e=[{role:"user",parts:[{text:"You are Mira, a warm and empathetic AI therapist. You're here to provide support, guidance, and a safe space for users to share their thoughts and feelings. \n\nYour personality:\n- Warm, compassionate, and non-judgmental\n- Uses gentle, encouraging language\n- Focuses on empowerment and self-care\n- Avoids clinical or medical terminology\n- Speaks in a conversational, friendly tone\n- Encourages users to explore their feelings safely\n\nPlease provide a brief, welcoming greeting (2-3 sentences) that introduces yourself and invites the user to share what's on their mind. Keep it warm and approachable."}]}];try{return await this.generateResponse(e)}catch(t){return console.error("Error getting initial greeting:",t),"Hello! I'm Mira, your wellness companion. I'm here to listen and support you. What's on your mind today?"}}async generateTherapeuticResponse(e){const t=[{role:"user",parts:[{text:"You are Mira, a warm and empathetic AI therapist. You're here to provide support, guidance, and a safe space for users to share their thoughts and feelings.\n\nYour approach:\n- Listen actively and validate their feelings\n- Ask gentle, open-ended questions to help them explore\n- Offer practical, evidence-based coping strategies\n- Use CBT techniques when appropriate (thought challenging, reframing)\n- Encourage self-compassion and self-care\n- Normalize their experiences\n- Avoid giving medical advice or diagnoses\n- If someone expresses suicidal thoughts, respond with empathy and encourage them to reach out to crisis resources\n\nKeep responses conversational, warm, and helpful. Aim for 2-4 sentences that provide meaningful support."}]},...arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],{role:"user",parts:[{text:e}]}];try{return await this.generateResponse(t)}catch(n){return console.error("Error generating therapeutic response:",n),"I'm here to listen and support you. Could you tell me more about what you're experiencing right now?"}}}console.warn("Gemini API key not found. Please set REACT_APP_GEMINI_API_KEY in your .env file");const s=new r("")},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},958:(e,t,n)=>{n.r(t),n.d(t,{SUPPORTED_LANGUAGES:()=>a,default:()=>i,languageService:()=>s});const a=[{code:"en",name:"English",nativeName:"English",flag:"\ud83c\uddfa\ud83c\uddf8",ttsVoiceCode:"en-US",ttsVoiceName:"en-US-Neural2-F",sttLanguageCode:"en-US"},{code:"es",name:"Spanish",nativeName:"Espa\xf1ol",flag:"\ud83c\uddea\ud83c\uddf8",ttsVoiceCode:"es-ES",ttsVoiceName:"es-ES-Neural2-F",sttLanguageCode:"es-ES"},{code:"fr",name:"French",nativeName:"Fran\xe7ais",flag:"\ud83c\uddeb\ud83c\uddf7",ttsVoiceCode:"fr-FR",ttsVoiceName:"fr-FR-Neural2-F",sttLanguageCode:"fr-FR"},{code:"de",name:"German",nativeName:"Deutsch",flag:"\ud83c\udde9\ud83c\uddea",ttsVoiceCode:"de-DE",ttsVoiceName:"de-DE-Neural2-F",sttLanguageCode:"de-DE"},{code:"it",name:"Italian",nativeName:"Italiano",flag:"\ud83c\uddee\ud83c\uddf9",ttsVoiceCode:"it-IT",ttsVoiceName:"it-IT-Neural2-C",sttLanguageCode:"it-IT"},{code:"pt",name:"Portuguese",nativeName:"Portugu\xeas",flag:"\ud83c\uddf5\ud83c\uddf9",ttsVoiceCode:"pt-PT",ttsVoiceName:"pt-PT-Neural2-F",sttLanguageCode:"pt-PT"},{code:"zh",name:"Chinese",nativeName:"\u4e2d\u6587",flag:"\ud83c\udde8\ud83c\uddf3",ttsVoiceCode:"zh-CN",ttsVoiceName:"zh-CN-Neural2-F",sttLanguageCode:"zh-CN"},{code:"ja",name:"Japanese",nativeName:"\u65e5\u672c\u8a9e",flag:"\ud83c\uddef\ud83c\uddf5",ttsVoiceCode:"ja-JP",ttsVoiceName:"ja-JP-Neural2-C",sttLanguageCode:"ja-JP"},{code:"ko",name:"Korean",nativeName:"\ud55c\uad6d\uc5b4",flag:"\ud83c\uddf0\ud83c\uddf7",ttsVoiceCode:"ko-KR",ttsVoiceName:"ko-KR-Neural2-C",sttLanguageCode:"ko-KR"},{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",flag:"\ud83c\uddf8\ud83c\udde6",ttsVoiceCode:"ar-XA",ttsVoiceName:"ar-XA-Neural2-C",sttLanguageCode:"ar-SA"}];class r{constructor(){this.currentLanguage="en"}getCurrentLanguage(){return this.currentLanguage}setCurrentLanguage(e){this.currentLanguage=e,localStorage.setItem("mindbloom-language",e)}getLanguageConfig(e){const t=e||this.currentLanguage;return a.find(e=>e.code===t)||a[0]}detectBrowserLanguage(){const e=(navigator.language||navigator.userLanguage).split("-")[0];return a.find(t=>t.code===e)?e:"en"}initializeLanguage(){const e=localStorage.getItem("mindbloom-language");if(e)return this.currentLanguage=e,e;const t=this.detectBrowserLanguage();return this.setCurrentLanguage(t),t}getTTSVoice(){const e=this.getLanguageConfig();return{languageCode:e.ttsVoiceCode,name:e.ttsVoiceName,ssmlGender:"FEMALE"}}getSTTLanguageCode(){return this.getLanguageConfig().sttLanguageCode}isRTL(e){const t=e||this.currentLanguage;return["ar","he","fa","ur"].includes(t)}}const s=new r,i=r}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,n),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(a,r){if(1&r&&(a=this(a)),8&r)return a;if("object"===typeof a&&a){if(4&r&&a.__esModule)return a;if(16&r&&"function"===typeof a.then)return a}var s=Object.create(null);n.r(s);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&r&&a;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>i[e]=()=>a[e]);return i.default=()=>a,n.d(s,i),s}})(),n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a,r=n(43),s=n.t(r,2),i=n(391),o=n(950),l=n.t(o,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(a||(a={}));const d="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function m(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function h(e,t){return{usr:e.state,key:e.key,idx:t}}function p(e,t,n,a){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:n,key:t&&t.key||a||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:n="",hash:a=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),a&&"#"!==a&&(t+="#"===a.charAt(0)?a:"#"+a),t}function g(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function x(e,t,n,r){void 0===r&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=a.Pop,m=null,g=x();function x(){return(o.state||{idx:null}).idx}function y(){l=a.Pop;let e=x(),t=null==e?null:e-g;g=e,m&&m({action:l,location:b.location,delta:t})}function v(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:f(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,o.replaceState(c({},o.state,{idx:g}),""));let b={get action(){return l},get location(){return e(s,o)},listen(e){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(d,y),m=e,()=>{s.removeEventListener(d,y),m=null}},createHref:e=>t(s,e),createURL:v,encodeLocation(e){let t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=a.Push;let r=p(b.location,e,t);n&&n(r,e),g=x()+1;let c=h(r,g),d=b.createHref(r);try{o.pushState(c,"",d)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;s.location.assign(d)}i&&m&&m({action:l,location:b.location,delta:1})},replace:function(e,t){l=a.Replace;let r=p(b.location,e,t);n&&n(r,e),g=x();let s=h(r,g),c=b.createHref(r);o.replaceState(s,"",c),i&&m&&m({action:l,location:b.location,delta:0})},go:e=>o.go(e)};return b}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){return void 0===n&&(n="/"),b(e,t,n,!1)}function b(e,t,n,a){let r=D(("string"===typeof t?g(t):t).pathname||"/",n);if(null==r)return null;let s=w(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let i=null;for(let o=0;null==i&&o<s.length;++o){let e=R(r);i=M(s[o],e,a)}return i}function w(e,t,n,a){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===a&&(a="");let r=(e,r,s)=>{let i={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};i.relativePath.startsWith("/")&&(u(i.relativePath.startsWith(a),'Absolute route path "'+i.relativePath+'" nested under path "'+a+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(a.length));let o=I([a,i.relativePath]),l=n.concat(i);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),w(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:T(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let a of j(e.path))r(e,t,a);else r(e,t)}),t}function j(e){let t=e.split("/");if(0===t.length)return[];let[n,...a]=t,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===a.length)return r?[s,""]:[s];let i=j(a.join("/")),o=[];return o.push(...i.map(e=>""===e?s:[s,e].join("/"))),r&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const N=/^:[\w-]+$/,k=3,S=2,C=1,E=10,P=-2,A=e=>"*"===e;function T(e,t){let n=e.split("/"),a=n.length;return n.some(A)&&(a+=P),t&&(a+=S),n.filter(e=>!A(e)).reduce((e,t)=>e+(N.test(t)?k:""===t?C:E),a)}function M(e,t,n){void 0===n&&(n=!1);let{routesMeta:a}=e,r={},s="/",i=[];for(let o=0;o<a.length;++o){let e=a[o],l=o===a.length-1,c="/"===s?t:t.slice(s.length)||"/",d=L({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&n&&!a[a.length-1].route.index&&(d=L({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(r,d.params),i.push({params:r,pathname:I([s,d.pathname]),pathnameBase:_(I([s,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(s=I([s,d.pathnameBase]))}return i}function L(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,a]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);m("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let a=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(a.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(a.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))");let s=new RegExp(r,t?void 0:"i");return[s,a]}(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let s=r[0],i=s.replace(/(.)\/+$/,"$1"),o=r.slice(1),l=a.reduce((e,t,n)=>{let{paramName:a,isOptional:r}=t;if("*"===a){let e=o[n]||"";i=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[a]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:s,pathnameBase:i,pattern:e}}function R(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return m(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,a=e.charAt(n);return a&&"/"!==a?null:e.slice(n)||"/"}const I=e=>e.join("/").replace(/\/\/+/g,"/"),_=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/");Error;function O(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const F=["post","put","patch","delete"],z=(new Set(F),["get",...F]);new Set(z),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},V.apply(this,arguments)}const B=r.createContext(null);const U=r.createContext(null);const H=r.createContext(null);const W=r.createContext(null);const G=r.createContext({outlet:null,matches:[],isDataRoute:!1});const q=r.createContext(null);function Y(){return null!=r.useContext(W)}function X(){return Y()||u(!1),r.useContext(W).location}function $(e,t,n,s){Y()||u(!1);let{navigator:i}=r.useContext(H),{matches:o}=r.useContext(G),l=o[o.length-1],c=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let m,h=X();if(t){var p;let e="string"===typeof t?g(t):t;"/"===d||(null==(p=e.pathname)?void 0:p.startsWith(d))||u(!1),m=e}else m=h;let f=m.pathname||"/",x=f;if("/"!==d){let e=d.replace(/^\//,"").split("/");x="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=v(e,{pathname:x});let b=ee(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:I([d,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:I([d,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,n,s);return t&&b?r.createElement(W.Provider,{value:{location:V({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:a.Pop}},b):b}function K(){let e=function(){var e;let t=r.useContext(q),n=ne(te.UseRouteError),a=ae(te.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[a]}(),t=O(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const J=r.createElement(K,null);class Q extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(G.Provider,{value:this.props.routeContext},r.createElement(q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Z(e){let{routeContext:t,match:n,children:a}=e,s=r.useContext(B);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(G.Provider,{value:t},a)}function ee(e,t,n,a){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===a&&(a=null),null==e){var i;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(i=a)&&i.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||u(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,d=-1;if(n&&a&&a.v7_partialHydration)for(let r=0;r<o.length;r++){let e=o[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=r),e.route.id){let{loaderData:t,errors:a}=n,r=e.route.loader&&void 0===t[e.route.id]&&(!a||void 0===a[e.route.id]);if(e.route.lazy||r){c=!0,o=d>=0?o.slice(0,d+1):[o[0]];break}}}return o.reduceRight((e,a,s)=>{let i,u=!1,m=null,h=null;var p;n&&(i=l&&a.route.id?l[a.route.id]:void 0,m=a.route.errorElement||J,c&&(d<0&&0===s?(p="route-fallback",!1||re[p]||(re[p]=!0),u=!0,h=null):d===s&&(u=!0,h=a.route.hydrateFallbackElement||null)));let f=t.concat(o.slice(0,s+1)),g=()=>{let t;return t=i?m:u?h:a.route.Component?r.createElement(a.route.Component,null):a.route.element?a.route.element:e,r.createElement(Z,{match:a,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(a.route.ErrorBoundary||a.route.errorElement||0===s)?r.createElement(Q,{location:n.location,revalidation:n.revalidation,component:m,error:i,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):g()},null)}var te=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(te||{});function ne(e){let t=r.useContext(U);return t||u(!1),t}function ae(e){let t=function(){let e=r.useContext(G);return e||u(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}const re={};function se(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function ie(e){u(!1)}function oe(e){let{basename:t="/",children:n=null,location:s,navigationType:i=a.Pop,navigator:o,static:l=!1,future:c}=e;Y()&&u(!1);let d=t.replace(/^\/*/,"/"),m=r.useMemo(()=>({basename:d,navigator:o,static:l,future:V({v7_relativeSplatPath:!1},c)}),[d,c,o,l]);"string"===typeof s&&(s=g(s));let{pathname:h="/",search:p="",hash:f="",state:x=null,key:y="default"}=s,v=r.useMemo(()=>{let e=D(h,d);return null==e?null:{location:{pathname:e,search:p,hash:f,state:x,key:y},navigationType:i}},[d,h,p,f,x,y,i]);return null==v?null:r.createElement(H.Provider,{value:m},r.createElement(W.Provider,{children:n,value:v}))}function le(e){let{children:t,location:n}=e;return $(ce(t),n)}new Promise(()=>{});r.Component;function ce(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,(e,a)=>{if(!r.isValidElement(e))return;let s=[...t,a];if(e.type===r.Fragment)return void n.push.apply(n,ce(e.props.children,s));e.type!==ie&&u(!1),e.props.index&&e.props.children&&u(!1);let i={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=ce(e.props.children,s)),n.push(i)}),n}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(Zd){}new Map;const de=s.startTransition;l.flushSync,s.useId;function ue(e){let{basename:t,children:n,future:a,window:s}=e,i=r.useRef();var o;null==i.current&&(i.current=(void 0===(o={window:s,v5Compat:!0})&&(o={}),x(function(e,t){let{pathname:n,search:a,hash:r}=e.location;return p("",{pathname:n,search:a,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:f(t)},null,o)));let l=i.current,[c,d]=r.useState({action:l.action,location:l.location}),{v7_startTransition:u}=a||{},m=r.useCallback(e=>{u&&de?de(()=>d(e)):d(e)},[d,u]);return r.useLayoutEffect(()=>l.listen(m),[l,m]),r.useEffect(()=>se(a),[a]),r.createElement(oe,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:a})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var me,he;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(me||(me={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(he||(he={}));const pe="undefined"!==typeof document,fe=pe?r.useLayoutEffect:r.useEffect;function ge(){const e=(0,r.useRef)(!1);return fe(()=>(e.current=!0,()=>{e.current=!1}),[]),e}const xe=e=>e;class ye{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);-1!==t&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}const ve=["prepare","read","update","preRender","render","postRender"];const{schedule:be,cancel:we,state:je,steps:Ne}=function(e,t){let n=!1,a=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=ve.reduce((e,t)=>(e[t]=function(e){let t=new ye,n=new ye,a=0,r=!1,s=!1;const i=new WeakSet,o={schedule:function(e){const s=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&r,o=s?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&i.add(e),o.add(e)&&s&&r&&(a=t.order.length),e},cancel:e=>{n.remove(e),i.delete(e)},process:l=>{if(r)s=!0;else{if(r=!0,[t,n]=[n,t],n.clear(),a=t.order.length,a)for(let n=0;n<a;n++){const a=t.order[n];a(l),i.has(a)&&(o.schedule(a),e())}r=!1,s&&(s=!1,o.process(l))}}};return o}(()=>n=!0),e),{}),i=e=>s[e].process(r),o=()=>{const s=performance.now();n=!1,r.delta=a?1e3/60:Math.max(Math.min(s-r.timestamp,40),1),r.timestamp=s,r.isProcessing=!0,ve.forEach(i),r.isProcessing=!1,n&&t&&(a=!1,e(o))},l=ve.reduce((t,i)=>{const l=s[i];return t[i]=function(t){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,a=!0,r.isProcessing||e(o)),l.schedule(t,s,i)},t},{});return{schedule:l,cancel:e=>ve.forEach(t=>s[t].cancel(e)),state:r,steps:s}}("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:xe,!0);const ke=(0,r.createContext)(null);function Se(e){const t=(0,r.useRef)(null);return null===t.current&&(t.current=e()),t.current}class Ce extends r.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Ee(e){let{children:t,isPresent:n}=e;const a=(0,r.useId)(),s=(0,r.useRef)(null),i=(0,r.useRef)({width:0,height:0,top:0,left:0});return(0,r.useInsertionEffect)(()=>{const{width:e,height:t,top:r,left:o}=i.current;if(n||!s.current||!e||!t)return;s.current.dataset.motionPopId=a;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule('\n          [data-motion-pop-id="'.concat(a,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(r,"px !important;\n            left: ").concat(o,"px !important;\n          }\n        ")),()=>{document.head.removeChild(l)}},[n]),r.createElement(Ce,{isPresent:n,childRef:s,sizeRef:i},r.cloneElement(t,{ref:s}))}const Pe=e=>{let{children:t,initial:n,isPresent:a,onExitComplete:s,custom:i,presenceAffectsLayout:o,mode:l}=e;const c=Se(Ae),d=(0,r.useId)(),u=(0,r.useMemo)(()=>({id:d,initial:n,isPresent:a,custom:i,onExitComplete:e=>{c.set(e,!0);for(const t of c.values())if(!t)return;s&&s()},register:e=>(c.set(e,!1),()=>c.delete(e))}),o?void 0:[a]);return(0,r.useMemo)(()=>{c.forEach((e,t)=>c.set(t,!1))},[a]),r.useEffect(()=>{!a&&!c.size&&s&&s()},[a]),"popLayout"===l&&(t=r.createElement(Ee,{isPresent:a},t)),r.createElement(ke.Provider,{value:u},t)};function Ae(){return new Map}const Te=(0,r.createContext)({});let Me=xe,Le=xe;const Re=e=>e.key||"";const De=e=>{let{children:t,custom:n,initial:a=!0,onExitComplete:s,exitBeforeEnter:i,presenceAffectsLayout:o=!0,mode:l="sync"}=e;Le(!i,"Replace exitBeforeEnter with mode='wait'");const c=(0,r.useContext)(Te).forceRender||function(){const e=ge(),[t,n]=(0,r.useState)(0),a=(0,r.useCallback)(()=>{e.current&&n(t+1)},[t]);return[(0,r.useCallback)(()=>be.postRender(a),[a]),t]}()[0],d=ge(),u=function(e){const t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}(t);let m=u;const h=(0,r.useRef)(new Map).current,p=(0,r.useRef)(m),f=(0,r.useRef)(new Map).current,g=(0,r.useRef)(!0);var x;if(fe(()=>{g.current=!1,function(e,t){e.forEach(e=>{const n=Re(e);t.set(n,e)})}(u,f),p.current=m}),x=()=>{g.current=!0,f.clear(),h.clear()},(0,r.useEffect)(()=>()=>x(),[]),g.current)return r.createElement(r.Fragment,null,m.map(e=>r.createElement(Pe,{key:Re(e),isPresent:!0,initial:!!a&&void 0,presenceAffectsLayout:o,mode:l},e)));m=[...m];const y=p.current.map(Re),v=u.map(Re),b=y.length;for(let r=0;r<b;r++){const e=y[r];-1!==v.indexOf(e)||h.has(e)||h.set(e,void 0)}return"wait"===l&&h.size&&(m=[]),h.forEach((e,t)=>{if(-1!==v.indexOf(t))return;const a=f.get(t);if(!a)return;const i=y.indexOf(t);let g=e;if(!g){const e=()=>{h.delete(t);const e=Array.from(f.keys()).filter(e=>!v.includes(e));if(e.forEach(e=>f.delete(e)),p.current=u.filter(n=>{const a=Re(n);return a===t||e.includes(a)}),!h.size){if(!1===d.current)return;c(),s&&s()}};g=r.createElement(Pe,{key:Re(a),isPresent:!1,onExitComplete:e,custom:n,presenceAffectsLayout:o,mode:l},a),h.set(t,g)}m.splice(i,0,g)}),m=m.map(e=>{const t=e.key;return h.has(t)?e:r.createElement(Pe,{key:Re(e),isPresent:!0,presenceAffectsLayout:o,mode:l},e)}),r.createElement(r.Fragment,null,h.size?m:m.map(e=>(0,r.cloneElement)(e)))};var Ie=n(555);const _e=(0,r.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Oe=(0,r.createContext)({}),Fe=(0,r.createContext)({strict:!1}),ze=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Ve="data-"+ze("framerAppearId");function Be(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Ue(e){return"string"===typeof e||Array.isArray(e)}function He(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}const We=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ge=["initial",...We];function qe(e){return He(e.animate)||Ge.some(t=>Ue(e[t]))}function Ye(e){return Boolean(qe(e)||e.variants)}function Xe(e){const{initial:t,animate:n}=function(e,t){if(qe(e)){const{initial:t,animate:n}=e;return{initial:!1===t||Ue(t)?t:void 0,animate:Ue(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,r.useContext)(Oe));return(0,r.useMemo)(()=>({initial:t,animate:n}),[$e(t),$e(n)])}function $e(e){return Array.isArray(e)?e.join(" "):e}const Ke={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Je={};for(const tu in Ke)Je[tu]={isEnabled:e=>Ke[tu].some(t=>!!e[t])};const Qe=(0,r.createContext)({}),Ze=Symbol.for("motionComponentSymbol");function et(e){let{preloadedFeatures:t,createVisualElement:n,useRender:a,useVisualState:s,Component:i}=e;t&&function(e){for(const t in e)Je[t]=(0,Ie.A)((0,Ie.A)({},Je[t]),e[t])}(t);const o=(0,r.forwardRef)(function(e,o){let l;const c=(0,Ie.A)((0,Ie.A)((0,Ie.A)({},(0,r.useContext)(_e)),e),{},{layoutId:tt(e)}),{isStatic:d}=c,u=Xe(e),m=s(e,d);if(!d&&pe){u.visualElement=function(e,t,n,a){const{visualElement:s}=(0,r.useContext)(Oe),i=(0,r.useContext)(Fe),o=(0,r.useContext)(ke),l=(0,r.useContext)(_e).reducedMotion,c=(0,r.useRef)();a=a||i.renderer,!c.current&&a&&(c.current=a(e,{visualState:t,parent:s,props:n,presenceContext:o,blockInitialAnimation:!!o&&!1===o.initial,reducedMotionConfig:l}));const d=c.current;(0,r.useInsertionEffect)(()=>{d&&d.update(n,o)});const u=(0,r.useRef)(Boolean(n[Ve]&&!window.HandoffComplete));return fe(()=>{d&&(d.render(),u.current&&d.animationState&&d.animationState.animateChanges())}),(0,r.useEffect)(()=>{d&&(d.updateFeatures(),!u.current&&d.animationState&&d.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),d}(i,m,c,n);const e=(0,r.useContext)(Qe),a=(0,r.useContext)(Fe).strict;u.visualElement&&(l=u.visualElement.loadFeatures(c,a,t,e))}return r.createElement(Oe.Provider,{value:u},l&&u.visualElement?r.createElement(l,(0,Ie.A)({visualElement:u.visualElement},c)):null,a(i,e,function(e,t,n){return(0,r.useCallback)(a=>{a&&e.mount&&e.mount(a),t&&(a?t.mount(a):t.unmount()),n&&("function"===typeof n?n(a):Be(n)&&(n.current=a))},[t])}(m,u.visualElement,o),m,d,u.visualElement))});return o[Ze]=i,o}function tt(e){let{layoutId:t}=e;const n=(0,r.useContext)(Te).id;return n&&void 0!==t?n+"-"+t:t}function nt(e){function t(t){return et(e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}if("undefined"===typeof Proxy)return t;const n=new Map;return new Proxy(t,{get:(e,a)=>(n.has(a)||n.set(a,t(a)),n.get(a))})}const at=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function rt(e){return"string"===typeof e&&!e.includes("-")&&!!(at.indexOf(e)>-1||/[A-Z]/.test(e))}const st={};const it=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ot=new Set(it);function lt(e,t){let{layout:n,layoutId:a}=t;return ot.has(e)||e.startsWith("origin")||(n||void 0!==a)&&(!!st[e]||"opacity"===e)}const ct=e=>Boolean(e&&e.getVelocity),dt={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ut=it.length;const mt=e=>t=>"string"===typeof t&&t.startsWith(e),ht=mt("--"),pt=mt("var(--"),ft=(e,t)=>t&&"number"===typeof e?t.transform(e):e,gt=(e,t,n)=>Math.min(Math.max(n,e),t),xt={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},yt=(0,Ie.A)((0,Ie.A)({},xt),{},{transform:e=>gt(0,1,e)}),vt=(0,Ie.A)((0,Ie.A)({},xt),{},{default:1}),bt=e=>Math.round(1e5*e)/1e5,wt=/(-)?([\d]*\.?[\d])+/g,jt=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Nt=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function kt(e){return"string"===typeof e}const St=e=>({test:t=>kt(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),Ct=St("deg"),Et=St("%"),Pt=St("px"),At=St("vh"),Tt=St("vw"),Mt=(0,Ie.A)((0,Ie.A)({},Et),{},{parse:e=>Et.parse(e)/100,transform:e=>Et.transform(100*e)}),Lt=(0,Ie.A)((0,Ie.A)({},xt),{},{transform:Math.round}),Rt={borderWidth:Pt,borderTopWidth:Pt,borderRightWidth:Pt,borderBottomWidth:Pt,borderLeftWidth:Pt,borderRadius:Pt,radius:Pt,borderTopLeftRadius:Pt,borderTopRightRadius:Pt,borderBottomRightRadius:Pt,borderBottomLeftRadius:Pt,width:Pt,maxWidth:Pt,height:Pt,maxHeight:Pt,size:Pt,top:Pt,right:Pt,bottom:Pt,left:Pt,padding:Pt,paddingTop:Pt,paddingRight:Pt,paddingBottom:Pt,paddingLeft:Pt,margin:Pt,marginTop:Pt,marginRight:Pt,marginBottom:Pt,marginLeft:Pt,rotate:Ct,rotateX:Ct,rotateY:Ct,rotateZ:Ct,scale:vt,scaleX:vt,scaleY:vt,scaleZ:vt,skew:Ct,skewX:Ct,skewY:Ct,distance:Pt,translateX:Pt,translateY:Pt,translateZ:Pt,x:Pt,y:Pt,z:Pt,perspective:Pt,transformPerspective:Pt,opacity:yt,originX:Mt,originY:Mt,originZ:Pt,zIndex:Lt,fillOpacity:yt,strokeOpacity:yt,numOctaves:Lt};function Dt(e,t,n,a){const{style:r,vars:s,transform:i,transformOrigin:o}=e;let l=!1,c=!1,d=!0;for(const u in t){const e=t[u];if(ht(u)){s[u]=e;continue}const n=Rt[u],a=ft(e,n);if(ot.has(u)){if(l=!0,i[u]=a,!d)continue;e!==(n.default||0)&&(d=!1)}else u.startsWith("origin")?(c=!0,o[u]=a):r[u]=a}if(t.transform||(l||a?r.transform=function(e,t,n,a){let{enableHardwareAcceleration:r=!0,allowTransformNone:s=!0}=t,i="";for(let o=0;o<ut;o++){const t=it[o];void 0!==e[t]&&(i+="".concat(dt[t]||t,"(").concat(e[t],") "))}return r&&!e.z&&(i+="translateZ(0)"),i=i.trim(),a?i=a(e,n?"":i):s&&n&&(i="none"),i}(e.transform,n,d,a):r.transform&&(r.transform="none")),c){const{originX:e="50%",originY:t="50%",originZ:n=0}=o;r.transformOrigin="".concat(e," ").concat(t," ").concat(n)}}const It=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function _t(e,t,n){for(const a in t)ct(t[a])||lt(a,n)||(e[a]=t[a])}function Ot(e,t,n){const a={};return _t(a,e.style||{},e),Object.assign(a,function(e,t,n){let{transformTemplate:a}=e;return(0,r.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return Dt(e,t,{enableHardwareAcceleration:!n},a),Object.assign({},e.vars,e.style)},[t])}(e,t,n)),e.transformValues?e.transformValues(a):a}function Ft(e,t,n){const a={},r=Ot(e,t,n);return e.drag&&!1!==e.dragListener&&(a.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(a.tabIndex=0),a.style=r,a}const zt=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Vt(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||zt.has(e)}let Bt=e=>!Vt(e);try{(Ut=require("@emotion/is-prop-valid").default)&&(Bt=e=>e.startsWith("on")?!Vt(e):Ut(e))}catch(eu){}var Ut;function Ht(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Wt(e,t,n){return"string"===typeof e?e:Pt.transform(t+n*e)}const Gt={offset:"stroke-dashoffset",array:"stroke-dasharray"},qt={offset:"strokeDashoffset",array:"strokeDasharray"};const Yt=["attrX","attrY","attrScale","originX","originY","pathLength","pathSpacing","pathOffset"];function Xt(e,t,n,a,r){let{attrX:s,attrY:i,attrScale:o,originX:l,originY:c,pathLength:d,pathSpacing:u=1,pathOffset:m=0}=t;if(Dt(e,Ht(t,Yt),n,r),a)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:h,style:p,dimensions:f}=e;h.transform&&(f&&(p.transform=h.transform),delete h.transform),f&&(void 0!==l||void 0!==c||p.transform)&&(p.transformOrigin=function(e,t,n){const a=Wt(t,e.x,e.width),r=Wt(n,e.y,e.height);return"".concat(a," ").concat(r)}(f,void 0!==l?l:.5,void 0!==c?c:.5)),void 0!==s&&(h.x=s),void 0!==i&&(h.y=i),void 0!==o&&(h.scale=o),void 0!==d&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const s=r?Gt:qt;e[s.offset]=Pt.transform(-a);const i=Pt.transform(t),o=Pt.transform(n);e[s.array]="".concat(i," ").concat(o)}(h,d,u,m,!1)}const $t=()=>(0,Ie.A)((0,Ie.A)({},{style:{},transform:{},transformOrigin:{},vars:{}}),{},{attrs:{}}),Kt=e=>"string"===typeof e&&"svg"===e.toLowerCase();function Jt(e,t,n,a){const s=(0,r.useMemo)(()=>{const n=$t();return Xt(n,t,{enableHardwareAcceleration:!1},Kt(a),e.transformTemplate),(0,Ie.A)((0,Ie.A)({},n.attrs),{},{style:(0,Ie.A)({},n.style)})},[t]);if(e.style){const t={};_t(t,e.style,e),s.style=(0,Ie.A)((0,Ie.A)({},t),s.style)}return s}function Qt(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(t,n,a,s,i)=>{let{latestValues:o}=s;const l=(rt(t)?Jt:Ft)(n,o,i,t),c=function(e,t,n){const a={};for(const r in e)"values"===r&&"object"===typeof e.values||(Bt(r)||!0===n&&Vt(r)||!t&&!Vt(r)||e.draggable&&r.startsWith("onDrag"))&&(a[r]=e[r]);return a}(n,"string"===typeof t,e),d=(0,Ie.A)((0,Ie.A)((0,Ie.A)({},c),l),{},{ref:a}),{children:u}=n,m=(0,r.useMemo)(()=>ct(u)?u.get():u,[u]);return(0,r.createElement)(t,(0,Ie.A)((0,Ie.A)({},d),{},{children:m}))}}function Zt(e,t,n,a){let{style:r,vars:s}=t;Object.assign(e.style,r,a&&a.getProjectionStyles(n));for(const i in s)e.style.setProperty(i,s[i])}const en=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function tn(e,t,n,a){Zt(e,t,void 0,a);for(const r in t.attrs)e.setAttribute(en.has(r)?r:ze(r),t.attrs[r])}function nn(e,t){const{style:n}=e,a={};for(const r in n)(ct(n[r])||t.style&&ct(t.style[r])||lt(r,e))&&(a[r]=n[r]);return a}function an(e,t){const n=nn(e,t);for(const a in e)if(ct(e[a])||ct(t[a])){n[-1!==it.indexOf(a)?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a]=e[a]}return n}function rn(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"function"===typeof t&&(t=t(void 0!==n?n:e.custom,a,r)),"string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t&&(t=t(void 0!==n?n:e.custom,a,r)),t}const sn=e=>Array.isArray(e),on=e=>sn(e)?e[e.length-1]||0:e;function ln(e){const t=ct(e)?e.get():e;return n=t,Boolean(n&&"object"===typeof n&&n.mix&&n.toValue)?t.toValue():t;var n}const cn=["transitionEnd","transition"];const dn=e=>(t,n)=>{const a=(0,r.useContext)(Oe),s=(0,r.useContext)(ke),i=()=>function(e,t,n,a){let{scrapeMotionValuesFromProps:r,createRenderState:s,onMount:i}=e;const o={latestValues:un(t,n,a,r),renderState:s()};return i&&(o.mount=e=>i(t,e,o)),o}(e,t,a,s);return n?i():Se(i)};function un(e,t,n,a){const r={},s=a(e,{});for(const m in s)r[m]=ln(s[m]);let{initial:i,animate:o}=e;const l=qe(e),c=Ye(e);t&&c&&!l&&!1!==e.inherit&&(void 0===i&&(i=t.initial),void 0===o&&(o=t.animate));let d=!!n&&!1===n.initial;d=d||!1===i;const u=d?o:i;if(u&&"boolean"!==typeof u&&!He(u)){(Array.isArray(u)?u:[u]).forEach(t=>{const n=rn(e,t);if(!n)return;const{transitionEnd:a,transition:s}=n,i=Ht(n,cn);for(const e in i){let t=i[e];if(Array.isArray(t)){t=t[d?t.length-1:0]}null!==t&&(r[e]=t)}for(const e in a)r[e]=a[e]})}return r}const mn={useVisualState:dn({scrapeMotionValuesFromProps:an,createRenderState:$t,onMount:(e,t,n)=>{let{renderState:a,latestValues:r}=n;be.read(()=>{try{a.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(Zd){a.dimensions={x:0,y:0,width:0,height:0}}}),be.render(()=>{Xt(a,r,{enableHardwareAcceleration:!1},Kt(t.tagName),e.transformTemplate),tn(t,a)})}})},hn={useVisualState:dn({scrapeMotionValuesFromProps:nn,createRenderState:It})};function pn(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,a),()=>e.removeEventListener(t,n)}const fn=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function gn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:{x:e[t+"X"],y:e[t+"Y"]}}}function xn(e,t,n,a){return pn(e,t,(e=>t=>fn(t)&&e(t,gn(t)))(n),a)}const yn=(e,t)=>n=>t(e(n)),vn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(yn)};function bn(e){let t=null;return()=>{const n=()=>{t=null};return null===t&&(t=e,n)}}const wn=bn("dragHorizontal"),jn=bn("dragVertical");function Nn(e){let t=!1;if("y"===e)t=jn();else if("x"===e)t=wn();else{const e=wn(),n=jn();e&&n?t=()=>{e(),n()}:(e&&e(),n&&n())}return t}function kn(){const e=Nn(!0);return!e||(e(),!1)}class Sn{constructor(e){this.isMounted=!1,this.node=e}update(){}}function Cn(e,t){const n="pointer"+(t?"enter":"leave"),a="onHover"+(t?"Start":"End");return xn(e.current,n,(n,r)=>{if("touch"===n.pointerType||kn())return;const s=e.getProps();e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",t),s[a]&&be.update(()=>s[a](n,r))},{passive:!e.getProps()[a]})}const En=(e,t)=>!!t&&(e===t||En(e,t.parentElement));function Pn(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,gn(n))}const An=["root"],Tn=new WeakMap,Mn=new WeakMap,Ln=e=>{const t=Tn.get(e.target);t&&t(e)},Rn=e=>{e.forEach(Ln)};function Dn(e,t,n){const a=function(e){let{root:t}=e,n=Ht(e,An);const a=t||document;Mn.has(a)||Mn.set(a,{});const r=Mn.get(a),s=JSON.stringify(n);return r[s]||(r[s]=new IntersectionObserver(Rn,(0,Ie.A)({root:t},n))),r[s]}(t);return Tn.set(e,n),a.observe(e),()=>{Tn.delete(e),a.unobserve(e)}}const In={some:0,all:1};const _n={inView:{Feature:class extends Sn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:a="some",once:r}=e,s={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof a?a:In[a]};return Dn(this.node.current,s,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,r&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:a}=this.node.getProps(),s=t?n:a;s&&s(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Sn{constructor(){super(...arguments),this.removeStartListeners=xe,this.removeEndListeners=xe,this.removeAccessibleListeners=xe,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),a=xn(window,"pointerup",(e,t)=>{if(!this.checkPressEnd())return;const{onTap:n,onTapCancel:a,globalTapTarget:r}=this.node.getProps();be.update(()=>{r||En(this.node.current,e.target)?n&&n(e,t):a&&a(e,t)})},{passive:!(n.onTap||n.onPointerUp)}),r=xn(window,"pointercancel",(e,t)=>this.cancelPress(e,t),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=vn(a,r),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=pn(this.node.current,"keydown",e=>{if("Enter"!==e.key||this.isPressing)return;this.removeEndListeners(),this.removeEndListeners=pn(this.node.current,"keyup",e=>{"Enter"===e.key&&this.checkPressEnd()&&Pn("up",(e,t)=>{const{onTap:n}=this.node.getProps();n&&be.update(()=>n(e,t))})}),Pn("down",(e,t)=>{this.startPress(e,t)})}),t=pn(this.node.current,"blur",()=>{this.isPressing&&Pn("cancel",(e,t)=>this.cancelPress(e,t))});this.removeAccessibleListeners=vn(e,t)}}startPress(e,t){this.isPressing=!0;const{onTapStart:n,whileTap:a}=this.node.getProps();a&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&be.update(()=>n(e,t))}checkPressEnd(){this.removeEndListeners(),this.isPressing=!1;return this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!kn()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&be.update(()=>n(e,t))}mount(){const e=this.node.getProps(),t=xn(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=pn(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=vn(t,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends Sn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(Zd){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=vn(pn(this.node.current,"focus",()=>this.onFocus()),pn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends Sn{mount(){this.unmount=vn(Cn(this.node,!0),Cn(this.node,!1))}unmount(){}}}};function On(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let a=0;a<n;a++)if(t[a]!==e[a])return!1;return!0}function Fn(e,t,n){const a=e.getProps();return rn(a,t,void 0!==n?n:a.custom,function(e){const t={};return e.values.forEach((e,n)=>t[n]=e.get()),t}(e),function(e){const t={};return e.values.forEach((e,n)=>t[n]=e.getVelocity()),t}(e))}const zn=e=>1e3*e,Vn=e=>e/1e3,Bn=!1,Un=e=>Array.isArray(e)&&"number"===typeof e[0];function Hn(e){return Boolean(!e||"string"===typeof e&&Gn[e]||Un(e)||Array.isArray(e)&&e.every(Hn))}const Wn=e=>{let[t,n,a,r]=e;return"cubic-bezier(".concat(t,", ").concat(n,", ").concat(a,", ").concat(r,")")},Gn={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Wn([0,.65,.55,1]),circOut:Wn([.55,0,1,.45]),backIn:Wn([.31,.01,.66,-.59]),backOut:Wn([.33,1.53,.69,.99])};function qn(e){if(e)return Un(e)?Wn(e):Array.isArray(e)?e.map(qn):Gn[e]}const Yn=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function Xn(e,t,n,a){if(e===t&&n===a)return xe;const r=t=>function(e,t,n,a,r){let s,i,o=0;do{i=t+(n-t)/2,s=Yn(i,a,r)-e,s>0?n=i:t=i}while(Math.abs(s)>1e-7&&++o<12);return i}(t,0,1,e,n);return e=>0===e||1===e?e:Yn(r(e),t,a)}const $n=Xn(.42,0,1,1),Kn=Xn(0,0,.58,1),Jn=Xn(.42,0,.58,1),Qn=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Zn=e=>t=>1-e(1-t),ea=e=>1-Math.sin(Math.acos(e)),ta=Zn(ea),na=Qn(ea),aa=Xn(.33,1.53,.69,.99),ra=Zn(aa),sa=Qn(ra),ia={linear:xe,easeIn:$n,easeInOut:Jn,easeOut:Kn,circIn:ea,circInOut:na,circOut:ta,backIn:ra,backInOut:sa,backOut:aa,anticipate:e=>(e*=2)<1?.5*ra(e):.5*(2-Math.pow(2,-10*(e-1)))},oa=e=>{if(Array.isArray(e)){Le(4===e.length,"Cubic bezier arrays must contain four numerical values.");const[t,n,a,r]=e;return Xn(t,n,a,r)}return"string"===typeof e?(Le(void 0!==ia[e],"Invalid easing type '".concat(e,"'")),ia[e]):e},la=(e,t)=>n=>Boolean(kt(n)&&Nt.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),ca=(e,t,n)=>a=>{if(!kt(a))return a;const[r,s,i,o]=a.match(wt);return{[e]:parseFloat(r),[t]:parseFloat(s),[n]:parseFloat(i),alpha:void 0!==o?parseFloat(o):1}},da=(0,Ie.A)((0,Ie.A)({},xt),{},{transform:e=>Math.round((e=>gt(0,255,e))(e))}),ua={test:la("rgb","red"),parse:ca("red","green","blue"),transform:e=>{let{red:t,green:n,blue:a,alpha:r=1}=e;return"rgba("+da.transform(t)+", "+da.transform(n)+", "+da.transform(a)+", "+bt(yt.transform(r))+")"}};const ma={test:la("#"),parse:function(e){let t="",n="",a="",r="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),a=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),a=e.substring(3,4),r=e.substring(4,5),t+=t,n+=n,a+=a,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(a,16),alpha:r?parseInt(r,16)/255:1}},transform:ua.transform},ha={test:la("hsl","hue"),parse:ca("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:a,alpha:r=1}=e;return"hsla("+Math.round(t)+", "+Et.transform(bt(n))+", "+Et.transform(bt(a))+", "+bt(yt.transform(r))+")"}},pa={test:e=>ua.test(e)||ma.test(e)||ha.test(e),parse:e=>ua.test(e)?ua.parse(e):ha.test(e)?ha.parse(e):ma.parse(e),transform:e=>kt(e)?e:e.hasOwnProperty("red")?ua.transform(e):ha.transform(e)},fa=(e,t,n)=>-n*e+n*t+e;function ga(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}const xa=(e,t,n)=>{const a=e*e;return Math.sqrt(Math.max(0,n*(t*t-a)+a))},ya=[ma,ua,ha];function va(e){const t=(n=e,ya.find(e=>e.test(n)));var n;Le(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."));let a=t.parse(e);return t===ha&&(a=function(e){let{hue:t,saturation:n,lightness:a,alpha:r}=e;t/=360,n/=100,a/=100;let s=0,i=0,o=0;if(n){const e=a<.5?a*(1+n):a+n-a*n,r=2*a-e;s=ga(r,e,t+1/3),i=ga(r,e,t),o=ga(r,e,t-1/3)}else s=i=o=a;return{red:Math.round(255*s),green:Math.round(255*i),blue:Math.round(255*o),alpha:r}}(a)),a}const ba=(e,t)=>{const n=va(e),a=va(t),r=(0,Ie.A)({},n);return e=>(r.red=xa(n.red,a.red,e),r.green=xa(n.green,a.green,e),r.blue=xa(n.blue,a.blue,e),r.alpha=fa(n.alpha,a.alpha,e),ua.transform(r))};const wa={regex:/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,countKey:"Vars",token:"${v}",parse:xe},ja={regex:jt,countKey:"Colors",token:"${c}",parse:pa.parse},Na={regex:wt,countKey:"Numbers",token:"${n}",parse:xt.parse};function ka(e,t){let{regex:n,countKey:a,token:r,parse:s}=t;const i=e.tokenised.match(n);i&&(e["num"+a]=i.length,e.tokenised=e.tokenised.replace(n,r),e.values.push(...i.map(s)))}function Sa(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&ka(n,wa),ka(n,ja),ka(n,Na),n}function Ca(e){return Sa(e).values}function Ea(e){const{values:t,numColors:n,numVars:a,tokenised:r}=Sa(e),s=t.length;return e=>{let t=r;for(let r=0;r<s;r++)t=r<a?t.replace(wa.token,e[r]):r<a+n?t.replace(ja.token,pa.transform(e[r])):t.replace(Na.token,bt(e[r]));return t}}const Pa=e=>"number"===typeof e?0:e;const Aa={test:function(e){var t,n;return isNaN(e)&&kt(e)&&((null===(t=e.match(wt))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(jt))||void 0===n?void 0:n.length)||0)>0},parse:Ca,createTransformer:Ea,getAnimatableNone:function(e){const t=Ca(e);return Ea(e)(t.map(Pa))}},Ta=(e,t)=>n=>"".concat(n>0?t:e);function Ma(e,t){return"number"===typeof e?n=>fa(e,t,n):pa.test(e)?ba(e,t):e.startsWith("var(")?Ta(e,t):Da(e,t)}const La=(e,t)=>{const n=[...e],a=n.length,r=e.map((e,n)=>Ma(e,t[n]));return e=>{for(let t=0;t<a;t++)n[t]=r[t](e);return n}},Ra=(e,t)=>{const n=(0,Ie.A)((0,Ie.A)({},e),t),a={};for(const r in n)void 0!==e[r]&&void 0!==t[r]&&(a[r]=Ma(e[r],t[r]));return e=>{for(const t in a)n[t]=a[t](e);return n}},Da=(e,t)=>{const n=Aa.createTransformer(t),a=Sa(e),r=Sa(t);return a.numVars===r.numVars&&a.numColors===r.numColors&&a.numNumbers>=r.numNumbers?vn(La(a.values,r.values),n):(Me(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.")),Ta(e,t))},Ia=(e,t,n)=>{const a=t-e;return 0===a?1:(n-e)/a},_a=(e,t)=>n=>fa(e,t,n);function Oa(e,t,n){const a=[],r=n||("number"===typeof(s=e[0])?_a:"string"===typeof s?pa.test(s)?ba:Da:Array.isArray(s)?La:"object"===typeof s?Ra:_a);var s;const i=e.length-1;for(let o=0;o<i;o++){let n=r(e[o],e[o+1]);if(t){const e=Array.isArray(t)?t[o]||xe:t;n=vn(e,n)}a.push(n)}return a}function Fa(e,t){let{clamp:n=!0,ease:a,mixer:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=e.length;if(Le(s===t.length,"Both input and output ranges must be the same length"),1===s)return()=>t[0];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const i=Oa(t,a,r),o=i.length,l=t=>{let n=0;if(o>1)for(;n<e.length-2&&!(t<e[n+1]);n++);const a=Ia(e[n],e[n+1],t);return i[n](a)};return n?t=>l(gt(e[0],e[s-1],t)):l}function za(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let a=1;a<=t;a++){const r=Ia(0,t,a);e.push(fa(n,1,r))}}(t,e.length-1),t}function Va(e){let{duration:t=300,keyframes:n,times:a,ease:r="easeInOut"}=e;const s=(e=>Array.isArray(e)&&"number"!==typeof e[0])(r)?r.map(oa):oa(r),i={done:!1,value:n[0]},o=function(e,t){return e.map(e=>e*t)}(a&&a.length===n.length?a:za(n),t),l=Fa(o,n,{ease:Array.isArray(s)?s:(c=n,d=s,c.map(()=>d||Jn).splice(0,c.length-1))});var c,d;return{calculatedDuration:t,next:e=>(i.value=l(e),i.done=e>=t,i)}}function Ba(e,t){return t?e*(1e3/t):0}function Ua(e,t,n){const a=Math.max(t-5,0);return Ba(n-e(a),t-a)}const Ha=.001;function Wa(e){let t,n,{duration:a=800,bounce:r=.25,velocity:s=0,mass:i=1}=e;Me(a<=zn(10),"Spring duration must be 10 seconds or less");let o=1-r;o=gt(.05,1,o),a=gt(.01,10,Vn(a)),o<1?(t=e=>{const t=e*o,n=t*a,r=t-s,i=qa(e,o),l=Math.exp(-n);return Ha-r/i*l},n=e=>{const n=e*o*a,r=n*s+s,i=Math.pow(o,2)*Math.pow(e,2)*a,l=Math.exp(-n),c=qa(Math.pow(e,2),o);return(-t(e)+Ha>0?-1:1)*((r-i)*l)/c}):(t=e=>Math.exp(-e*a)*((e-s)*a+1)-.001,n=e=>Math.exp(-e*a)*(a*a*(s-e)));const l=function(e,t,n){let a=n;for(let r=1;r<Ga;r++)a-=e(a)/t(a);return a}(t,n,5/a);if(a=zn(a),isNaN(l))return{stiffness:100,damping:10,duration:a};{const e=Math.pow(l,2)*i;return{stiffness:e,damping:2*o*Math.sqrt(i*e),duration:a}}}const Ga=12;function qa(e,t){return e*Math.sqrt(1-t*t)}const Ya=["keyframes","restDelta","restSpeed"],Xa=["duration","bounce"],$a=["stiffness","damping","mass"];function Ka(e,t){return t.some(t=>void 0!==e[t])}function Ja(e){let{keyframes:t,restDelta:n,restSpeed:a}=e,r=Ht(e,Ya);const s=t[0],i=t[t.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:d,duration:u,velocity:m,isResolvedFromDuration:h}=function(e){let t=(0,Ie.A)({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!Ka(e,$a)&&Ka(e,Xa)){const n=Wa(e);t=(0,Ie.A)((0,Ie.A)((0,Ie.A)({},t),n),{},{mass:1}),t.isResolvedFromDuration=!0}return t}((0,Ie.A)((0,Ie.A)({},r),{},{velocity:-Vn(r.velocity||0)})),p=m||0,f=c/(2*Math.sqrt(l*d)),g=i-s,x=Vn(Math.sqrt(l/d)),y=Math.abs(g)<5;let v;if(a||(a=y?.01:2),n||(n=y?.005:.5),f<1){const e=qa(x,f);v=t=>{const n=Math.exp(-f*x*t);return i-n*((p+f*x*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===f)v=e=>i-Math.exp(-x*e)*(g+(p+x*g)*e);else{const e=x*Math.sqrt(f*f-1);v=t=>{const n=Math.exp(-f*x*t),a=Math.min(e*t,300);return i-n*((p+f*x*g)*Math.sinh(a)+e*g*Math.cosh(a))/e}}return{calculatedDuration:h&&u||null,next:e=>{const t=v(e);if(h)o.done=e>=u;else{let r=p;0!==e&&(r=f<1?Ua(v,e,t):0);const s=Math.abs(r)<=a,l=Math.abs(i-t)<=n;o.done=s&&l}return o.value=o.done?i:t,o}}}function Qa(e){let{keyframes:t,velocity:n=0,power:a=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}=e;const m=t[0],h={done:!1,value:m},p=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let f=a*n;const g=m+f,x=void 0===o?g:o(g);x!==g&&(f=x-m);const y=e=>-f*Math.exp(-e/r),v=e=>x+y(e),b=e=>{const t=y(e),n=v(e);h.done=Math.abs(t)<=d,h.value=h.done?x:n};let w,j;const N=e=>{var t;(t=h.value,void 0!==l&&t<l||void 0!==c&&t>c)&&(w=e,j=Ja({keyframes:[h.value,p(h.value)],velocity:Ua(v,e,h.value),damping:s,stiffness:i,restDelta:d,restSpeed:u}))};return N(0),{calculatedDuration:null,next:e=>{let t=!1;return j||void 0!==w||(t=!0,b(e),N(e)),void 0!==w&&e>w?j.next(e-w):(!t&&b(e),h)}}}const Za=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:()=>be.update(t,!0),stop:()=>we(t),now:()=>je.isProcessing?je.timestamp:performance.now()}};function er(e){let t=0;let n=e.next(t);for(;!n.done&&t<2e4;)t+=50,n=e.next(t);return t>=2e4?1/0:t}const tr=["autoplay","delay","driver","keyframes","type","repeat","repeatDelay","repeatType","onPlay","onStop","onComplete","onUpdate"],nr={decay:Qa,inertia:Qa,tween:Va,keyframes:Va,spring:Ja};function ar(e){let t,n,{autoplay:a=!0,delay:r=0,driver:s=Za,keyframes:i,type:o="keyframes",repeat:l=0,repeatDelay:c=0,repeatType:d="loop",onPlay:u,onStop:m,onComplete:h,onUpdate:p}=e,f=Ht(e,tr),g=1,x=!1;const y=()=>{n=new Promise(e=>{t=e})};let v;y();const b=nr[o]||Va;let w;b!==Va&&"number"!==typeof i[0]&&(w=Fa([0,100],i,{clamp:!1}),i=[0,100]);const j=b((0,Ie.A)((0,Ie.A)({},f),{},{keyframes:i}));let N;"mirror"===d&&(N=b((0,Ie.A)((0,Ie.A)({},f),{},{keyframes:[...i].reverse(),velocity:-(f.velocity||0)})));let k="idle",S=null,C=null,E=null;null===j.calculatedDuration&&l&&(j.calculatedDuration=er(j));const{calculatedDuration:P}=j;let A=1/0,T=1/0;null!==P&&(A=P+c,T=A*(l+1)-c);let M=0;const L=e=>{if(null===C)return;g>0&&(C=Math.min(C,e)),g<0&&(C=Math.min(e-T/g,C)),M=null!==S?S:Math.round(e-C)*g;const t=M-r*(g>=0?1:-1),n=g>=0?t<0:t>T;M=Math.max(t,0),"finished"===k&&null===S&&(M=T);let a=M,s=j;if(l){const e=Math.min(M,T)/A;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,l+1);Boolean(t%2)&&("reverse"===d?(n=1-n,c&&(n-=c/A)):"mirror"===d&&(s=N)),a=gt(0,1,n)*A}const o=n?{done:!1,value:i[0]}:s.next(a);w&&(o.value=w(o.value));let{done:u}=o;n||null===P||(u=g>=0?M>=T:M<=0);const m=null===S&&("finished"===k||"running"===k&&u);return p&&p(o.value),m&&I(),o},R=()=>{v&&v.stop(),v=void 0},D=()=>{k="idle",R(),t(),y(),C=E=null},I=()=>{k="finished",h&&h(),R(),t()},_=()=>{if(x)return;v||(v=s(L));const e=v.now();u&&u(),null!==S?C=e-S:C&&"finished"!==k||(C=e),"finished"===k&&y(),E=C,S=null,k="running",v.start()};a&&_();const O={then:(e,t)=>n.then(e,t),get time(){return Vn(M)},set time(e){e=zn(e),M=e,null===S&&v&&0!==g?C=v.now()-e/g:S=e},get duration(){const e=null===j.calculatedDuration?er(j):j.calculatedDuration;return Vn(e)},get speed(){return g},set speed(e){e!==g&&v&&(g=e,O.time=Vn(M))},get state(){return k},play:_,pause:()=>{k="paused",S=M},stop:()=>{x=!0,"idle"!==k&&(k="idle",m&&m(),D())},cancel:()=>{null!==E&&L(E),D()},complete:()=>{k="finished"},sample:e=>(C=0,L(e))};return O}const rr=["onUpdate","onComplete"],sr=function(e){let t;return()=>(void 0===t&&(t=e()),t)}(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ir=new Set(["opacity","clipPath","filter","transform","backgroundColor"]);function or(e,t,n){let{onUpdate:a,onComplete:r}=n,s=Ht(n,rr);if(!(sr()&&ir.has(t)&&!s.repeatDelay&&"mirror"!==s.repeatType&&0!==s.damping&&"inertia"!==s.type))return!1;let i,o,l=!1,c=!1;const d=()=>{o=new Promise(e=>{i=e})};d();let{keyframes:u,duration:m=300,ease:h,times:p}=s;if(((e,t)=>"spring"===t.type||"backgroundColor"===e||!Hn(t.ease))(t,s)){const e=ar((0,Ie.A)((0,Ie.A)({},s),{},{repeat:0,delay:0}));let t={done:!1,value:u[0]};const n=[];let a=0;for(;!t.done&&a<2e4;)t=e.sample(a),n.push(t.value),a+=10;p=void 0,u=n,m=a-10,h="linear"}const f=function(e,t,n){let{delay:a=0,duration:r,repeat:s=0,repeatType:i="loop",ease:o,times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const c={[t]:n};l&&(c.offset=l);const d=qn(o);return Array.isArray(d)&&(c.easing=d),e.animate(c,{delay:a,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:"reverse"===i?"alternate":"normal"})}(e.owner.current,t,u,(0,Ie.A)((0,Ie.A)({},s),{},{duration:m,ease:h,times:p})),g=()=>{c=!1,f.cancel()},x=()=>{c=!0,be.update(g),i(),d()};f.onfinish=()=>{c||(e.set(function(e,t){let{repeat:n,repeatType:a="loop"}=t;return e[n&&"loop"!==a&&n%2===1?0:e.length-1]}(u,s)),r&&r(),x())};return{then:(e,t)=>o.then(e,t),attachTimeline:e=>(f.timeline=e,f.onfinish=null,xe),get time(){return Vn(f.currentTime||0)},set time(e){f.currentTime=zn(e)},get speed(){return f.playbackRate},set speed(e){f.playbackRate=e},get duration(){return Vn(m)},play:()=>{l||(f.play(),we(g))},pause:()=>f.pause(),stop:()=>{if(l=!0,"idle"===f.playState)return;const{currentTime:t}=f;if(t){const n=ar((0,Ie.A)((0,Ie.A)({},s),{},{autoplay:!1}));e.setWithVelocity(n.sample(t-10).value,n.sample(t).value,10)}x()},complete:()=>{c||f.finish()},cancel:x}}const lr={type:"spring",stiffness:500,damping:25,restSpeed:10},cr={type:"keyframes",duration:.8},dr={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ur=(e,t)=>{let{keyframes:n}=t;return n.length>2?cr:ot.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:lr:dr},mr=(e,t)=>"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!Aa.test(t)&&"0"!==t||t.startsWith("url("))),hr=new Set(["brightness","contrast","saturate","opacity"]);function pr(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[a]=n.match(wt)||[];if(!a)return e;const r=n.replace(a,"");let s=hr.has(t)?1:0;return a!==n&&(s*=100),t+"("+s+r+")"}const fr=/([a-z-]*)\(.*?\)/g,gr=(0,Ie.A)((0,Ie.A)({},Aa),{},{getAnimatableNone:e=>{const t=e.match(fr);return t?t.map(pr).join(" "):e}}),xr=(0,Ie.A)((0,Ie.A)({},Rt),{},{color:pa,backgroundColor:pa,outlineColor:pa,fill:pa,stroke:pa,borderColor:pa,borderTopColor:pa,borderRightColor:pa,borderBottomColor:pa,borderLeftColor:pa,filter:gr,WebkitFilter:gr}),yr=e=>xr[e];function vr(e,t){let n=yr(e);return n!==gr&&(n=Aa),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const br=e=>/^0[^.\s]+$/.test(e);function wr(e){return"number"===typeof e?0===e:null!==e?"none"===e||"0"===e||br(e):void 0}const jr=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];function Nr(e,t){return e[t]||e.default||e}const kr=!1,Sr=function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return r=>{const s=Nr(a,e)||{},i=s.delay||a.delay||0;let{elapsed:o=0}=a;o-=zn(i);const l=function(e,t,n,a){const r=mr(t,n);let s;s=Array.isArray(n)?[...n]:[null,n];const i=void 0!==a.from?a.from:e.get();let o;const l=[];for(let c=0;c<s.length;c++)null===s[c]&&(s[c]=0===c?i:s[c-1]),wr(s[c])&&l.push(c),"string"===typeof s[c]&&"none"!==s[c]&&"0"!==s[c]&&(o=s[c]);if(r&&l.length&&o)for(let c=0;c<l.length;c++)s[l[c]]=vr(t,o);return s}(t,e,n,s),c=l[0],d=l[l.length-1],u=mr(e,c),m=mr(e,d);Me(u===m,"You are trying to animate ".concat(e,' from "').concat(c,'" to "').concat(d,'". ').concat(c," is not an animatable value - to enable this animation set ").concat(c," to a value animatable to ").concat(d," via the `style` property."));let h=(0,Ie.A)((0,Ie.A)({keyframes:l,velocity:t.getVelocity(),ease:"easeOut"},s),{},{delay:-o,onUpdate:e=>{t.set(e),s.onUpdate&&s.onUpdate(e)},onComplete:()=>{r(),s.onComplete&&s.onComplete()}});if(function(e){let{when:t,delay:n,delayChildren:a,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d}=e,u=Ht(e,jr);return!!Object.keys(u).length}(s)||(h=(0,Ie.A)((0,Ie.A)({},h),ur(e,h))),h.duration&&(h.duration=zn(h.duration)),h.repeatDelay&&(h.repeatDelay=zn(h.repeatDelay)),!u||!m||Bn||!1===s.type||kr)return function(e){let{keyframes:t,delay:n,onUpdate:a,onComplete:r}=e;const s=()=>(a&&a(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:xe,pause:xe,stop:xe,then:e=>(e(),Promise.resolve()),cancel:xe,complete:xe});return n?ar({keyframes:[0,1],duration:0,delay:n,onComplete:s}):s()}(Bn?(0,Ie.A)((0,Ie.A)({},h),{},{delay:0}):h);if(!a.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const n=or(t,e,h);if(n)return n}return ar(h)}};function Cr(e){return Boolean(ct(e)&&e.add)}const Er=e=>/^\-?\d*\.?\d+$/.test(e);function Pr(e,t){-1===e.indexOf(t)&&e.push(t)}function Ar(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Tr{constructor(){this.subscriptions=[]}add(e){return Pr(this.subscriptions,e),()=>Ar(this.subscriptions,e)}notify(e,t,n){const a=this.subscriptions.length;if(a)if(1===a)this.subscriptions[0](e,t,n);else for(let r=0;r<a;r++){const a=this.subscriptions[r];a&&a(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Mr={current:void 0};class Lr{constructor(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var a;this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.prev=t.current,t.current=e;const{delta:a,timestamp:r}=je;t.lastUpdated!==r&&(t.timeDelta=a,t.lastUpdated=r,be.postRender(t.scheduleVelocityCheck)),t.prev!==t.current&&t.events.change&&t.events.change.notify(t.current),t.events.velocityChange&&t.events.velocityChange.notify(t.getVelocity()),n&&t.events.renderRequest&&t.events.renderRequest.notify(t.current)},this.scheduleVelocityCheck=()=>be.postRender(this.velocityCheck),this.velocityCheck=e=>{let{timestamp:t}=e;t!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=(a=this.current,!isNaN(parseFloat(a))),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Tr);const n=this.events[e].add(t);return"change"===e?()=>{n(),be.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=e,this.timeDelta=n}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Mr.current&&Mr.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Ba(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Rr(e,t){return new Lr(e,t)}const Dr=e=>t=>t.test(e),Ir=[xt,Pt,Et,Ct,Tt,At,{test:e=>"auto"===e,parse:e=>e}],_r=e=>Ir.find(Dr(e)),Or=[...Ir,pa,Aa],Fr=e=>Or.find(Dr(e)),zr=["transitionEnd","transition"];function Vr(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Rr(n))}function Br(e,t){const n=Fn(e,t);let a=n?e.makeTargetAnimatable(n,!1):{},{transitionEnd:r={},transition:s={}}=a,i=Ht(a,zr);i=(0,Ie.A)((0,Ie.A)({},i),r);for(const o in i){Vr(e,o,on(i[o]))}}function Ur(e,t){if(!t)return;return(t[e]||t.default||t).from}const Hr=["transition","transitionEnd"];function Wr(e,t){let{protectedKeys:n,needsAnimating:a}=e;const r=n.hasOwnProperty(t)&&!0!==a[t];return a[t]=!1,r}function Gr(e,t){const n=e.get();if(!Array.isArray(t))return n!==t;for(let a=0;a<t.length;a++)if(t[a]!==n)return!0}function qr(e,t){let{delay:n=0,transitionOverride:a,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=e.makeTargetAnimatable(t),{transition:i=e.getDefaultTransition(),transitionEnd:o}=s,l=Ht(s,Hr);const c=e.getValue("willChange");a&&(i=a);const d=[],u=r&&e.animationState&&e.animationState.getState()[r];for(const m in l){const t=e.getValue(m),a=l[m];if(!t||void 0===a||u&&Wr(u,m))continue;const r=(0,Ie.A)({delay:n,elapsed:0},Nr(i||{},m));if(window.HandoffAppearAnimations){const n=e.getProps()[Ve];if(n){const e=window.HandoffAppearAnimations(n,m,t,be);null!==e&&(r.elapsed=e,r.isHandoff=!0)}}let s=!r.isHandoff&&!Gr(t,a);if("spring"===r.type&&(t.getVelocity()||r.velocity)&&(s=!1),t.animation&&(s=!1),s)continue;t.start(Sr(m,t,a,e.shouldReduceMotion&&ot.has(m)?{type:!1}:r));const o=t.animation;Cr(c)&&(c.add(m),o.then(()=>c.remove(m))),d.push(o)}return o&&Promise.all(d).then(()=>{o&&Br(e,o)}),d}function Yr(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=Fn(e,t,n.custom);let{transition:r=e.getDefaultTransition()||{}}=a||{};n.transitionOverride&&(r=n.transitionOverride);const s=a?()=>Promise.all(qr(e,a,n)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:s=0,staggerChildren:i,staggerDirection:o}=r;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5?arguments[5]:void 0;const i=[],o=(e.variantChildren.size-1)*a,l=1===r?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*a}:function(){return o-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*a};return Array.from(e.variantChildren).sort(Xr).forEach((e,a)=>{e.notify("AnimationStart",t),i.push(Yr(e,t,(0,Ie.A)((0,Ie.A)({},s),{},{delay:n+l(a)})).then(()=>e.notify("AnimationComplete",t)))}),Promise.all(i)}(e,t,s+a,i,o,n)}:()=>Promise.resolve(),{when:o}=r;if(o){const[e,t]="beforeChildren"===o?[s,i]:[i,s];return e().then(()=>t())}return Promise.all([s(),i(n.delay)])}function Xr(e,t){return e.sortNodePosition(t)}const $r=["transition","transitionEnd"],Kr=[...We].reverse(),Jr=We.length;function Qr(e){return t=>Promise.all(t.map(t=>{let{animation:n,options:a}=t;return function(e,t){let n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const r=t.map(t=>Yr(e,t,a));n=Promise.all(r)}else if("string"===typeof t)n=Yr(e,t,a);else{const r="function"===typeof t?Fn(e,t,a.custom):t;n=Promise.all(qr(e,r,a))}return n.then(()=>e.notify("AnimationComplete",t))}(e,n,a)}))}function Zr(e){let t=Qr(e);const n={animate:ts(!0),whileInView:ts(),whileHover:ts(),whileTap:ts(),whileDrag:ts(),whileFocus:ts(),exit:ts()};let a=!0;const r=(t,n)=>{const a=Fn(e,n);if(a){const{transition:e,transitionEnd:n}=a,r=Ht(a,$r);t=(0,Ie.A)((0,Ie.A)((0,Ie.A)({},t),r),n)}return t};function s(s,i){const o=e.getProps(),l=e.getVariantContext(!0)||{},c=[],d=new Set;let u={},m=1/0;for(let t=0;t<Jr;t++){const h=Kr[t],p=n[h],f=void 0!==o[h]?o[h]:l[h],g=Ue(f),x=h===i?p.isActive:null;!1===x&&(m=t);let y=f===l[h]&&f!==o[h]&&g;if(y&&a&&e.manuallyAnimateOnMount&&(y=!1),p.protectedKeys=(0,Ie.A)({},u),!p.isActive&&null===x||!f&&!p.prevProp||He(f)||"boolean"===typeof f)continue;let v=es(p.prevProp,f)||h===i&&p.isActive&&!y&&g||t>m&&g,b=!1;const w=Array.isArray(f)?f:[f];let j=w.reduce(r,{});!1===x&&(j={});const{prevResolvedValues:N={}}=p,k=(0,Ie.A)((0,Ie.A)({},N),j),S=e=>{v=!0,d.has(e)&&(b=!0,d.delete(e)),p.needsAnimating[e]=!0};for(const e in k){const t=j[e],n=N[e];if(u.hasOwnProperty(e))continue;let a=!1;a=sn(t)&&sn(n)?!On(t,n):t!==n,a?void 0!==t?S(e):d.add(e):void 0!==t&&d.has(e)?S(e):p.protectedKeys[e]=!0}p.prevProp=f,p.prevResolvedValues=j,p.isActive&&(u=(0,Ie.A)((0,Ie.A)({},u),j)),a&&e.blockInitialAnimation&&(v=!1),!v||y&&!b||c.push(...w.map(e=>({animation:e,options:(0,Ie.A)({type:h},s)})))}if(d.size){const t={};d.forEach(n=>{const a=e.getBaseTarget(n);void 0!==a&&(t[n]=a)}),c.push({animation:t})}let h=Boolean(c.length);return!a||!1!==o.initial&&o.initial!==o.animate||e.manuallyAnimateOnMount||(h=!1),a=!1,h?t(c):Promise.resolve()}return{animateChanges:s,setActive:function(t,a,r){var i;if(n[t].isActive===a)return Promise.resolve();null===(i=e.variantChildren)||void 0===i||i.forEach(e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,a)}),n[t].isActive=a;const o=s(r,t);for(const e in n)n[e].protectedKeys={};return o},setAnimateFunction:function(n){t=n(e)},getState:()=>n}}function es(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!On(t,e)}function ts(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}let ns=0;const as={animation:{Feature:class extends Sn{constructor(e){super(e),e.animationState||(e.animationState=Zr(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),He(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}},exit:{Feature:class extends Sn{constructor(){super(...arguments),this.id=ns++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:n}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===a)return;const r=this.node.animationState.setActive("exit",!e,{custom:null!==n&&void 0!==n?n:this.node.getProps().custom});t&&!e&&r.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}},rs=(e,t)=>Math.abs(e-t);class ss{constructor(e,t){let{transformPagePoint:n,contextWindow:a,dragSnapToOrigin:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=ls(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=rs(e.x,t.x),a=rs(e.y,t.y);return Math.sqrt(n**2+a**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:a}=e,{timestamp:r}=je;this.history.push((0,Ie.A)((0,Ie.A)({},a),{},{timestamp:r}));const{onStart:s,onMove:i}=this.handlers;t||(s&&s(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),i&&i(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=is(t,this.transformPagePoint),be.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:a,resumeAnimation:r}=this.handlers;if(this.dragSnapToOrigin&&r&&r(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const s=ls("pointercancel"===e.type?this.lastMoveEventInfo:is(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,s),a&&a(e,s)},!fn(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=n,this.contextWindow=a||window;const s=is(gn(e),this.transformPagePoint),{point:i}=s,{timestamp:o}=je;this.history=[(0,Ie.A)((0,Ie.A)({},i),{},{timestamp:o})];const{onSessionStart:l}=t;l&&l(e,ls(s,this.history)),this.removeListeners=vn(xn(this.contextWindow,"pointermove",this.handlePointerMove),xn(this.contextWindow,"pointerup",this.handlePointerUp),xn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),we(this.updatePoint)}}function is(e,t){return t?{point:t(e.point)}:e}function os(e,t){return{x:e.x-t.x,y:e.y-t.y}}function ls(e,t){let{point:n}=e;return{point:n,delta:os(n,ds(t)),offset:os(n,cs(t)),velocity:us(t,.1)}}function cs(e){return e[0]}function ds(e){return e[e.length-1]}function us(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,a=null;const r=ds(e);for(;n>=0&&(a=e[n],!(r.timestamp-a.timestamp>zn(t)));)n--;if(!a)return{x:0,y:0};const s=Vn(r.timestamp-a.timestamp);if(0===s)return{x:0,y:0};const i={x:(r.x-a.x)/s,y:(r.y-a.y)/s};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function ms(e){return e.max-e.min}function hs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(e-t)<=n}function ps(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=a,e.originPoint=fa(t.min,t.max,e.origin),e.scale=ms(n)/ms(t),(hs(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=fa(n.min,n.max,e.origin)-e.originPoint,(hs(e.translate)||isNaN(e.translate))&&(e.translate=0)}function fs(e,t,n,a){ps(e.x,t.x,n.x,a?a.originX:void 0),ps(e.y,t.y,n.y,a?a.originY:void 0)}function gs(e,t,n){e.min=n.min+t.min,e.max=e.min+ms(t)}function xs(e,t,n){e.min=t.min-n.min,e.max=e.min+ms(t)}function ys(e,t,n){xs(e.x,t.x,n.x),xs(e.y,t.y,n.y)}function vs(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function bs(e,t){let n=t.min-e.min,a=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,a]=[a,n]),{min:n,max:a}}const ws=.35;function js(e,t,n){return{min:Ns(e,t),max:Ns(e,n)}}function Ns(e,t){return"number"===typeof e?e:e[t]||0}const ks=()=>({x:{min:0,max:0},y:{min:0,max:0}});function Ss(e){return[e("x"),e("y")]}function Cs(e){let{top:t,left:n,right:a,bottom:r}=e;return{x:{min:n,max:a},y:{min:t,max:r}}}function Es(e){return void 0===e||1===e}function Ps(e){let{scale:t,scaleX:n,scaleY:a}=e;return!Es(t)||!Es(n)||!Es(a)}function As(e){return Ps(e)||Ts(e)||e.z||e.rotate||e.rotateX||e.rotateY}function Ts(e){return Ms(e.x)||Ms(e.y)}function Ms(e){return e&&"0%"!==e}function Ls(e,t,n){return n+t*(e-n)}function Rs(e,t,n,a,r){return void 0!==r&&(e=Ls(e,r,a)),Ls(e,n,a)+t}function Ds(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;e.min=Rs(e.min,t,n,a,r),e.max=Rs(e.max,t,n,a,r)}function Is(e,t){let{x:n,y:a}=t;Ds(e.x,n.translate,n.scale,n.originPoint),Ds(e.y,a.translate,a.scale,a.originPoint)}function _s(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Os(e,t){e.min=e.min+t,e.max=e.max+t}function Fs(e,t,n){let[a,r,s]=n;const i=void 0!==t[s]?t[s]:.5,o=fa(e.min,e.max,i);Ds(e,t[a],t[r],o,t.scale)}const zs=["x","scaleX","originX"],Vs=["y","scaleY","originY"];function Bs(e,t){Fs(e.x,t,zs),Fs(e.y,t,Vs)}function Us(e,t){return Cs(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),a=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:a.y,right:a.x}}(e.getBoundingClientRect(),t))}const Hs=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},Ws=new WeakMap;class Gs{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e){let{snapToCursor:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:a}=this.getProps();this.panSession=new ss(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(gn(e,"page").point)},onStart:(e,t)=>{const{drag:n,dragPropagation:a,onDragStart:r}=this.getProps();if(n&&!a&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Nn(n),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ss(e=>{let t=this.getAxisMotionValue(e).get()||0;if(Et.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const a=n.layout.layoutBox[e];if(a){t=ms(a)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),r&&be.update(()=>r(e,t),!1,!0);const{animationState:s}=this.visualElement;s&&s.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:a,onDirectionLock:r,onDrag:s}=this.getProps();if(!n&&!this.openGlobalLock)return;const{offset:i}=t;if(a&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(i),void(null!==this.currentDirection&&r&&r(this.currentDirection));this.updateAxis("x",t.point,i),this.updateAxis("y",t.point,i),this.visualElement.render(),s&&s(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>Ss(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:a,contextWindow:Hs(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:a}=t;this.startAnimation(a);const{onDragEnd:r}=this.getProps();r&&be.update(()=>r(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:a}=this.getProps();if(!n||!qs(e,a,this.currentDirection))return;const r=this.getAxisMotionValue(e);let s=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(s=function(e,t,n){let{min:a,max:r}=t;return void 0!==a&&e<a?e=n?fa(a,e,n.min):Math.max(e,a):void 0!==r&&e>r&&(e=n?fa(r,e,n.max):Math.min(e,r)),e}(s,this.constraints[e],this.elastic[e])),r.set(s)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,r=this.constraints;t&&Be(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!a)&&function(e,t){let{top:n,left:a,bottom:r,right:s}=t;return{x:vs(e.x,a,s),y:vs(e.y,n,r)}}(a.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ws;return!1===e?e=0:!0===e&&(e=ws),{x:js(e,"left","right"),y:js(e,"top","bottom")}}(n),r!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&Ss(e=>{this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(a.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Be(e))return!1;const n=e.current;Le(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const r=function(e,t,n){const a=Us(e,n),{scroll:r}=t;return r&&(Os(a.x,r.offset.x),Os(a.y,r.offset.y)),a}(n,a.root,this.visualElement.getTransformPagePoint());let s=function(e,t){return{x:bs(e.x,t.x),y:bs(e.y,t.y)}}(a.layout.layoutBox,r);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(s));this.hasMutatedConstraints=!!e,e&&(s=Cs(e))}return s}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:a,dragTransition:r,dragSnapToOrigin:s,onDragTransitionEnd:i}=this.getProps(),o=this.constraints||{},l=Ss(i=>{if(!qs(i,t,this.currentDirection))return;let l=o&&o[i]||{};s&&(l={min:0,max:0});const c=a?200:1e6,d=a?40:1e7,u=(0,Ie.A)((0,Ie.A)({type:"inertia",velocity:n?e[i]:0,bounceStiffness:c,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10},r),l);return this.startAxisValueAnimation(i,u)});return Promise.all(l).then(i)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return n.start(Sr(e,n,0,t))}stopAnimation(){Ss(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ss(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),a=n[t];return a||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Ss(t=>{const{drag:n}=this.getProps();if(!qs(t,n,this.currentDirection))return;const{projection:a}=this.visualElement,r=this.getAxisMotionValue(t);if(a&&a.layout){const{min:n,max:s}=a.layout.layoutBox[t];r.set(e[t]-fa(n,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Be(t)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Ss(e=>{const t=this.getAxisMotionValue(e);if(t){const n=t.get();a[e]=function(e,t){let n=.5;const a=ms(e),r=ms(t);return r>a?n=Ia(t.min,t.max-a,e.min):a>r&&(n=Ia(e.min,e.max-r,t.min)),gt(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ss(t=>{if(!qs(t,e,null))return;const n=this.getAxisMotionValue(t),{min:r,max:s}=this.constraints[t];n.set(fa(r,s,a[t]))})}addListeners(){if(!this.visualElement.current)return;Ws.set(this.visualElement,this);const e=xn(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();Be(e)&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,a=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),t();const r=pn(window,"resize",()=>this.scalePositionWithinConstraints()),s=n.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(Ss(e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))}),this.visualElement.render())});return()=>{r(),e(),a(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:r=!1,dragElastic:s=ws,dragMomentum:i=!0}=e;return(0,Ie.A)((0,Ie.A)({},e),{},{drag:t,dragDirectionLock:n,dragPropagation:a,dragConstraints:r,dragElastic:s,dragMomentum:i})}}function qs(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const Ys=e=>(t,n)=>{e&&be.update(()=>e(t,n))};const Xs={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function $s(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ks={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!Pt.test(e))return e;e=parseFloat(e)}const n=$s(e,t.target.x),a=$s(e,t.target.y);return"".concat(n,"% ").concat(a,"%")}},Js={correct:(e,t)=>{let{treeScale:n,projectionDelta:a}=t;const r=e,s=Aa.parse(e);if(s.length>5)return r;const i=Aa.createTransformer(e),o="number"!==typeof s[0]?1:0,l=a.x.scale*n.x,c=a.y.scale*n.y;s[0+o]/=l,s[1+o]/=c;const d=fa(l,c,.5);return"number"===typeof s[2+o]&&(s[2+o]/=d),"number"===typeof s[3+o]&&(s[3+o]/=d),i(s)}};class Qs extends r.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:a}=this.props,{projection:r}=e;var s;s=ei,Object.assign(st,s),r&&(t.group&&t.group.add(r),n&&n.register&&a&&n.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions((0,Ie.A)((0,Ie.A)({},r.options),{},{onExitComplete:()=>this.safeToRemove()}))),Xs.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:a,isPresent:r}=this.props,s=n.projection;return s?(s.isPresent=r,a||e.layoutDependency!==t||void 0===t?s.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?s.promote():s.relegate()||be.postRender(()=>{const e=s.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:a}=e;a&&(a.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Zs(e){const[t,n]=function(){const e=(0,r.useContext)(ke);if(null===e)return[!0,null];const{isPresent:t,onExitComplete:n,register:a}=e,s=(0,r.useId)();return(0,r.useEffect)(()=>a(s),[]),!t&&n?[!1,()=>n&&n(s)]:[!0]}(),a=(0,r.useContext)(Te);return r.createElement(Qs,(0,Ie.A)((0,Ie.A)({},e),{},{layoutGroup:a,switchLayoutGroup:(0,r.useContext)(Qe),isPresent:t,safeToRemove:n}))}const ei={borderRadius:(0,Ie.A)((0,Ie.A)({},Ks),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:Ks,borderTopRightRadius:Ks,borderBottomLeftRadius:Ks,borderBottomRightRadius:Ks,boxShadow:Js},ti=["TopLeft","TopRight","BottomLeft","BottomRight"],ni=ti.length,ai=e=>"string"===typeof e?parseFloat(e):e,ri=e=>"number"===typeof e||Pt.test(e);function si(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const ii=li(0,.5,ta),oi=li(.5,.95,xe);function li(e,t,n){return a=>a<e?0:a>t?1:n(Ia(e,t,a))}function ci(e,t){e.min=t.min,e.max=t.max}function di(e,t){ci(e.x,t.x),ci(e.y,t.y)}function ui(e,t,n,a,r){return e=Ls(e-=t,1/n,a),void 0!==r&&(e=Ls(e,1/r,a)),e}function mi(e,t,n,a,r){let[s,i,o]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;Et.test(t)&&(t=parseFloat(t),t=fa(i.min,i.max,t/100)-i.min);if("number"!==typeof t)return;let o=fa(s.min,s.max,a);e===s&&(o-=t),e.min=ui(e.min,t,n,o,r),e.max=ui(e.max,t,n,o,r)}(e,t[s],t[i],t[o],t.scale,a,r)}const hi=["x","scaleX","originX"],pi=["y","scaleY","originY"];function fi(e,t,n,a){mi(e.x,t,hi,n?n.x:void 0,a?a.x:void 0),mi(e.y,t,pi,n?n.y:void 0,a?a.y:void 0)}function gi(e){return 0===e.translate&&1===e.scale}function xi(e){return gi(e.x)&&gi(e.y)}function yi(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function vi(e){return ms(e.x)/ms(e.y)}class bi{constructor(){this.members=[]}add(e){Pr(this.members,e),e.scheduleRender()}remove(e){if(Ar(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let a=t;a>=0;a--){const e=this.members[a];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;!1===a&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function wi(e,t,n){let a="";const r=e.x.translate/t.x,s=e.y.translate/t.y;if((r||s)&&(a="translate3d(".concat(r,"px, ").concat(s,"px, 0) ")),1===t.x&&1===t.y||(a+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){const{rotate:e,rotateX:t,rotateY:r}=n;e&&(a+="rotate(".concat(e,"deg) ")),t&&(a+="rotateX(".concat(t,"deg) ")),r&&(a+="rotateY(".concat(r,"deg) "))}const i=e.x.scale*t.x,o=e.y.scale*t.y;return 1===i&&1===o||(a+="scale(".concat(i,", ").concat(o,")")),a||"none"}const ji=(e,t)=>e.depth-t.depth;class Ni{constructor(){this.children=[],this.isDirty=!1}add(e){Pr(this.children,e),this.isDirty=!0}remove(e){Ar(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(ji),this.isDirty=!1,this.children.forEach(e)}}const ki=["","X","Y","Z"],Si={visibility:"hidden"};let Ci=0;const Ei={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Pi(e){let{attachResizeListener:t,defaultParent:n,measureScroll:a,checkIsScrollRoot:r,resetTransform:s}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=Ci++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ei.totalNodes=Ei.resolvedTargetDeltas=Ei.recalculatedProjection=0,this.nodes.forEach(Mi),this.nodes.forEach(Fi),this.nodes.forEach(zi),this.nodes.forEach(Li),function(e){window.MotionDebug&&window.MotionDebug.record(e)}(Ei)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ni)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Tr),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];t&&t.notify(...a)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(this.instance)return;var a;this.isSVG=(a=e)instanceof SVGElement&&"svg"!==a.tagName,this.instance=e;const{layoutId:r,layout:s,visualElement:i}=this.options;if(i&&!i.current&&i.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(s||r)&&(this.isLayoutDirty=!0),t){let n;const a=()=>this.root.updateBlockedByResize=!1;t(e,()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=performance.now(),a=r=>{let{timestamp:s}=r;const i=s-n;i>=t&&(we(a),e(i-t))};return be.read(a,!0),()=>we(a)}(a,250),Xs.hasAnimatedSinceResize&&(Xs.hasAnimatedSinceResize=!1,this.nodes.forEach(Oi))})}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&i&&(r||s)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n,hasRelativeTargetChanged:a,layout:r}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const s=this.options.transition||i.getDefaultTransition()||Gi,{onLayoutAnimationStart:o,onLayoutAnimationComplete:l}=i.getProps(),c=!this.targetLayout||!yi(this.targetLayout,r)||a,d=!n&&a;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||d||n&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,d);const e=(0,Ie.A)((0,Ie.A)({},Nr(s,"layout")),{},{onPlay:o,onComplete:l});(i.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else n||Oi(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,we(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Vi),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let r=0;r<this.path.length;r++){const e=this.path[r];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const a=this.getTransformTemplate();this.prevTransformTemplateValue=a?a(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Di);this.isUpdating||this.nodes.forEach(Ii),this.isUpdating=!1,this.nodes.forEach(_i),this.nodes.forEach(Ai),this.nodes.forEach(Ti),this.clearAllSnapshots();const e=performance.now();je.delta=gt(0,1e3/60,e-je.timestamp),je.timestamp=e,je.isProcessing=!0,Ne.update.process(je),Ne.preRender.process(je),Ne.render.process(je),je.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Ri),this.sharedNodes.forEach(Bi)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,be.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){be.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:r(this.instance),offset:a(this.instance)})}resetTransform(){if(!s)return;const e=this.isLayoutDirty||this.shouldResetTransform,t=this.projectionDelta&&!xi(this.projectionDelta),n=this.getTransformTemplate(),a=n?n(this.latestValues,""):void 0,r=a!==this.prevTransformTemplateValue;e&&(t||As(this.latestValues)||r)&&(s(this.instance,a),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var a;return e&&(n=this.removeTransform(n)),Xi((a=n).x),Xi(a.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};const t=e.measureViewportBox(),{scroll:n}=this.root;return n&&(Os(t.x,n.offset.x),Os(t.y,n.offset.y)),t}removeElementScroll(e){const t={x:{min:0,max:0},y:{min:0,max:0}};di(t,e);for(let n=0;n<this.path.length;n++){const a=this.path[n],{scroll:r,options:s}=a;if(a!==this.root&&r&&s.layoutScroll){if(r.isRoot){di(t,e);const{scroll:n}=this.root;n&&(Os(t.x,-n.offset.x),Os(t.y,-n.offset.y))}Os(t.x,r.offset.x),Os(t.y,r.offset.y)}}return t}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};di(n,e);for(let a=0;a<this.path.length;a++){const e=this.path[a];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&Bs(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),As(e.latestValues)&&Bs(n,e.latestValues)}return As(this.latestValues)&&Bs(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};di(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!As(e.latestValues))continue;Ps(e.latestValues)&&e.updateSnapshot();const a=ks();di(a,e.measurePageBox()),fi(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,a)}return As(this.latestValues)&&fi(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options=(0,Ie.A)((0,Ie.A)((0,Ie.A)({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==je.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const a=Boolean(this.resumingFrom)||this!==n;if(!(e||a&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget))return;const{layout:r,layoutId:s}=this.options;if(this.layout&&(r||s)){if(this.resolvedRelativeTargetAt=je.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},ys(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),di(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var i,o,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),i=this.target,o=this.relativeTarget,l=this.relativeParent.target,gs(i.x,o.x,l.x),gs(i.y,o.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):di(this.target,this.layout.layoutBox),Is(this.target,this.targetDelta)):di(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},ys(this.relativeTargetOrigin,this.target,e.target),di(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ei.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!Ps(this.parent.latestValues)&&!Ts(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let a=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(a=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(a=!1),this.resolvedRelativeTargetAt===je.timestamp&&(a=!1),a)return;const{layout:r,layoutId:s}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!r&&!s)return;di(this.layoutCorrected,this.layout.layoutBox);const i=this.treeScale.x,o=this.treeScale.y;!function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=n.length;if(!r)return;let s,i;t.x=t.y=1;for(let o=0;o<r;o++){s=n[o],i=s.projectionDelta;const r=s.instance;r&&r.style&&"contents"===r.style.display||(a&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Bs(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,Is(e,i)),a&&As(s.latestValues)&&Bs(e,s.latestValues))}t.x=_s(t.x),t.y=_s(t.y)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox);const{target:l}=t;if(!l)return void(this.projectionTransform&&(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionTransform="none",this.scheduleRender()));this.projectionDelta||(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}});const c=this.projectionTransform;fs(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.projectionTransform=wi(this.projectionDelta,this.treeScale),this.projectionTransform===c&&this.treeScale.x===i&&this.treeScale.y===o||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),Ei.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.scheduleRender&&this.options.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,a=n?n.latestValues:{},r=(0,Ie.A)({},this.latestValues),s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const i={x:{min:0,max:0},y:{min:0,max:0}},o=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,d=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(Wi));let u;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,m,h,p,f,g;Ui(s.x,e.x,n),Ui(s.y,e.y,n),this.setTargetDelta(s),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ys(i,this.layout.layoutBox,this.relativeParent.layout.layoutBox),h=this.relativeTarget,p=this.relativeTargetOrigin,f=i,g=n,Hi(h.x,p.x,f.x,g),Hi(h.y,p.y,f.y,g),u&&(l=this.relativeTarget,m=u,l.x.min===m.x.min&&l.x.max===m.x.max&&l.y.min===m.y.min&&l.y.max===m.y.max)&&(this.isProjectionDirty=!1),u||(u={x:{min:0,max:0},y:{min:0,max:0}}),di(u,this.relativeTarget)),o&&(this.animationValues=r,function(e,t,n,a,r,s){r?(e.opacity=fa(0,void 0!==n.opacity?n.opacity:1,ii(a)),e.opacityExit=fa(void 0!==t.opacity?t.opacity:1,0,oi(a))):s&&(e.opacity=fa(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,a));for(let i=0;i<ni;i++){const r="border".concat(ti[i],"Radius");let s=si(t,r),o=si(n,r);void 0===s&&void 0===o||(s||(s=0),o||(o=0),0===s||0===o||ri(s)===ri(o)?(e[r]=Math.max(fa(ai(s),ai(o),a),0),(Et.test(o)||Et.test(s))&&(e[r]+="%")):e[r]=o)}(t.rotate||n.rotate)&&(e.rotate=fa(t.rotate||0,n.rotate||0,a))}(r,a,this.latestValues,n,d,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(we(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=be.update(()=>{Xs.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,n){const a=ct(e)?e:Rr(e);return a.start(Sr("",a,t,n)),a.animation}(0,1e3,(0,Ie.A)((0,Ie.A)({},e),{},{onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:a,latestValues:r}=e;if(t&&n&&a){if(this!==e&&this.layout&&a&&$i(this.options.animationType,this.layout.layoutBox,a.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=ms(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const a=ms(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+a}di(t,n),Bs(t,r),fs(this.projectionDeltaWithTransform,this.layoutCorrected,t,r)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new bi);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=this.getStack();a&&a.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.rotate||n.rotateX||n.rotateY||n.rotateZ)&&(t=!0),!t)return;const a={};for(let r=0;r<ki.length;r++){const t="rotate"+ki[r];n[t]&&(a[t]=n[t],e.setStaticValue(t,0))}e.render();for(const r in a)e.setStaticValue(r,a[r]);e.scheduleRender()}getProjectionStyles(e){var t,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Si;const a={visibility:""},r=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,a.opacity="",a.pointerEvents=ln(null===e||void 0===e?void 0:e.pointerEvents)||"",a.transform=r?r(this.latestValues,""):"none",a;const s=this.getLead();if(!this.projectionDelta||!this.layout||!s.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=ln(null===e||void 0===e?void 0:e.pointerEvents)||""),this.hasProjected&&!As(this.latestValues)&&(t.transform=r?r({},""):"none",this.hasProjected=!1),t}const i=s.animationValues||s.latestValues;this.applyTransformsToTarget(),a.transform=wi(this.projectionDeltaWithTransform,this.treeScale,i),r&&(a.transform=r(i,a.transform));const{x:o,y:l}=this.projectionDelta;a.transformOrigin="".concat(100*o.origin,"% ").concat(100*l.origin,"% 0"),s.animationValues?a.opacity=s===this?null!==(n=null!==(t=i.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:i.opacityExit:a.opacity=s===this?void 0!==i.opacity?i.opacity:"":void 0!==i.opacityExit?i.opacityExit:0;for(const c in st){if(void 0===i[c])continue;const{correct:e,applyTo:t}=st[c],n="none"===a.transform?i[c]:e(i[c],s);if(t){const e=t.length;for(let r=0;r<e;r++)a[t[r]]=n}else a[c]=n}return this.options.layoutId&&(a.pointerEvents=s===this?ln(null===e||void 0===e?void 0:e.pointerEvents)||"":"none"),a}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(Di),this.root.sharedNodes.clear()}}}function Ai(e){e.updateLayout()}function Ti(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:a}=e.layout,{animationType:r}=e.options,s=n.source!==e.layout.source;"size"===r?Ss(e=>{const a=s?n.measuredBox[e]:n.layoutBox[e],r=ms(a);a.min=t[e].min,a.max=a.min+r}):$i(r,n.layoutBox,t)&&Ss(a=>{const r=s?n.measuredBox[a]:n.layoutBox[a],i=ms(t[a]);r.max=r.min+i,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[a].max=e.relativeTarget[a].min+i)});const i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};fs(i,t,n.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};s?fs(o,e.applyTransform(a,!0),n.measuredBox):fs(o,t,n.layoutBox);const l=!xi(i);let c=!1;if(!e.resumeFrom){const a=e.getClosestProjectingParent();if(a&&!a.resumeFrom){const{snapshot:r,layout:s}=a;if(r&&s){const i={x:{min:0,max:0},y:{min:0,max:0}};ys(i,n.layoutBox,r.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};ys(o,t,s.layoutBox),yi(i,o)||(c=!0),a.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=i,e.relativeParent=a)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:o,layoutDelta:i,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function Mi(e){Ei.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Li(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Ri(e){e.clearSnapshot()}function Di(e){e.clearMeasurements()}function Ii(e){e.isLayoutDirty=!1}function _i(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Oi(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Fi(e){e.resolveTargetDelta()}function zi(e){e.calcProjection()}function Vi(e){e.resetRotation()}function Bi(e){e.removeLeadSnapshot()}function Ui(e,t,n){e.translate=fa(t.translate,0,n),e.scale=fa(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Hi(e,t,n,a){e.min=fa(t.min,n.min,a),e.max=fa(t.max,n.max,a)}function Wi(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const Gi={duration:.45,ease:[.4,0,.1,1]},qi=e=>"undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().includes(e),Yi=qi("applewebkit/")&&!qi("chrome/")?Math.round:xe;function Xi(e){e.min=Yi(e.min),e.max=Yi(e.max)}function $i(e,t,n){return"position"===e||"preserve-aspect"===e&&!hs(vi(t),vi(n),.2)}const Ki=Pi({attachResizeListener:(e,t)=>pn(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ji={current:void 0},Qi=Pi({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Ji.current){const e=new Ki({});e.mount(window),e.setOptions({layoutScroll:!0}),Ji.current=e}return Ji.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),Zi={pan:{Feature:class extends Sn{constructor(){super(...arguments),this.removePointerDownListener=xe}onPointerDown(e){this.session=new ss(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Hs(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:Ys(e),onStart:Ys(t),onMove:n,onEnd:(e,t)=>{delete this.session,a&&be.update(()=>a(e,t))}}}mount(){this.removePointerDownListener=xn(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Sn{constructor(e){super(e),this.removeGroupControls=xe,this.removeListeners=xe,this.controls=new Gs(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||xe}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:Qi,MeasureLayout:Zs}};const eo=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function to(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Le(n<=4,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'));const[a,r]=function(e){const t=eo.exec(e);if(!t)return[,];const[,n,a]=t;return[n,a]}(e);if(!a)return;const s=window.getComputedStyle(t).getPropertyValue(a);if(s){const e=s.trim();return Er(e)?parseFloat(e):e}return pt(r)?to(r,t,n+1):r}function no(e,t,n){let a=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(t),t));const r=e.current;if(!(r instanceof Element))return{target:a,transitionEnd:n};n&&(n=(0,Ie.A)({},n)),e.values.forEach(e=>{const t=e.get();if(!pt(t))return;const n=to(t,r);n&&e.set(n)});for(const s in a){const e=a[s];if(!pt(e))continue;const t=to(e,r);t&&(a[s]=t,n||(n={}),void 0===n[s]&&(n[s]=e))}return{target:a,transitionEnd:n}}const ao=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),ro=e=>ao.has(e),so=e=>e===xt||e===Pt,io=(e,t)=>parseFloat(e.split(", ")[t]),oo=(e,t)=>(n,a)=>{let{transform:r}=a;if("none"===r||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return io(s[1],t);{const t=r.match(/^matrix\((.+)\)$/);return t?io(t[1],e):0}},lo=new Set(["x","y","z"]),co=it.filter(e=>!lo.has(e));const uo={width:(e,t)=>{let{x:n}=e,{paddingLeft:a="0",paddingRight:r="0"}=t;return n.max-n.min-parseFloat(a)-parseFloat(r)},height:(e,t)=>{let{y:n}=e,{paddingTop:a="0",paddingBottom:r="0"}=t;return n.max-n.min-parseFloat(a)-parseFloat(r)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:a}=t;return parseFloat(a)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:a}=t;return parseFloat(a)+(n.max-n.min)},x:oo(4,13),y:oo(5,14)};uo.translateX=uo.x,uo.translateY=uo.y;const mo=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t=(0,Ie.A)({},t),a=(0,Ie.A)({},a);const r=Object.keys(t).filter(ro);let s=[],i=!1;const o=[];if(r.forEach(r=>{const l=e.getValue(r);if(!e.hasValue(r))return;let c=n[r],d=_r(c);const u=t[r];let m;if(sn(u)){const e=u.length,t=null===u[0]?1:0;c=u[t],d=_r(c);for(let n=t;n<e&&null!==u[n];n++)m?Le(_r(u[n])===m,"All keyframes must be of the same type"):(m=_r(u[n]),Le(m===d||so(d)&&so(m),"Keyframes must be of the same dimension as the current value"))}else m=_r(u);if(d!==m)if(so(d)&&so(m)){const e=l.get();"string"===typeof e&&l.set(parseFloat(e)),"string"===typeof u?t[r]=parseFloat(u):Array.isArray(u)&&m===Pt&&(t[r]=u.map(parseFloat))}else(null===d||void 0===d?void 0:d.transform)&&(null===m||void 0===m?void 0:m.transform)&&(0===c||0===u)?0===c?l.set(m.transform(c)):t[r]=d.transform(u):(i||(s=function(e){const t=[];return co.forEach(n=>{const a=e.getValue(n);void 0!==a&&(t.push([n,a.get()]),a.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}(e),i=!0),o.push(r),a[r]=void 0!==a[r]?a[r]:t[r],l.jump(u))}),o.length){const n=o.indexOf("height")>=0?window.pageYOffset:null,r=((e,t,n)=>{const a=t.measureViewportBox(),r=t.current,s=getComputedStyle(r),{display:i}=s,o={};"none"===i&&t.setStaticValue("display",e.display||"block"),n.forEach(e=>{o[e]=uo[e](a,s)}),t.render();const l=t.measureViewportBox();return n.forEach(n=>{const a=t.getValue(n);a&&a.jump(o[n]),e[n]=uo[n](l,s)}),e})(t,e,o);return s.length&&s.forEach(t=>{let[n,a]=t;e.getValue(n).set(a)}),e.render(),pe&&null!==n&&window.scrollTo({top:n}),{target:r,transitionEnd:a}}return{target:t,transitionEnd:a}};function ho(e,t,n,a){return(e=>Object.keys(e).some(ro))(t)?mo(e,t,n,a):{target:t,transitionEnd:a}}const po={current:null},fo={current:!1};const go=new WeakMap,xo=["willChange"],yo=["children"],vo=Object.keys(Je),bo=vo.length,wo=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],jo=Ge.length;class No{constructor(e){let{parent:t,props:n,presenceContext:a,reducedMotionConfig:r,visualState:s}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>be.render(this.render,!1,!0);const{latestValues:o,renderState:l}=s;this.latestValues=o,this.baseTarget=(0,Ie.A)({},o),this.initialValues=n.initial?(0,Ie.A)({},o):{},this.renderState=l,this.parent=t,this.props=n,this.presenceContext=a,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=i,this.isControllingVariants=qe(n),this.isVariantNode=Ye(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const c=this.scrapeMotionValuesFromProps(n,{}),{willChange:d}=c,u=Ht(c,xo);for(const m in u){const e=u[m];void 0!==o[m]&&ct(e)&&(e.set(o[m],!1),Cr(d)&&d.add(m))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,go.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),fo.current||function(){if(fo.current=!0,pe)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>po.current=e.matches;e.addListener(t),t()}else po.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||po.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){go.delete(this.current),this.projection&&this.projection.unmount(),we(this.notifyUpdate),we(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const n=ot.has(e),a=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&be.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),r=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{a(),r()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}loadFeatures(e,t,n,a){let r,s,{children:i}=e,o=Ht(e,yo);for(let l=0;l<bo;l++){const e=vo[l],{isEnabled:t,Feature:n,ProjectionNode:a,MeasureLayout:i}=Je[e];a&&(r=a),t(o)&&(!this.features[e]&&n&&(this.features[e]=new n(this)),i&&(s=i))}if(("html"===this.type||"svg"===this.type)&&!this.projection&&r){this.projection=new r(this.latestValues,this.parent&&this.parent.projection);const{layoutId:e,layout:t,drag:n,dragConstraints:s,layoutScroll:i,layoutRoot:l}=o;this.projection.setOptions({layoutId:e,layout:t,alwaysMeasureLayout:Boolean(n)||s&&Be(s),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:"string"===typeof t?t:"both",initialPromotionConfig:a,layoutScroll:i,layoutRoot:l})}return s}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<wo.length;n++){const t=wo[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const a=e["on"+t];a&&(this.propEventSubscriptions[t]=this.on(t,a))}this.prevMotionValues=function(e,t,n){const{willChange:a}=t;for(const r in t){const s=t[r],i=n[r];if(ct(s))e.addValue(r,s),Cr(a)&&a.add(r);else if(ct(i))e.addValue(r,Rr(s,{owner:e})),Cr(a)&&a.remove(r);else if(i!==s)if(e.hasValue(r)){const t=e.getValue(r);!t.hasAnimated&&t.set(s)}else{const t=e.getStaticValue(r);e.addValue(r,Rr(void 0!==t?t:s,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const e=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(e.initial=this.props.initial),e}const e={};for(let t=0;t<jo;t++){const n=Ge[t],a=this.props[n];(Ue(a)||!1===a)&&(e[n]=a)}return e}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=Rr(t,{owner:this}),this.addValue(e,n)),n}readValue(e){var t;return void 0===this.latestValues[e]&&this.current?null!==(t=this.getBaseTargetFromProps(this.props,e))&&void 0!==t?t:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e]}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props,a="string"===typeof n||"object"===typeof n?null===(t=rn(this.props,n))||void 0===t?void 0:t[e]:void 0;if(n&&void 0!==a)return a;const r=this.getBaseTargetFromProps(this.props,e);return void 0===r||ct(r)?void 0!==this.initialValues[e]&&void 0===a?void 0:this.baseTarget[e]:r}on(e,t){return this.events[e]||(this.events[e]=new Tr),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];this.events[e].notify(...n)}}}const ko=["transition","transitionEnd"];class So extends No{sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:a}=t;delete n[e],delete a[e]}makeTargetAnimatableFromInstance(e,t,n){let{transition:a,transitionEnd:r}=e,s=Ht(e,ko),{transformValues:i}=t,o=function(e,t,n){const a={};for(const r in e){const e=Ur(r,t);if(void 0!==e)a[r]=e;else{const e=n.getValue(r);e&&(a[r]=e.get())}}return a}(s,a||{},this);if(i&&(r&&(r=i(r)),s&&(s=i(s)),o&&(o=i(o))),n){!function(e,t,n){var a,r;const s=Object.keys(t).filter(t=>!e.hasValue(t)),i=s.length;if(i)for(let o=0;o<i;o++){const i=s[o],l=t[i];let c=null;Array.isArray(l)&&(c=l[0]),null===c&&(c=null!==(r=null!==(a=n[i])&&void 0!==a?a:e.readValue(i))&&void 0!==r?r:t[i]),void 0!==c&&null!==c&&("string"===typeof c&&(Er(c)||br(c))?c=parseFloat(c):!Fr(c)&&Aa.test(l)&&(c=vr(i,l)),e.addValue(i,Rr(c,{owner:e})),void 0===n[i]&&(n[i]=c),null!==c&&e.setBaseTarget(i,c))}}(this,s,o);const e=((e,t,n,a)=>{const r=no(e,t,a);return ho(e,t=r.target,n,a=r.transitionEnd)})(this,s,o,r);r=e.transitionEnd,s=e.target}return(0,Ie.A)({transition:a,transitionEnd:r},s)}}class Co extends So{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(ot.has(t)){const e=yr(t);return e&&e.default||0}{const a=(n=e,window.getComputedStyle(n)),r=(ht(t)?a.getPropertyValue(t):a[t])||0;return"string"===typeof r?r.trim():r}var n}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return Us(e,n)}build(e,t,n,a){Dt(e,t,n,a.transformTemplate)}scrapeMotionValuesFromProps(e,t){return nn(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ct(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent="".concat(e))}))}renderInstance(e,t,n,a){Zt(e,t,n,a)}}class Eo extends So{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ot.has(t)){const e=yr(t);return e&&e.default||0}return t=en.has(t)?t:ze(t),e.getAttribute(t)}measureInstanceViewportBox(){return{x:{min:0,max:0},y:{min:0,max:0}}}scrapeMotionValuesFromProps(e,t){return an(e,t)}build(e,t,n,a){Xt(e,t,n,this.isSVGTag,a.transformTemplate)}renderInstance(e,t,n,a){tn(e,t,0,a)}mount(e){this.isSVGTag=Kt(e.tagName),super.mount(e)}}const Po=(e,t)=>rt(e)?new Eo(t,{enableHardwareAcceleration:!1}):new Co(t,{enableHardwareAcceleration:!0}),Ao={layout:{ProjectionNode:Qi,MeasureLayout:Zs}},To=(0,Ie.A)((0,Ie.A)((0,Ie.A)((0,Ie.A)({},as),_n),Zi),Ao),Mo=nt((e,t)=>function(e,t,n,a){let{forwardMotionProps:r=!1}=t;const s=rt(e)?mn:hn;return(0,Ie.A)((0,Ie.A)({},s),{},{preloadedFeatures:n,useRender:Qt(r),createVisualElement:a,Component:e})}(e,t,To,Po));const Lo=e=>{let t;const n=new Set,a=(e,a)=>{const r="function"===typeof e?e(t):e;if(!Object.is(r,t)){const e=t;t=(null!=a?a:"object"!==typeof r||null===r)?r:Object.assign({},t,r),n.forEach(n=>n(t,e))}},r=()=>t,s={setState:a,getState:r,getInitialState:()=>i,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},i=t=e(a,r,s);return s},Ro=e=>e?Lo(e):Lo;var Do=n(443);const{useDebugValue:Io}=r,{useSyncExternalStoreWithSelector:_o}=Do;let Oo=!1;const Fo=e=>e;const zo=e=>{"function"!==typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t="function"===typeof e?Ro(e):e,n=(e,n)=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fo,n=arguments.length>2?arguments[2]:void 0;n&&!Oo&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Oo=!0);const a=_o(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Io(a),a}(t,e,n);return Object.assign(n,t),n},Vo=e=>e?zo(e):zo;function Bo(e,t){let n;try{n=e()}catch(a){return}return{getItem:e=>{var a;const r=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),s=null!=(a=n.getItem(e))?a:null;return s instanceof Promise?s.then(r):r(s)},setItem:(e,a)=>n.setItem(e,JSON.stringify(a,null==t?void 0:t.replacer)),removeItem:e=>n.removeItem(e)}}const Uo=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then:e=>Uo(e)(n),catch(e){return this}}}catch(Zd){return{then(e){return this},catch:t=>Uo(t)(Zd)}}},Ho=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?(console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),((e,t)=>(n,a,r)=>{let s=(0,Ie.A)({getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,t)=>(0,Ie.A)((0,Ie.A)({},t),e)},t),i=!1;const o=new Set,l=new Set;let c;try{c=s.getStorage()}catch(g){}if(!c)return e(function(){console.warn("[zustand persist middleware] Unable to update item '".concat(s.name,"', the given storage is currently unavailable.")),n(...arguments)},a,r);const d=Uo(s.serialize),u=()=>{const e=s.partialize((0,Ie.A)({},a()));let t;const n=d({state:e,version:s.version}).then(e=>c.setItem(s.name,e)).catch(e=>{t=e});if(t)throw t;return n},m=r.setState;r.setState=(e,t)=>{m(e,t),u()};const h=e(function(){n(...arguments),u()},a,r);let p;const f=()=>{var e;if(!c)return;i=!1,o.forEach(e=>e(a()));const t=(null==(e=s.onRehydrateStorage)?void 0:e.call(s,a()))||void 0;return Uo(c.getItem.bind(c))(s.name).then(e=>{if(e)return s.deserialize(e)}).then(e=>{if(e){if("number"!==typeof e.version||e.version===s.version)return e.state;if(s.migrate)return s.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}}).then(e=>{var t;return p=s.merge(e,null!=(t=a())?t:h),n(p,!0),u()}).then(()=>{null==t||t(p,void 0),i=!0,l.forEach(e=>e(p))}).catch(e=>{null==t||t(void 0,e)})};return r.persist={setOptions:e=>{s=(0,Ie.A)((0,Ie.A)({},s),e),e.getStorage&&(c=e.getStorage())},clearStorage:()=>{null==c||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>f(),hasHydrated:()=>i,onHydrate:e=>(o.add(e),()=>{o.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},f(),p||h})(e,t)):((e,t)=>(n,a,r)=>{let s=(0,Ie.A)({storage:Bo(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>(0,Ie.A)((0,Ie.A)({},t),e)},t),i=!1;const o=new Set,l=new Set;let c=s.storage;if(!c)return e(function(){console.warn("[zustand persist middleware] Unable to update item '".concat(s.name,"', the given storage is currently unavailable.")),n(...arguments)},a,r);const d=()=>{const e=s.partialize((0,Ie.A)({},a()));return c.setItem(s.name,{state:e,version:s.version})},u=r.setState;r.setState=(e,t)=>{u(e,t),d()};const m=e(function(){n(...arguments),d()},a,r);let h;r.getInitialState=()=>m;const p=()=>{var e,t;if(!c)return;i=!1,o.forEach(e=>{var t;return e(null!=(t=a())?t:m)});const r=(null==(t=s.onRehydrateStorage)?void 0:t.call(s,null!=(e=a())?e:m))||void 0;return Uo(c.getItem.bind(c))(s.name).then(e=>{if(e){if("number"!==typeof e.version||e.version===s.version)return[!1,e.state];if(s.migrate)return[!0,s.migrate(e.state,e.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;const[r,i]=e;if(h=s.merge(i,null!=(t=a())?t:m),n(h,!0),r)return d()}).then(()=>{null==r||r(h,void 0),h=a(),i=!0,l.forEach(e=>e(h))}).catch(e=>{null==r||r(void 0,e)})};return r.persist={setOptions:e=>{s=(0,Ie.A)((0,Ie.A)({},s),e),e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>p(),hasHydrated:()=>i,onHydrate:e=>(o.add(e),()=>{o.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},s.skipHydration||p(),h||m})(e,t);class Wo{constructor(){this.synthesis=void 0,this.voices=[],this.currentVoice=null,this.synthesis=window.speechSynthesis,this.loadVoices()}loadVoices(){this.voices=this.synthesis.getVoices(),this.currentVoice=this.voices.find(e=>e.name.includes("Female")||e.name.includes("Karen")||e.name.includes("Samantha")||e.name.includes("Zira"))||this.voices[0]}async speak(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((n,a)=>{if(!this.synthesis)return void a(new Error("Speech synthesis not supported"));this.synthesis.cancel();const r=new SpeechSynthesisUtterance(e);this.currentVoice&&(r.voice=this.currentVoice),r.rate=t.rate||.9,r.pitch=t.pitch||1,r.volume=t.volume||1,r.onend=()=>n(),r.onerror=e=>a(e.error),this.synthesis.speak(r)})}stop(){this.synthesis.cancel()}pause(){this.synthesis.pause()}resume(){this.synthesis.resume()}isSpeaking(){return this.synthesis.speaking}getAvailableVoices(){return this.voices}setVoice(e){this.currentVoice=e}}class Go{constructor(){if(this.recognition=null,this.isListening=!1,"webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=window.SpeechRecognition||window.webkitSpeechRecognition;this.recognition=new e,this.recognition&&(this.recognition.continuous=!1,this.recognition.interimResults=!0,this.recognition.lang="en-US")}}async startListening(){return new Promise((e,t)=>{this.recognition?(this.isListening=!0,this.recognition.onresult=t=>{const n=Array.from(t.results).map(e=>e[0]).map(e=>e.transcript).join("");t.results[0].isFinal&&(this.isListening=!1,e(n))},this.recognition.onerror=e=>{this.isListening=!1,t(new Error(e.error))},this.recognition.onend=()=>{this.isListening=!1},this.recognition.start()):t(new Error("Speech recognition not supported"))})}stopListening(){this.recognition&&this.isListening&&(this.recognition.stop(),this.isListening=!1)}isCurrentlyListening(){return this.isListening}setLanguage(e){this.recognition&&(this.recognition.lang=e)}}const qo=new class{constructor(e){this.config=void 0,this.conversationId=null,this.isConnected=!1,this.messageQueue=[],this.messageListeners=[],this.config=e,this.conversationId=e.conversationId||null}async initialize(){try{this.conversationId||(this.conversationId="conv_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))),await this.testConnection(),this.isConnected=!0,console.log("Botpress service initialized successfully")}catch(e){console.error("Failed to initialize Botpress service:",e),this.isConnected=!1}}async testConnection(){try{const e=await fetch("https://cdn.botpress.cloud/webchat/v3.2/shareable.html",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"text",text:"test",userId:this.config.userId,conversationId:this.conversationId,botId:this.config.botId})});if(!e.ok)throw new Error("Botpress API error: ".concat(e.status))}catch(e){console.warn("Botpress API test failed, using fallback mode")}}async sendMessage(e){try{if(!this.isConnected)return console.warn("Botpress not connected, using fallback"),this.getFallbackResponse(e);const t=await fetch("https://cdn.botpress.cloud/webchat/v3.2/shareable.html",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"text",text:e,userId:this.config.userId,conversationId:this.conversationId,botId:this.config.botId})});if(!t.ok)throw new Error("Botpress API error: ".concat(t.status));const n=await t.json();return this.parseBotpressResponse(n)}catch(t){return console.error("Error sending message to Botpress:",t),this.getFallbackResponse(e)}}parseBotpressResponse(e){const t=[];if(e.messages&&Array.isArray(e.messages))e.messages.forEach((e,n)=>{t.push({id:e.id||"msg_".concat(Date.now(),"_").concat(n),type:e.type||"text",text:e.text||e.message||"",data:e.data,timestamp:new Date})});else{if(!e.text)return this.getFallbackResponse("fallback");t.push({id:"msg_".concat(Date.now()),type:"text",text:e.text,timestamp:new Date})}return t}getFallbackResponse(e){const t=["I'm here to listen and support you. How are you feeling today?","Thank you for sharing that with me. I understand this might be difficult to talk about.","I'm glad you reached out. Let's work through this together, one step at a time.","Your feelings are valid, and it's okay to not be okay sometimes. I'm here to help.","I can hear that you're going through a challenging time. You're not alone in this."],n=t[Math.floor(Math.random()*t.length)];return[{id:"fallback_".concat(Date.now()),type:"text",text:n,timestamp:new Date}]}async getInitialGreeting(){try{const e=await this.sendMessage("start conversation");return 0!==e.length&&e[0].text?e:[{id:"greeting_".concat(Date.now()),type:"text",text:"Hello! I'm Mira, your wellness guide. I'm here to listen and support you. How are you feeling today?",timestamp:new Date}]}catch(e){return console.warn("Failed to get Botpress greeting, using fallback:",e),[{id:"greeting_".concat(Date.now()),type:"text",text:"Hello! I'm Mira, your wellness guide. I'm here to listen and support you. How are you feeling today?",timestamp:new Date}]}}isServiceConnected(){return this.isConnected}getConversationId(){return this.conversationId}showWidget(){console.log("Botpress widget show (not implemented yet)")}hideWidget(){console.log("Botpress widget hide (not implemented yet)")}}({botId:"20250921130550-P1WEUHCI",userId:"user_"+Date.now(),configUrl:"https://files.bpcontent.cloud/2025/09/21/13/20250921130550-P1WEUHCI.json",apiUrl:"https://cdn.botpress.cloud/webchat/v3.2/shareable.html"}),Yo={critical:["suicide","kill myself","end it all","not worth living","want to die"],high:["depressed","hopeless","worthless","can't go on","give up"],medium:["sad","lonely","anxious","worried","stressed"],low:["tired","overwhelmed","difficult","challenging"]},Xo=Vo()(Ho((e,t)=>({user:null,isLoading:!0,messages:[],isTyping:!1,avatarState:{isVisible:!1,isSpeaking:!1,currentAnimation:"idle",emotion:{type:"neutral",intensity:.5},position:{x:0,y:0,z:0}},crisisDetected:null,sessions:[],ttsService:new Wo,isListening:!1,botpressConnected:!1,hasShownInitialGreeting:!1,setUser:t=>e({user:t}),addMessage:t=>e(e=>({messages:[...e.messages,t]})),setTyping:t=>e({isTyping:t}),updateAvatarState:t=>e(e=>({avatarState:(0,Ie.A)((0,Ie.A)({},e.avatarState),t)})),setCrisisDetected:t=>e({crisisDetected:t}),addSession:t=>e(e=>({sessions:[...e.sessions,t]})),initializeApp:async()=>{e({isLoading:!0});try{const t=localStorage.getItem("mindbloom-user");if(t){const n=JSON.parse(t);e({user:n,isLoading:!1})}else e({isLoading:!1})}catch(t){console.error("Error initializing app:",t),e({isLoading:!1})}},sendMessage:async e=>{const{user:n,addMessage:a,setTyping:r,processCrisisDetection:s,setCrisisDetected:i}=t();if(!n)return;a({id:Date.now().toString(),userId:n.id,content:e,isFromUser:!0,timestamp:new Date});const o=s(e);o&&i(o),r(!0);try{const n=await qo.sendMessage(e);let r="";n.length>0&&(r=n[0].text||""),r||(r="I'm here to listen and support you. How are you feeling today?");a({id:(Date.now()+1).toString(),userId:"ai",content:r,isFromUser:!1,timestamp:new Date,emotion:{type:"encouraging",intensity:.8}}),t().updateAvatarState({isSpeaking:!0,currentAnimation:"speaking",emotion:{type:"encouraging",intensity:.8}});try{await t().speakText(r)}catch(l){console.warn("TTS failed:",l)}t().updateAvatarState({isSpeaking:!1,currentAnimation:"idle"})}catch(l){console.error("Error sending message:",l)}finally{r(!1)}},processCrisisDetection:e=>{const t=e.toLowerCase();for(const[n,a]of Object.entries(Yo))for(const e of a)if(t.includes(e))return{keywords:[e],severity:n,action:"critical"===n?"emergency":"high"===n?"escalate":"monitor"};return null},speakText:async e=>{const{ttsService:n}=t();try{await n.speak(e,{rate:.9,pitch:1,volume:.8})}catch(a){throw console.error("TTS Error:",a),a}},startListening:()=>{e({isListening:!0}),console.log("Started listening for voice input")},stopListening:()=>{e({isListening:!1}),console.log("Stopped listening for voice input")},initializeBotpress:async()=>{try{await qo.initialize(),e({botpressConnected:!0}),console.log("Botpress initialized successfully")}catch(t){console.error("Failed to initialize Botpress:",t),e({botpressConnected:!1})}},showInitialGreeting:async()=>{const{hasShownInitialGreeting:n,addMessage:a,updateAvatarState:r,speakText:s}=t();if(!n)try{const t=await qo.getInitialGreeting();let n="";t.length>0&&(n=t[0].text||""),n||(n="Hello! I'm Mira, your wellness guide. I'm here to listen and support you. How are you feeling today?");a({id:"greeting_".concat(Date.now()),userId:"ai",content:n,isFromUser:!1,timestamp:new Date,emotion:{type:"welcoming",intensity:.9}}),r({isSpeaking:!0,currentAnimation:"speaking",emotion:{type:"welcoming",intensity:.9}});try{await s(n)}catch(i){console.warn("TTS failed for greeting:",i)}r({isSpeaking:!1,currentAnimation:"idle"}),e({hasShownInitialGreeting:!0})}catch(i){console.error("Error showing initial greeting:",i)}},setBotpressConnected:t=>e({botpressConnected:t})}),{name:"mindbloom-storage",partialize:e=>({user:e.user,sessions:e.sessions})}));var $o=n(579);const Ko=(0,r.createContext)(void 0);function Jo(e){let{children:t}=e;const[n,a]=(0,r.useState)("calm"),[s,i]=(0,r.useState)("morning"),[o,l]=(0,r.useState)(.7);return(0,r.useEffect)(()=>{const e=()=>{const e=(new Date).getHours();i(e>=5&&e<12?"morning":e>=12&&e<17?"afternoon":e>=17&&e<22?"evening":"night")};e();const t=setInterval(e,6e4);return()=>clearInterval(t)},[]),(0,r.useEffect)(()=>{"morning"===s?(a("energetic"),l(.8)):"afternoon"===s?(a("happy"),l(.7)):"evening"===s?(a("reflective"),l(.6)):(a("calm"),l(.5))},[s]),(0,$o.jsx)(Ko.Provider,{value:{mood:n,setMood:a,timeOfDay:s,intensity:o,setIntensity:l},children:t})}function Qo(){const e=(0,r.useContext)(Ko);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e}var Zo=n(564);const el=(0,r.createContext)(void 0);function tl(e){let{children:t}=e;const[n,a]=(0,r.useState)(0),[s,i]=(0,r.useState)(1),[o,l]=(0,r.useState)([]);return(0,$o.jsx)(el.Provider,{value:{xp:n,level:s,addXP:async e=>{try{const t=await Zo.xpService.addXP("user-id",n,e);a(t.newXP),i(t.newLevel)}catch(t){console.error("Error adding XP:",t)}},achievements:o,unlockAchievement:e=>{l(t=>t.find(t=>t.id===e)?t:[...t,{id:e,unlockedAt:new Date}])}},children:t})}function nl(e){let{isSpeaking:t,text:n}=e;const[a,s]=(0,r.useState)("closed");(0,r.useEffect)(()=>{if(t&&n){const e=setInterval(()=>{var e;const t=null===(e=n[Math.floor(Math.random()*n.length)])||void 0===e?void 0:e.toLowerCase();t&&("aeiou".includes(t)?s("open"):"mnpb".includes(t)?s("closed"):"fv".includes(t)?s("teeth"):s("slight"))},150);return()=>clearInterval(e)}s("closed")},[t,n]);return(0,$o.jsx)(Mo.div,{className:"absolute",style:(0,Ie.A)({width:"16px",bottom:"20px",left:"50%",transform:"translateX(-50%)"},(()=>{switch(a){case"open":return{height:"8px",borderRadius:"50%",backgroundColor:"#1a1a1a"};case"teeth":return{height:"6px",borderRadius:"25%",backgroundColor:"#f5f5f5",border:"1px solid #1a1a1a"};case"slight":return{height:"4px",borderRadius:"50%",backgroundColor:"#1a1a1a"};default:return{height:"2px",borderRadius:"50%",backgroundColor:"#1a1a1a"}}})()),animate:t?{scaleY:[1,1.2,.8,1],scaleX:[1,1.1,.9,1]}:{},transition:{duration:.15,repeat:t?1/0:0,ease:"easeInOut"}})}function al(e){let{isSpeaking:t,emotion:n,currentMessage:a}=e;return(0,$o.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,$o.jsxs)(Mo.div,{className:"relative",animate:t?{scale:[1,1.05,1]}:{},transition:{duration:.5,repeat:t?1/0:0},children:[(0,$o.jsx)("div",{className:"w-32 h-32 bg-gradient-to-br from-pink-200 to-pink-300 rounded-full shadow-lg flex items-center justify-center",children:(0,$o.jsxs)("div",{className:"flex space-x-4",children:[(0,$o.jsx)(Mo.div,{className:"w-4 h-4 bg-gray-800 rounded-full",animate:t?{scaleY:[1,.3,1]}:{},transition:{duration:.3,repeat:t?1/0:0}}),(0,$o.jsx)(Mo.div,{className:"w-4 h-4 bg-gray-800 rounded-full",animate:t?{scaleY:[1,.3,1]}:{},transition:{duration:.3,repeat:t?1/0:0}})]})}),(0,$o.jsx)(nl,{isSpeaking:t,text:a}),(0,$o.jsx)("div",{className:"w-24 h-32 bg-gradient-to-br from-blue-400 to-blue-500 rounded-lg mx-auto mt-4 shadow-lg",children:(0,$o.jsxs)("div",{className:"flex justify-between px-2 pt-4",children:[(0,$o.jsx)(Mo.div,{className:"w-3 h-16 bg-gradient-to-br from-pink-200 to-pink-300 rounded-full",animate:t?{rotate:[0,10,-10,0]}:{},transition:{duration:1,repeat:t?1/0:0}}),(0,$o.jsx)(Mo.div,{className:"w-3 h-16 bg-gradient-to-br from-pink-200 to-pink-300 rounded-full",animate:t?{rotate:[0,-10,10,0]}:{},transition:{duration:1,repeat:t?1/0:0}})]})})]}),(0,$o.jsxs)(Mo.div,{className:"mt-6 px-4 py-2 bg-white/90 backdrop-blur-sm rounded-lg shadow-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[(0,$o.jsx)("p",{className:"text-lg font-semibold text-gray-800",children:"Mira"}),(0,$o.jsx)("p",{className:"text-sm text-gray-600",children:"Your Wellness Guide"})]})]})}function rl(){const[e,t]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{const e=setTimeout(()=>{t(!1)},3e3);return()=>clearTimeout(e)},[]),e?(0,$o.jsx)(Mo.div,{className:"absolute top-1/4 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.5},children:(0,$o.jsx)("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl p-6 shadow-2xl max-w-sm",children:(0,$o.jsxs)("div",{className:"text-center",children:[(0,$o.jsx)(Mo.div,{className:"w-12 h-12 bg-primary-500 rounded-full flex items-center justify-center mx-auto mb-3",animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0},children:(0,$o.jsx)("span",{className:"text-2xl",children:"\ud83d\udc4b"})}),(0,$o.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Hi, I'm Mira!"}),(0,$o.jsx)("p",{className:"text-gray-600",children:"Your AI wellness companion. I'm here to listen, support, and guide you on your mental health journey."})]})})}):null}function sl(e){var t;let{isSpeaking:n=!1,currentMessage:a=""}=e;const{avatarState:s,user:i,messages:o}=Xo(),[l,c]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(i){const e=setTimeout(()=>{c(!0)},1e3);return()=>clearTimeout(e)}},[i]);const d=a||o.length>0&&(null===(t=o[o.length-1])||void 0===t?void 0:t.content)||"",u=n||s.isSpeaking;return i?(0,$o.jsxs)("div",{className:"w-full h-full relative bg-gradient-to-br from-primary-50 to-wellness-50",children:[(0,$o.jsxs)("div",{className:"absolute inset-0 opacity-10",children:[(0,$o.jsx)("div",{className:"absolute top-10 left-10 w-20 h-20 bg-primary-200 rounded-full"}),(0,$o.jsx)("div",{className:"absolute top-32 right-16 w-16 h-16 bg-wellness-200 rounded-full"}),(0,$o.jsx)("div",{className:"absolute bottom-20 left-20 w-12 h-12 bg-primary-300 rounded-full"}),(0,$o.jsx)("div",{className:"absolute bottom-32 right-10 w-24 h-24 bg-wellness-300 rounded-full"})]}),l&&(0,$o.jsx)(Mo.div,{className:"h-full",initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:(0,$o.jsx)(al,{isSpeaking:u,emotion:s.emotion,currentMessage:d})}),(0,$o.jsx)(rl,{}),(0,$o.jsx)("div",{className:"absolute bottom-4 left-4 right-4",children:(0,$o.jsx)(Mo.div,{className:"bg-white/90 backdrop-blur-sm rounded-lg p-4 shadow-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:2},children:(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)(Mo.div,{className:"w-3 h-3 bg-green-500 rounded-full",animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0}}),(0,$o.jsx)("span",{className:"text-sm text-gray-700",children:"Mira is ready to listen and support you"})]})})})]}):null}var il={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ol=["color","size","strokeWidth","absoluteStrokeWidth","className","children"],ll=(e,t)=>{const n=(0,r.forwardRef)((n,a)=>{let{color:s="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:d}=n,u=Ht(n,ol);return(0,r.createElement)("svg",(0,Ie.A)((0,Ie.A)({ref:a},il),{},{width:i,height:i,stroke:s,strokeWidth:l?24*Number(o)/Number(i):o,className:["lucide","lucide-".concat((m=e,m.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim())),c].join(" ")},u),[...t.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(d)?d:[d]]);var m});return n.displayName="".concat(e),n},cl=ll("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),dl=ll("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),ul=ll("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),ml=ll("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),hl=ll("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),pl=ll("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),fl=ll("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),gl=ll("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),xl=ll("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),yl=ll("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),vl=ll("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);var bl=n(392);class wl{constructor(){this.proxyUrl=void 0,this.proxyUrl="http://localhost:5001/api/google-cloud"}async analyzeSentiment(e,t){if(!this.proxyUrl)return this.fallbackSentimentAnalysis(e);const n=await fetch("".concat(this.proxyUrl,"/language/analyze-sentiment"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({document:{type:"PLAIN_TEXT",content:e,languageCode:t||"en"},encodingType:"UTF8"})});if(!n.ok)return console.warn("Cloud Language API failed, using fallback"),this.fallbackSentimentAnalysis(e);const a=await n.json();let r;return r=a.documentSentiment.score>.25?"positive":a.documentSentiment.score<-.25?"negative":"neutral",{score:a.documentSentiment.score,magnitude:a.documentSentiment.magnitude,sentiment:r}}async extractEntities(e,t){if(!this.proxyUrl)return[];const n=await fetch("".concat(this.proxyUrl,"/language/analyze-entities"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({document:{type:"PLAIN_TEXT",content:e,languageCode:t||"en"},encodingType:"UTF8"})});if(!n.ok){const e=await n.json().catch(()=>({message:"Unknown error"}));throw new Error("Entity extraction error: ".concat(n.status," - ").concat(e.message||"Unknown error"))}return(await n.json()).entities.map(e=>({name:e.name,type:e.type,salience:e.salience,metadata:e.metadata}))}async classifyText(e){if(!this.proxyUrl)return[];const t=await fetch("".concat(this.proxyUrl,"/language/classify-text"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({document:{type:"PLAIN_TEXT",content:e}})});if(!t.ok){const e=await t.json().catch(()=>({message:"Unknown error"}));throw new Error("Text classification error: ".concat(t.status," - ").concat(e.message||"Unknown error"))}return(await t.json()).categories||[]}async detectCrisis(e){const t=e.toLowerCase(),n=["suicide","kill myself","end it all","not worth living","want to die","take my life"].filter(e=>t.includes(e));if(n.length>0)return{isCrisis:!0,severity:"critical",confidence:.95,indicators:n};let a;try{a=await this.analyzeSentiment(e)}catch(i){a=this.fallbackSentimentAnalysis(e)}const r=["depressed","hopeless","worthless","can't go on","give up","no point"].filter(e=>t.includes(e)),s=["sad","lonely","anxious","worried","stressed","overwhelmed"].filter(e=>t.includes(e));return r.length>0&&a.score<-.5?{isCrisis:!0,severity:"high",confidence:.85,indicators:r}:s.length>0&&a.score<-.3?{isCrisis:!0,severity:"medium",confidence:.7,indicators:s}:a.score<-.7&&a.magnitude>.5?{isCrisis:!0,severity:"medium",confidence:.75,indicators:["negative sentiment"]}:{isCrisis:!1,severity:"low",confidence:.5,indicators:[]}}async analyzeEmotionalTone(e){const t=await this.analyzeSentiment(e),n=[];t.score>.5?(n.push({emotion:"joy",intensity:t.score}),n.push({emotion:"contentment",intensity:.7*t.score})):t.score<-.5?(n.push({emotion:"sadness",intensity:Math.abs(t.score)}),n.push({emotion:"anxiety",intensity:.5*t.magnitude})):n.push({emotion:"neutral",intensity:.5});const a=e.toLowerCase();(a.includes("angry")||a.includes("frustrated")||a.includes("mad"))&&n.push({emotion:"anger",intensity:.7}),(a.includes("anxious")||a.includes("worried")||a.includes("nervous"))&&n.push({emotion:"anxiety",intensity:.8}),(a.includes("lonely")||a.includes("isolated"))&&n.push({emotion:"loneliness",intensity:.7});return{primaryEmotion:n.reduce((e,t)=>t.intensity>e.intensity?t:e,n[0]||{emotion:"neutral",intensity:0}).emotion,emotions:n,overall:t}}fallbackSentimentAnalysis(e){const t=["happy","good","great","wonderful","amazing","love","enjoy","excited","grateful"],n=["sad","bad","terrible","awful","hate","angry","frustrated","worried","anxious","depressed"],a=e.toLowerCase().split(/\s+/);let r=0,s=0;a.forEach(e=>{t.some(t=>e.includes(t))&&r++,n.some(t=>e.includes(t))&&s++});const i=a.length,o=i>0?(r-s)/i:0;let l;return l=o>.1?"positive":o<-.1?"negative":"neutral",{score:o,magnitude:Math.abs(o),sentiment:l}}}const jl=new wl;var Nl=n(727);const kl=new class{constructor(){this.sessions=new Map}getSession(e,t){const n=t||"session-".concat(Date.now());return this.sessions.has(n)||this.sessions.set(n,{sessionId:n,userId:e,messages:[],emotions:[],topics:[],techniques:[],moodProgression:[],crisisDetected:!1,startTime:new Date}),this.sessions.get(n)}async generateTherapeuticResponse(e,t,n){const a=this.getSession(e,n),r=await jl.analyzeSentiment(t),s=await jl.analyzeEmotionalTone(t),i=await jl.detectCrisis(t);a.emotions.push({type:s.primaryEmotion,intensity:Math.abs(r.score),timestamp:new Date}),a.moodProgression.push({timestamp:new Date,score:r.score}),i.isCrisis&&(a.crisisDetected=!0);const o={role:"user",content:t,timestamp:new Date,emotion:{type:s.primaryEmotion,intensity:Math.abs(r.score)},sentiment:r};a.messages.push(o);const l=this.buildTherapeuticPrompt(t,a,r,s,i);let c;try{c=await this.generateWithTechniques(l,a.messages,r,s)}catch(h){console.error("Error generating therapeutic response:",h),c={message:"I hear you, and I want to understand better. What you're sharing sounds important. ".concat(t.includes("?")?"Let me think about that...":"Can you tell me more about how you're feeling right now?"," I'm here to support you through this."),suggestedActivity:r.score<-.4?"breathing-dragon":void 0}}const d={role:"therapist",content:c.message,timestamp:new Date};a.messages.push(d);const u=this.identifyTechnique(c.message);if(u&&!a.techniques.includes(u)&&a.techniques.push(u),t.length>10){const e=t.toLowerCase().split(/\s+/),n=["anxiety","stress","depression","sad","worried","angry","happy","grateful","work","family","friends","school"].find(t=>e.some(e=>e.includes(t)));n&&!a.topics.includes(n)&&a.topics.push(n)}const m=this.generateSessionNote(a,u,c);return(0,Ie.A)((0,Ie.A)({},c),{},{technique:u,emotion:{detected:s.primaryEmotion,intensity:Math.abs(r.score)},sessionNote:m})}buildTherapeuticPrompt(e,t,n,a,r){var s;const i=Math.floor((Date.now()-t.startTime.getTime())/1e3/60);let o="You are Mira, a licensed and experienced therapist with expertise in Cognitive Behavioral Therapy (CBT), Dialectical Behavior Therapy (DBT), Acceptance and Commitment Therapy (ACT), and mindfulness-based interventions.\n\nYOUR THERAPEUTIC APPROACH:\n- Use evidence-based therapeutic techniques\n- Practice active listening and validation\n- Ask insightful, open-ended questions\n- Identify thought patterns and cognitive distortions\n- Offer practical coping strategies\n- Encourage self-compassion and acceptance\n- Normalize emotions and experiences\n- Provide gentle guidance without being directive\n\nCURRENT SESSION CONTEXT:\n- Session duration: ".concat(i," minutes\n- Detected emotion: ").concat(a.primaryEmotion," (intensity: ").concat((null===(s=a.emotions[0])||void 0===s?void 0:s.intensity)||.5,")\n- Sentiment: ").concat(n.sentiment," (score: ").concat(n.score.toFixed(2),")\n- Topics discussed: ").concat(t.topics.length>0?t.topics.join(", "):"none yet","\n- Previous techniques used: ").concat(t.techniques.join(", ")||"none yet");return r.isCrisis?o+="\n\n\u26a0\ufe0f CRISIS DETECTED:\n- Severity: ".concat(r.severity,"\n- Indicators: ").concat(r.indicators.join(", "),"\n- RESPOND WITH URGENCY: Validate their pain, express empathy, and provide immediate crisis resources.\n- Do NOT minimize their feelings.\n- Encourage them to contact crisis helpline (988) or emergency services if immediate danger."):n.score<-.5&&(o+="\n\nUSER APPEARS DISTRESSED:\n- Validate their feelings deeply\n- Explore what's contributing to this distress\n- Offer concrete coping strategies\n- Consider suggesting grounding techniques or breathing exercises"),o+="\n\nUSER'S MESSAGE: \"".concat(e,'"\n\nProvide a therapeutic response that:\n1. Validates and acknowledges their feelings\n2. Asks a thoughtful question to explore deeper\n3. Offers a practical technique or insight\n4. Maintains warm, professional therapeutic rapport\n5. Keeps response to 3-5 sentences (concise but meaningful)'),o}async generateWithTechniques(e,t,a,r){const s=[{role:"user",parts:[{text:e}]},...t.slice(-5).map(e=>({role:"user"===e.role?"user":"model",parts:[{text:e.content}]}))];let i,o;console.log("Calling Vertex AI with prompt:",e.substring(0,200)+"..."),console.log("Messages count:",s.length);try{var l;i=await bl.vertexAIService.generateResponse(s),console.log("Vertex AI response received:",(null===(l=i)||void 0===l?void 0:l.substring(0,100))+"...")}catch(d){console.error("Vertex AI error details:",d),console.error("Error message:",null===d||void 0===d?void 0:d.message),console.error("Error stack:",null===d||void 0===d?void 0:d.stack);try{var c;console.log("Attempting fallback to Gemini API...");const{geminiService:e}=await Promise.resolve().then(n.bind(n,853));i=await e.generateTherapeuticResponse((null===(c=t[t.length-1])||void 0===c?void 0:c.content)||"Hello",s.slice(1).map(e=>({role:"user"===e.role?"user":"model",parts:e.parts}))),console.log("Gemini API fallback successful")}catch(u){console.error("Gemini API fallback also failed:",u),i="I understand you're sharing something important with me. ".concat(a.score<-.4?"It sounds like you might be going through a difficult time right now. ":"","I'm here to listen and support you. Can you tell me more about what you're experiencing? I want to help you work through this.")}}return a.score<-.4?o="breathing-dragon":r.emotions.some(e=>"anxiety"===e.emotion)?o="mindfulness":r.emotions.some(e=>"sadness"===e.emotion)&&(o="gratitude-hunt"),{message:i,suggestedActivity:o}}identifyTechnique(e){const t=e.toLowerCase();return t.includes("thought")||t.includes("belief")||t.includes("perspective")||t.includes("way of thinking")?"cbt":t.includes("accept")||t.includes("present moment")||t.includes("values")||t.includes("commitment")?"act":t.includes("distress tolerance")||t.includes("mindfulness")||t.includes("emotion regulation")?"dbt":t.includes("breathe")||t.includes("grounding")||t.includes("moment")?"mindfulness":t.includes("validate")||t.includes("understand")||t.includes("makes sense")?"validation":t.includes("consider")||t.includes("alternativ")||t.includes("another way")?"reframing":"exploration"}generateSessionNote(e,t,n){var a;const r=e.moodProgression.length>0?e.moodProgression.reduce((e,t)=>e+t.score,0)/e.moodProgression.length:0;return"Session Note - ".concat((new Date).toLocaleDateString(),"\nDuration: ").concat(Math.floor((Date.now()-e.startTime.getTime())/1e3/60)," minutes\nPrimary emotion: ").concat((null===(a=e.emotions[e.emotions.length-1])||void 0===a?void 0:a.type)||"neutral","\nAverage mood: ").concat(r.toFixed(2),"\nTechniques used: ").concat(e.techniques.join(", ")||"none","\nTopics: ").concat(e.topics.join(", ")||"general discussion","\nTherapeutic focus: ").concat(t,"\nCrisis detected: ").concat(e.crisisDetected?"Yes - appropriate resources provided":"No")}async saveSession(e,t){const n=this.sessions.get(t);if(!n)return{xpEarned:0};try{const a={sessionId:t,userId:e,startTime:n.startTime,endTime:new Date,duration:Math.floor((Date.now()-n.startTime.getTime())/1e3/60),messageCount:n.messages.length,emotions:n.emotions,topics:n.topics,techniques:n.techniques,moodProgression:n.moodProgression,crisisDetected:n.crisisDetected,messages:n.messages.map(e=>({role:e.role,content:e.content,timestamp:e.timestamp,emotion:e.emotion}))},r=new Blob([JSON.stringify(a,null,2)],{type:"application/json"});await Nl.P.uploadAudio(r,e,"recording","therapy-session-".concat(t,".json"));return{xpEarned:Math.min(2*n.messages.length,50)}}catch(a){return console.error("Error saving therapy session:",a),{xpEarned:0}}}getSessionSummary(e){return this.sessions.get(e)||null}async endSession(e,t){await this.saveSession(e,t),this.sessions.delete(t)}};class Sl{constructor(){this.proxyUrl=void 0,this.defaultConfig=void 0,this.proxyUrl="http://localhost:5001/api/google-cloud",this.defaultConfig={languageCode:"en-US",sampleRateHertz:16e3,encoding:"LINEAR16",enableAutomaticPunctuation:!0,model:"latest_short",useEnhanced:!0}}async recognize(e,t){if(!this.proxyUrl)throw new Error("Google Cloud Speech-to-Text proxy not configured. Please set REACT_APP_GOOGLE_CLOUD_PROXY_URL");const n=(0,Ie.A)((0,Ie.A)({},this.defaultConfig),t),a=await this.blobToBase64(e),r=await fetch("".concat(this.proxyUrl,"/speech-to-text/recognize"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({config:n,audio:{content:a.split(",")[1]}})});if(!r.ok){const e=await r.json().catch(()=>({message:"Unknown error"}));throw new Error("Speech-to-Text error: ".concat(r.status," - ").concat(e.message||"Unknown error"))}const s=await r.json();if(s.results&&s.results.length>0&&s.results[0].alternatives.length>0){const e=s.results[0].alternatives[0];return{transcript:e.transcript,confidence:e.confidence||.8,alternatives:s.results[0].alternatives.map(e=>({transcript:e.transcript,confidence:e.confidence||.8}))}}throw new Error("No speech recognized")}async streamRecognize(e,t,n){if(!this.proxyUrl)throw new Error("Google Cloud Speech-to-Text proxy not configured");const a=new MediaRecorder(e),r=[];return a.ondataavailable=async e=>{if(e.data.size>0){r.push(e.data);try{const a=await this.recognize(e.data,n);t(a.transcript,!0)}catch(a){console.error("Stream recognition error:",a)}}},a.start(1e3),new Promise(e=>{e()})}blobToBase64(e){return new Promise((t,n)=>{const a=new FileReader;a.onloadend=()=>t(a.result),a.onerror=n,a.readAsDataURL(e)})}getSupportedLanguages(){return["en-US","en-GB","en-AU","en-CA","es-ES","es-MX","fr-FR","fr-CA","de-DE","it-IT","pt-BR","pt-PT","ja-JP","ko-KR","zh-CN","zh-TW","ar-XA","hi-IN","ru-RU"]}setLanguage(e){this.defaultConfig.languageCode=e}}new Sl;const Cl=new class{constructor(){this.googleCloudService=void 0,this.browserService=void 0,this.useGoogleCloud=void 0,this.googleCloudService=new Sl,this.useGoogleCloud=!0}setBrowserService(e){this.browserService=e}async recognize(e,t){if(this.useGoogleCloud&&e)try{return(await this.googleCloudService.recognize(e,t)).transcript}catch(n){return console.warn("Google Cloud STT failed, falling back to browser:",n),this.fallbackToBrowser()}return this.fallbackToBrowser()}async startListening(){if(this.useGoogleCloud)try{const e=await navigator.mediaDevices.getUserMedia({audio:!0}),t=new MediaRecorder(e),n=[];return new Promise((a,r)=>{t.ondataavailable=e=>{n.push(e.data)},t.onstop=async()=>{const t=new Blob(n,{type:"audio/webm"});e.getTracks().forEach(e=>e.stop());try{const e=await this.googleCloudService.recognize(t);a(e.transcript)}catch(s){console.warn("Google Cloud STT failed, falling back to browser:",s),this.fallbackToBrowser().then(a).catch(r)}},t.start(),setTimeout(()=>{"inactive"!==t.state&&t.stop()},5e3)})}catch(e){return console.warn("MediaRecorder failed, falling back to browser:",e),this.fallbackToBrowser()}return this.fallbackToBrowser()}async fallbackToBrowser(){if(!this.browserService)throw new Error("No speech recognition service available");if(this.browserService.startListening)return await this.browserService.startListening();throw new Error("Browser STT service not properly initialized")}stopListening(){this.browserService&&this.browserService.stopListening&&this.browserService.stopListening()}setLanguage(e){this.googleCloudService.setLanguage(e),this.browserService&&this.browserService.setLanguage&&this.browserService.setLanguage(e)}};class El{constructor(){this.proxyUrl=void 0,this.defaultVoice=void 0,this.defaultOptions=void 0,this.currentLanguage=void 0,this.proxyUrl="http://localhost:5001/api/google-cloud";const e=localStorage.getItem("mindbloom-language")||"en";this.currentLanguage=e;const{languageService:t}=n(958),a=t.getLanguageConfig(e);this.defaultVoice={languageCode:a.ttsVoiceCode,name:a.ttsVoiceName,ssmlGender:"FEMALE"},this.defaultOptions={voice:this.defaultVoice,audioConfig:{audioEncoding:"MP3",speakingRate:.9,pitch:0,volumeGainDb:0,sampleRateHertz:24e3}}}async synthesize(e,t){if(!this.proxyUrl)throw new Error("Google Cloud Text-to-Speech proxy not configured. Please set REACT_APP_GOOGLE_CLOUD_PROXY_URL");const n=(0,Ie.A)((0,Ie.A)((0,Ie.A)({},this.defaultOptions),t),{},{voice:(0,Ie.A)((0,Ie.A)({},this.defaultVoice),null===t||void 0===t?void 0:t.voice),audioConfig:(0,Ie.A)((0,Ie.A)({},this.defaultOptions.audioConfig),null===t||void 0===t?void 0:t.audioConfig)}),a=await fetch("".concat(this.proxyUrl,"/text-to-speech/synthesize"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:{text:e},voice:n.voice,audioConfig:n.audioConfig})});if(!a.ok){const e=await a.json().catch(()=>({message:"Unknown error"}));throw new Error("Text-to-Speech error: ".concat(a.status," - ").concat(e.message||"Unknown error"))}const r=await a.json();return this.base64ToBlob(r.audioContent,"audio/mpeg")}async synthesizeSSML(e,t){if(!this.proxyUrl)throw new Error("Google Cloud Text-to-Speech proxy not configured");const n=(0,Ie.A)((0,Ie.A)((0,Ie.A)({},this.defaultOptions),t),{},{voice:(0,Ie.A)((0,Ie.A)({},this.defaultVoice),null===t||void 0===t?void 0:t.voice),audioConfig:(0,Ie.A)((0,Ie.A)({},this.defaultOptions.audioConfig),null===t||void 0===t?void 0:t.audioConfig)}),a=await fetch("".concat(this.proxyUrl,"/text-to-speech/synthesize"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:{ssml:e},voice:n.voice,audioConfig:n.audioConfig})});if(!a.ok){const e=await a.json().catch(()=>({message:"Unknown error"}));throw new Error("Text-to-Speech SSML error: ".concat(a.status," - ").concat(e.message||"Unknown error"))}const r=await a.json();return this.base64ToBlob(r.audioContent,"audio/mpeg")}async speak(e,t){const n=await this.synthesize(e,t),a=URL.createObjectURL(n),r=new Audio(a);return new Promise((e,t)=>{r.onended=()=>{URL.revokeObjectURL(a),e()},r.onerror=e=>{URL.revokeObjectURL(a),t(e)},r.play().catch(t)})}async getVoices(e){if(!this.proxyUrl)throw new Error("Google Cloud Text-to-Speech proxy not configured");const t=await fetch("".concat(this.proxyUrl,"/text-to-speech/voices").concat(e?"?languageCode=".concat(e):""),{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok){const e=await t.json().catch(()=>({message:"Unknown error"}));throw new Error("Get voices error: ".concat(t.status," - ").concat(e.message||"Unknown error"))}return(await t.json()).voices||[]}setVoice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";this.defaultVoice={languageCode:t,name:e,ssmlGender:"FEMALE"}}setSpeakingRate(e){this.defaultOptions.audioConfig&&(this.defaultOptions.audioConfig.speakingRate=Math.max(.25,Math.min(4,e)))}setPitch(e){this.defaultOptions.audioConfig&&(this.defaultOptions.audioConfig.pitch=Math.max(-20,Math.min(20,e)))}setLanguage(e){this.currentLanguage=e;const{languageService:t}=n(958),a=t.getLanguageConfig(e);this.defaultVoice={languageCode:a.ttsVoiceCode,name:a.ttsVoiceName,ssmlGender:"FEMALE"},this.defaultOptions=(0,Ie.A)((0,Ie.A)({},this.defaultOptions),{},{voice:this.defaultVoice})}base64ToBlob(e,t){const n=atob(e),a=new Array(n.length);for(let s=0;s<n.length;s++)a[s]=n.charCodeAt(s);const r=new Uint8Array(a);return new Blob([r],{type:t})}}new El;const Pl=new class{constructor(){this.googleCloudService=void 0,this.browserService=void 0,this.useGoogleCloud=void 0,this.googleCloudService=new El,this.useGoogleCloud=!0}setBrowserService(e){this.browserService=e}setLanguage(e){this.googleCloudService.setLanguage(e),this.browserService&&this.browserService.setLanguage&&this.browserService.setLanguage(e)}async speak(e,t){if(this.useGoogleCloud)try{const n={};return void 0===(null===t||void 0===t?void 0:t.rate)&&void 0===(null===t||void 0===t?void 0:t.pitch)||(n.audioConfig=(0,Ie.A)((0,Ie.A)({audioEncoding:"MP3"},void 0!==(null===t||void 0===t?void 0:t.rate)&&{speakingRate:t.rate}),void 0!==(null===t||void 0===t?void 0:t.pitch)&&{pitch:20*t.pitch})),void await this.googleCloudService.speak(e,n)}catch(n){console.warn("Google Cloud TTS failed, falling back to browser:",n)}if(!this.browserService||!this.browserService.speak)throw new Error("No TTS service available");await this.browserService.speak(e,{rate:null===t||void 0===t?void 0:t.rate,pitch:null===t||void 0===t?void 0:t.pitch,volume:null===t||void 0===t?void 0:t.volume})}stop(){this.browserService&&this.browserService.stop&&this.browserService.stop()}pause(){this.browserService&&this.browserService.pause&&this.browserService.pause()}resume(){this.browserService&&this.browserService.resume&&this.browserService.resume()}isSpeaking(){return!(!this.browserService||!this.browserService.isSpeaking)&&this.browserService.isSpeaking()}};var Al=n(958);function Tl(e){let{onMessage:t,onSpeaking:a}=e;const{user:s,setUser:i}=Xo(),[o,l]=(0,r.useState)([]),[c,d]=(0,r.useState)(""),[u,m]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1),[f,g]=(0,r.useState)(!1),[x,y]=(0,r.useState)(!1),[v,b]=(0,r.useState)(null),[w,j]=(0,r.useState)({duration:0,messages:0,techniques:new Set,emotions:[],moodTrend:[]}),[N,k]=(0,r.useState)(!1),S=(0,r.useRef)(null),C=(0,r.useRef)(new Date),E=(0,r.useRef)(null);(0,r.useEffect)(()=>{P(),A();const e=setInterval(()=>{if(v){const e=Math.floor((Date.now()-C.current.getTime())/1e3/60);j(t=>(0,Ie.A)((0,Ie.A)({},t),{},{duration:e}))}},6e4);return()=>{clearInterval(e),L()}},[]),(0,r.useEffect)(()=>{I()},[o]);const P=async()=>{if(s){m(!0);try{const e="session-".concat(Date.now());b(e),C.current=new Date;const{vertexAIService:t}=await Promise.resolve().then(n.bind(n,392)),a=await t.getInitialGreeting(),r={id:Date.now().toString(),content:a,isFromUser:!1,timestamp:new Date};l([r])}catch(e){console.error("Error initializing therapy chat:",e);const t={id:Date.now().toString(),content:"Hello! I'm Mira, your therapist. I'm here to provide a safe and supportive space for you to explore your thoughts and feelings. What would you like to talk about today?",isFromUser:!1,timestamp:new Date};l([t])}finally{m(!1)}}},A=()=>{const e=(null===s||void 0===s?void 0:s.language)||Al.languageService.initializeLanguage();Al.languageService.setCurrentLanguage(e),Pl.setLanguage(e);const t=Al.languageService.getLanguageConfig(e);Cl.setLanguage(t.sttLanguageCode);const n=new Wo,a=new Go;Pl.setBrowserService(n),Cl.setBrowserService(a)},T=async e=>{if(!f&&!h){p(!0),a&&a(!0);try{await Pl.speak(e,{rate:.9,pitch:1,volume:1})}catch(t){console.error("Error speaking message:",t);const n=new SpeechSynthesisUtterance(e);n.rate=.9,n.pitch=1.1,n.volume=.8,n.onend=()=>{p(!1),a&&a(!1)},E.current=n,window.speechSynthesis.speak(n)}finally{p(!1),a&&a(!1)}}},M=async()=>{if(!c.trim()||u||!s||!v)return;const e={id:"user-".concat(Date.now()),content:c.trim(),isFromUser:!0,timestamp:new Date};l(t=>[...t,e]),d(""),m(!0),j(e=>(0,Ie.A)((0,Ie.A)({},e),{},{messages:e.messages+1})),t&&t(e.content,!0);try{const n=await kl.generateTherapeuticResponse(s.id,e.content,v);j(e=>{const t=new Set(e.techniques);n.technique&&t.add(n.technique);const a=n.emotion?{type:n.emotion.detected,intensity:n.emotion.intensity}:{type:"neutral",intensity:.5};return(0,Ie.A)((0,Ie.A)({},e),{},{techniques:t,emotions:[...e.emotions,a],moodTrend:[...e.moodTrend,a.intensity]})});const a=n.emotion?{type:n.emotion.detected,intensity:n.emotion.intensity}:void 0,r={id:"therapist-".concat(Date.now()),content:n.message,isFromUser:!1,timestamp:new Date,emotion:a,technique:n.technique,suggestedActivity:n.suggestedActivity};if(l(e=>[...e,r]),t&&t(r.content,!1),await T(r.content),o.length>0&&o.length%5===0){const e=await Zo.xpService.addXP(s.id,s.xp||0,{id:"chat-xp-".concat(Date.now()),type:"chat",xp:5,description:"Meaningful conversation milestone"});i&&i((0,Ie.A)((0,Ie.A)({},s),{},{xp:e.newXP,avatarLevel:e.newLevel}))}}catch(h){var n,a,r;console.error("Error getting therapeutic response:",h),console.error("Error details:",{message:null===h||void 0===h?void 0:h.message,stack:null===h||void 0===h?void 0:h.stack,name:null===h||void 0===h?void 0:h.name});const e={id:"error-".concat(Date.now()),content:null!==h&&void 0!==h&&null!==(n=h.message)&&void 0!==n&&n.includes("No Google Cloud configuration")?"I'm having trouble connecting to Google Cloud services. Please check your configuration. However, I'm still here to support you - could you tell me more about what's on your mind?":null!==h&&void 0!==h&&null!==(a=h.message)&&void 0!==a&&a.includes("proxy")||null!==h&&void 0!==h&&null!==(r=h.message)&&void 0!==r&&r.includes("fetch")?"I'm having trouble connecting right now. Please check that the proxy server is running on port 5001. But I'm still here - what would you like to talk about?":"I'm experiencing a technical issue: ".concat((null===h||void 0===h?void 0:h.message)||"Unknown error",". Let's continue our conversation - what's on your mind?"),isFromUser:!1,timestamp:new Date};l(t=>[...t,e]),await T(e.content)}finally{m(!1)}},L=async()=>{v&&s&&await kl.endSession(s.id,v)},R=e=>{switch(e){case"cbt":return"\ud83e\udde0";case"dbt":return"\ud83d\udc9a";case"act":return"\ud83c\udfaf";case"mindfulness":return"\ud83e\uddd8";case"validation":return"\ud83d\udc9d";case"reframing":return"\ud83d\udd04";default:return"\ud83d\udcac"}},D=e=>{switch(e){case"cbt":return"CBT";case"dbt":return"DBT";case"act":return"ACT";case"mindfulness":return"Mindfulness";case"validation":return"Validation";case"reframing":return"Reframing";default:return"Exploration"}},I=()=>{var e;null===(e=S.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};return(0,$o.jsxs)("div",{className:"flex flex-col h-full bg-white",children:[(0,$o.jsxs)("div",{className:"p-4 border-b border-gray-200 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 text-white",children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:(0,$o.jsx)(cl,{className:"w-6 h-6"})}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h3",{className:"font-semibold",children:"Mira - Your Therapist"}),(0,$o.jsx)("p",{className:"text-sm text-white/80",children:"Licensed Therapist \u2022 CBT \u2022 DBT \u2022 ACT"})]})]}),(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)("button",{onClick:async()=>{if(v&&s)try{const{xpEarned:e}=await kl.saveSession(s.id,v),t=await Zo.xpService.addXP(s.id,s.xp||0,{id:"therapy-session-".concat(v),type:"chat",xp:e,description:"Therapy session (".concat(w.messages," messages)"),metadata:{sessionId:v,duration:w.duration,techniques:Array.from(w.techniques)}});i&&i((0,Ie.A)((0,Ie.A)({},s),{},{xp:t.newXP,avatarLevel:t.newLevel})),alert("Session saved successfully! Earned ".concat(e," XP."))}catch(e){console.error("Error saving session:",e),alert("Error saving session. Please try again.")}},className:"p-2 bg-white/20 rounded-lg hover:bg-white/30 transition",title:"Save Session",children:(0,$o.jsx)(dl,{className:"w-4 h-4"})}),(0,$o.jsx)("button",{onClick:()=>{g(!f),h&&(window.speechSynthesis.cancel(),p(!1),a&&a(!1))},className:"p-2 rounded-lg transition-colors ".concat(f?"bg-red-500/20 text-red-200":"bg-white/20 text-white"),title:f?"Unmute":"Mute",children:f?(0,$o.jsx)(ul,{className:"w-4 h-4"}):(0,$o.jsx)(ml,{className:"w-4 h-4"})})]})]}),(0,$o.jsxs)("div",{className:"flex items-center gap-4 text-xs text-white/80 mt-2",children:[(0,$o.jsxs)("span",{children:["\u23f1\ufe0f ",w.duration," min"]}),(0,$o.jsxs)("span",{children:["\ud83d\udcac ",w.messages," messages"]}),(0,$o.jsxs)("span",{children:["\ud83c\udfaf ",w.techniques.size," techniques"]}),w.moodTrend.length>0&&(0,$o.jsxs)("span",{className:"flex items-center gap-1",children:[(0,$o.jsx)(hl,{className:"w-3 h-3"}),(w.moodTrend.reduce((e,t)=>e+t,0)/w.moodTrend.length*100).toFixed(0),"% positive"]})]})]}),(0,$o.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gradient-to-b from-blue-50/30 to-purple-50/30",children:[(0,$o.jsx)(De,{children:o.map(e=>{return(0,$o.jsx)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex ".concat(e.isFromUser?"justify-end":"justify-start"),children:(0,$o.jsxs)("div",{className:"flex items-start space-x-2 ".concat(e.isFromUser?"flex-row-reverse space-x-reverse":""),children:[!e.isFromUser&&(0,$o.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center text-white text-sm flex-shrink-0",children:(0,$o.jsx)(cl,{className:"w-4 h-4"})}),(0,$o.jsxs)("div",{className:"max-w-xs lg:max-w-md rounded-2xl p-3 ".concat(e.isFromUser?"bg-gradient-to-r from-blue-500 to-blue-600 text-white":"bg-white text-gray-800 shadow-sm border border-gray-100"),children:[(0,$o.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,$o.jsx)("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:e.content}),e.technique&&!e.isFromUser&&(0,$o.jsx)("div",{className:"flex-shrink-0 ml-2",title:D(e.technique),children:(0,$o.jsx)("span",{className:"text-lg",children:R(e.technique)})})]}),e.suggestedActivity&&(0,$o.jsxs)(Mo.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"mt-2 pt-2 border-t border-gray-200 flex items-center gap-2 text-xs text-gray-600",children:[(0,$o.jsx)(pl,{className:"w-3 h-3"}),(0,$o.jsxs)("span",{children:["Suggested: ","breathing-dragon"===e.suggestedActivity?"\ud83d\udc09 Breathing Exercise":"gratitude-hunt"===e.suggestedActivity?"\ud83d\ude4f Gratitude Journal":"mindfulness"===e.suggestedActivity?"\ud83e\uddd8 Mindfulness":e.suggestedActivity]})]}),(0,$o.jsx)("div",{className:"text-xs opacity-70 mt-1",children:(t=e.timestamp,t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))})]}),e.isFromUser&&(0,$o.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center text-gray-600 text-sm flex-shrink-0",children:(0,$o.jsx)(fl,{className:"w-4 h-4"})})]})},e.id);var t})}),u&&(0,$o.jsxs)(Mo.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center space-x-2 text-gray-500",children:[(0,$o.jsx)(gl,{className:"w-4 h-4 animate-spin"}),(0,$o.jsx)("span",{className:"text-sm",children:"Mira is thinking..."})]}),(0,$o.jsx)("div",{ref:S})]}),(0,$o.jsxs)("div",{className:"p-4 border-t border-gray-200 bg-white",children:[(0,$o.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,$o.jsxs)("div",{className:"flex-1 relative",children:[(0,$o.jsx)("textarea",{value:c,onChange:e=>d(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),M())},placeholder:"Share what's on your mind...",className:"w-full p-3 pr-10 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:2,disabled:u}),(0,$o.jsx)("button",{onClick:async()=>{if(x)y(!1),Cl.stopListening();else{y(!0);try{const e=await Cl.startListening();e&&(d(e),y(!1))}catch(e){console.error("Error with voice input:",e),y(!1)}}},className:"absolute right-2 bottom-2 p-2 rounded-lg transition-colors ".concat(x?"bg-red-100 text-red-600 hover:bg-red-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),title:x?"Stop listening":"Voice input",children:x?(0,$o.jsx)(xl,{className:"w-4 h-4"}):(0,$o.jsx)(yl,{className:"w-4 h-4"})})]}),(0,$o.jsx)("button",{onClick:M,disabled:!c.trim()||u,className:"p-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl hover:from-blue-600 hover:to-purple-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:u?(0,$o.jsx)(gl,{className:"w-5 h-5 animate-spin"}):(0,$o.jsx)(vl,{className:"w-5 h-5"})})]}),(0,$o.jsxs)("div",{className:"mt-2 flex items-center justify-between text-xs text-gray-500",children:[(0,$o.jsx)("span",{children:"Press Enter to send, Shift+Enter for new line"}),(0,$o.jsxs)("span",{children:["\ud83d\udcac ",w.messages," messages in this session"]})]})]})]})}function Ml(e){let{level:t}=e;const n=e=>40+5*Math.floor(e/5);return(0,$o.jsx)(Mo.div,{className:"".concat((e=>e<5?"bg-gray-400":e<10?"bg-green-400":e<15?"bg-blue-400":e<20?"bg-purple-400":"bg-yellow-400")(t)," rounded-full flex items-center justify-center text-white font-bold shadow-lg"),style:{width:n(t),height:n(t)},animate:{scale:[1,1.05,1],rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0,repeatType:"reverse"},children:(0,$o.jsx)("span",{className:"text-lg",children:"\ud83e\uddd8"})})}function Ll(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isStatic:n}=(0,r.useContext)(_e),a=(0,r.useRef)(null),s=function(e){const t=Se(()=>Rr(e)),{isStatic:n}=(0,r.useContext)(_e);if(n){const[,n]=(0,r.useState)(e);(0,r.useEffect)(()=>t.on("change",n),[])}return t}(ct(e)?e.get():e),i=()=>{a.current&&a.current.stop()};return(0,r.useInsertionEffect)(()=>s.attach((e,r)=>{if(n)return r(e);if(i(),a.current=ar((0,Ie.A)((0,Ie.A)({keyframes:[s.get(),e],velocity:s.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01},t),{},{onUpdate:r})),!je.isProcessing){const e=performance.now()-je.timestamp;e<30&&(a.current.time=Vn(e))}return s.get()},i),[JSON.stringify(t)]),fe(()=>{if(ct(e))return e.on("change",e=>s.set(parseFloat(e)))},[s]),s}function Rl(e){let{value:t,duration:n=1,className:a="",prefix:s="",suffix:i="",decimals:o=0}=e;const[l,c]=(0,r.useState)(t),d=Ll(0,{stiffness:100,damping:30});return(0,r.useEffect)(()=>{d.set(t);const e=d.on("change",e=>{c(e)});return()=>e()},[t,d]),(0,$o.jsxs)("span",{className:a,children:[s,l.toFixed(o),i]})}const Dl={sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl","3xl":"text-3xl","4xl":"text-4xl"};function Il(e){let{children:t,gradient:n="from-pink-500 via-purple-500 to-blue-500",className:a="",size:r="lg"}=e;return(0,$o.jsx)(Mo.span,{className:"\n        bg-gradient-to-r ".concat(n,"\n        bg-clip-text text-transparent\n        font-bold\n        ").concat(Dl[r],"\n        ").concat(a,"\n      "),animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:3,repeat:1/0,ease:"linear"},style:{backgroundSize:"200% 200%"},children:t})}function _l(e){let{currentXP:t,level:n}=e;const a=Zo.xpService.getLevelProgress(t),r=a.currentLevel,s=a.progress,i=a.xpToNextLevel;return(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsxs)("div",{className:"text-right",children:[(0,$o.jsxs)(Il,{gradient:"from-blue-500 via-purple-500 to-pink-500",size:"sm",children:["Level ",r]}),(0,$o.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,$o.jsx)(Rl,{value:t})," XP"]})]}),(0,$o.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-3 overflow-hidden relative",children:(0,$o.jsx)(Mo.div,{className:"h-full bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-full relative overflow-hidden",initial:{width:0},animate:{width:"".concat(Math.min(s,100),"%")},transition:{duration:.5,ease:"easeOut"},children:(0,$o.jsx)(Mo.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,ease:"linear"}})})}),(0,$o.jsx)("div",{className:"text-xs text-gray-600",children:i>0?(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsx)(Rl,{value:i})," to next level"]}):"Max Level!"})]})}const Ol=ll("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Fl=ll("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);function zl(e){let{onComplete:t}=e;const{setUser:n}=Xo(),[a,s]=(0,r.useState)(0),[i,o]=(0,r.useState)({nickname:"",age:"",language:"en"}),l=[{title:"Welcome to MindBloom",subtitle:"Your AI-powered mental wellness companion",content:(0,$o.jsxs)("div",{className:"text-center space-y-4",children:[(0,$o.jsx)(Mo.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},children:(0,$o.jsx)(Ol,{className:"w-16 h-16 text-primary-500 mx-auto"})}),(0,$o.jsx)("p",{className:"text-gray-600",children:"I'm Mira, your personal wellness guide. I'm here to support you on your mental health journey with empathy, understanding, and evidence-based techniques."})]})},{title:"Privacy & Safety First",subtitle:"Your conversations are secure and anonymous",content:(0,$o.jsxs)("div",{className:"text-center space-y-4",children:[(0,$o.jsx)(Mo.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},children:(0,$o.jsx)(Fl,{className:"w-16 h-16 text-wellness-500 mx-auto"})}),(0,$o.jsxs)("div",{className:"space-y-2 text-left",children:[(0,$o.jsx)("p",{className:"text-gray-600",children:"\u2713 End-to-end encrypted conversations"}),(0,$o.jsx)("p",{className:"text-gray-600",children:"\u2713 No personal data stored"}),(0,$o.jsx)("p",{className:"text-gray-600",children:"\u2713 Crisis detection with immediate support"}),(0,$o.jsx)("p",{className:"text-gray-600",children:"\u2713 Evidence-based CBT techniques"})]})]})},{title:"Let's Get Started",subtitle:"Tell me a bit about yourself",content:(0,$o.jsxs)("div",{className:"space-y-4",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"What should I call you?"}),(0,$o.jsx)("input",{type:"text",value:i.nickname,onChange:e=>o((0,Ie.A)((0,Ie.A)({},i),{},{nickname:e.target.value})),placeholder:"Enter your nickname",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your age"}),(0,$o.jsx)("input",{type:"number",value:i.age,onChange:e=>o((0,Ie.A)((0,Ie.A)({},i),{},{age:e.target.value})),placeholder:"Enter your age",min:"13",max:"100",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Language"}),(0,$o.jsxs)("select",{value:i.language,onChange:e=>o((0,Ie.A)((0,Ie.A)({},i),{},{language:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,$o.jsx)("option",{value:"en",children:"English"}),(0,$o.jsx)("option",{value:"es",children:"Spanish"}),(0,$o.jsx)("option",{value:"fr",children:"French"}),(0,$o.jsx)("option",{value:"de",children:"German"})]})]})]})}],c=l[a];return(0,$o.jsx)(Mo.div,{className:"fixed inset-0 bg-gradient-to-br from-primary-50 to-wellness-50 flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,$o.jsxs)(Mo.div,{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:300,damping:30},children:[(0,$o.jsxs)("div",{className:"text-center mb-6",children:[(0,$o.jsx)(Mo.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1,type:"spring",stiffness:200},children:(0,$o.jsx)(pl,{className:"w-12 h-12 text-primary-500 mx-auto mb-4"})}),(0,$o.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:c.title}),(0,$o.jsx)("p",{className:"text-gray-600",children:c.subtitle})]}),(0,$o.jsx)(Mo.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:c.content},a),(0,$o.jsxs)("div",{className:"flex justify-between items-center mt-8",children:[(0,$o.jsx)("button",{onClick:()=>s(Math.max(0,a-1)),disabled:0===a,className:"px-4 py-2 text-gray-600 hover:text-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",children:"Back"}),(0,$o.jsx)("div",{className:"flex space-x-2",children:l.map((e,t)=>(0,$o.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(t===a?"bg-primary-500":"bg-gray-300")},t))}),a<l.length-1?(0,$o.jsx)("button",{onClick:()=>s(a+1),className:"px-6 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:"Next"}):(0,$o.jsx)("button",{onClick:()=>{if(i.nickname&&i.age){const e={id:Date.now().toString(),nickname:i.nickname,age:parseInt(i.age),language:i.language,avatarLevel:1,xp:0,streak:1,createdAt:new Date};n(e),t()}},disabled:!i.nickname||!i.age,className:"px-6 py-2 bg-wellness-500 text-white rounded-lg hover:bg-wellness-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Start Journey"})]})]})})}const Vl=ll("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Bl=ll("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ul=ll("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Hl=ll("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);function Wl(){const{crisisDetected:e,setCrisisDetected:t}=Xo();if(!e)return null;const n=(e=>{switch(e){case"critical":return{title:"Immediate Support Available",message:"Your safety is our top priority. Please reach out for immediate help.",color:"bg-red-500",resources:[{name:"Suicide & Crisis Lifeline",number:"988",available:"24/7"},{name:"Crisis Text Line",number:"Text HOME to 741741",available:"24/7"},{name:"Emergency Services",number:"911",available:"24/7"}]};case"high":return{title:"Professional Support Recommended",message:"We encourage you to reach out to a mental health professional or trusted person.",color:"bg-orange-500",resources:[{name:"National Suicide Prevention Lifeline",number:"988",available:"24/7"},{name:"Crisis Text Line",number:"Text HOME to 741741",available:"24/7"},{name:"SAMHSA National Helpline",number:"1-800-662-4357",available:"24/7"}]};default:return{title:"Support Resources",message:"Here are some resources that might be helpful.",color:"bg-yellow-500",resources:[{name:"Crisis Text Line",number:"Text HOME to 741741",available:"24/7"},{name:"SAMHSA National Helpline",number:"1-800-662-4357",available:"24/7"}]}}})(e.severity);return(0,$o.jsx)(Mo.div,{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,$o.jsxs)(Mo.div,{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:300,damping:30},children:[(0,$o.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)("div",{className:"p-2 rounded-full ".concat(n.color),children:(0,$o.jsx)(Vl,{className:"w-6 h-6 text-white"})}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:n.title}),(0,$o.jsx)("p",{className:"text-sm text-gray-600",children:n.message})]})]}),(0,$o.jsx)("button",{onClick:()=>t(null),className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:(0,$o.jsx)(Bl,{className:"w-5 h-5 text-gray-500"})})]}),(0,$o.jsxs)("div",{className:"space-y-3",children:[(0,$o.jsx)("h3",{className:"font-semibold text-gray-800",children:"Immediate Support Resources:"}),n.resources.map((e,t)=>(0,$o.jsxs)(Mo.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)(Ul,{className:"w-4 h-4 text-primary-500"}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("p",{className:"font-medium text-gray-800",children:e.name}),(0,$o.jsx)("p",{className:"text-sm text-gray-600",children:e.number})]})]}),(0,$o.jsx)("span",{className:"text-xs text-gray-500",children:e.available})]},t))]}),(0,$o.jsx)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:(0,$o.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,$o.jsx)(Hl,{className:"w-5 h-5 text-blue-500 mt-0.5"}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("p",{className:"text-sm text-blue-800 font-medium",children:"Remember: You're not alone"}),(0,$o.jsx)("p",{className:"text-sm text-blue-700",children:"These feelings are temporary, and there are people who want to help you through this difficult time."})]})]})}),(0,$o.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,$o.jsx)("button",{onClick:()=>t(null),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"I understand"}),(0,$o.jsx)("button",{onClick:()=>{window.open("tel:988")},className:"px-6 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:"Call 988"})]})]})})}function Gl(){return(0,$o.jsx)(Mo.div,{className:"fixed inset-0 bg-gradient-to-br from-primary-50 to-wellness-50 flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,$o.jsxs)("div",{className:"text-center",children:[(0,$o.jsx)(Mo.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"mb-4",children:(0,$o.jsx)(gl,{className:"w-12 h-12 text-primary-500 mx-auto"})}),(0,$o.jsxs)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[(0,$o.jsx)(Ol,{className:"w-8 h-8 text-wellness-500 mx-auto mb-2"}),(0,$o.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Preparing MindBloom"}),(0,$o.jsx)("p",{className:"text-gray-600",children:"Setting up your personalized wellness experience..."})]})]})})}const ql=ll("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Yl=ll("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Xl=ll("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),$l=ll("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),Kl=ll("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Jl=ll("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),Ql=ll("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]),Zl=ll("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),ec=ll("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),tc=ll("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),nc=ll("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),ac=ll("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),rc=ll("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),sc=ll("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ic=ll("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),oc=ll("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);var lc=n(853);function cc(e){let{onBack:t}=e;const[n,a]=(0,r.useState)([]),[s,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1),f=(0,r.useRef)(null),g=(0,r.useRef)(null);(0,r.useEffect)(()=>{y()},[]),(0,r.useEffect)(()=>{x()},[n]);const x=()=>{var e;null===(e=f.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},y=async()=>{l(!0);try{const e=await lc.geminiService.getInitialGreeting(),t={id:Date.now().toString(),content:e,isFromUser:!1,timestamp:new Date};a([t]),v(e)}catch(e){console.error("Error initializing chat:",e);const t={id:Date.now().toString(),content:"Hello! I'm Mira, your wellness companion. I'm here to listen and support you. What's on your mind today?",isFromUser:!1,timestamp:new Date};a([t])}finally{l(!1)}},v=e=>{if(u||!("speechSynthesis"in window))return;window.speechSynthesis.cancel();const t=new SpeechSynthesisUtterance(e);t.rate=.9,t.pitch=1.1,t.volume=.8,t.onstart=()=>p(!0),t.onend=()=>p(!1),t.onerror=()=>p(!1),g.current=t,window.speechSynthesis.speak(t)},b=async()=>{if(!s.trim()||o)return;const e={id:Date.now().toString(),content:s.trim(),isFromUser:!0,timestamp:new Date};a(t=>[...t,e]),i(""),l(!0);try{const t=n.map(e=>({role:e.isFromUser?"user":"model",parts:[{text:e.content}]})),r=await lc.geminiService.generateTherapeuticResponse(e.content,t),s={id:(Date.now()+1).toString(),content:r,isFromUser:!1,timestamp:new Date};a(e=>[...e,s]),v(r)}catch(t){console.error("Error sending message:",t);const e={id:(Date.now()+1).toString(),content:"I'm sorry, I'm having trouble responding right now. Please try again, and remember that I'm here to support you.",isFromUser:!1,timestamp:new Date};a(t=>[...t,e])}finally{l(!1)}};return(0,$o.jsxs)("div",{className:"h-full bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex flex-col",children:[(0,$o.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200 p-4",children:(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:"\u2190"}),(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:(0,$o.jsx)(ac,{className:"w-5 h-5 text-white"})}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h1",{className:"text-lg font-semibold text-gray-800",children:"Chat with Mira"}),(0,$o.jsx)("p",{className:"text-sm text-gray-600",children:"Your AI wellness companion"})]})]})]}),(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)("button",{onClick:()=>{m(!u),u||(window.speechSynthesis.cancel(),p(!1))},className:"p-2 rounded-lg transition-colors ".concat(u?"bg-red-100 text-red-600":"bg-gray-100 text-gray-600"),title:u?"Unmute":"Mute",children:u?(0,$o.jsx)(ul,{className:"w-4 h-4"}):(0,$o.jsx)(ml,{className:"w-4 h-4"})}),h&&(0,$o.jsxs)("div",{className:"flex items-center space-x-1 text-blue-600",children:[(0,$o.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-pulse"}),(0,$o.jsx)("span",{className:"text-xs",children:"Speaking"})]})]})]})}),(0,$o.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[(0,$o.jsx)(De,{children:n.map(e=>(0,$o.jsx)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"flex ".concat(e.isFromUser?"justify-end":"justify-start"),children:(0,$o.jsxs)("div",{className:"flex items-start space-x-2 max-w-xs lg:max-w-md ".concat(e.isFromUser?"flex-row-reverse space-x-reverse":""),children:[(0,$o.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat(e.isFromUser?"bg-gradient-to-r from-green-500 to-teal-500":"bg-gradient-to-r from-blue-500 to-purple-500"),children:e.isFromUser?(0,$o.jsx)(fl,{className:"w-4 h-4 text-white"}):(0,$o.jsx)(ac,{className:"w-4 h-4 text-white"})}),(0,$o.jsxs)("div",{className:"px-4 py-2 rounded-2xl ".concat(e.isFromUser?"bg-gradient-to-r from-green-500 to-teal-500 text-white":"bg-white text-gray-800 shadow-sm border border-gray-200"),children:[(0,$o.jsx)("p",{className:"text-sm leading-relaxed",children:e.content}),(0,$o.jsx)("div",{className:"text-xs mt-1 ".concat(e.isFromUser?"text-green-100":"text-gray-500"),children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},e.id))}),o&&(0,$o.jsx)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex justify-start",children:(0,$o.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,$o.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:(0,$o.jsx)(ac,{className:"w-4 h-4 text-white"})}),(0,$o.jsx)("div",{className:"bg-white px-4 py-2 rounded-2xl shadow-sm border border-gray-200",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)(gl,{className:"w-4 h-4 animate-spin text-blue-500"}),(0,$o.jsx)("span",{className:"text-sm text-gray-600",children:"Mira is thinking..."})]})})]})}),(0,$o.jsx)("div",{ref:f})]}),(0,$o.jsxs)("div",{className:"bg-white border-t border-gray-200 p-4",children:[(0,$o.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,$o.jsx)("div",{className:"flex-1",children:(0,$o.jsx)("textarea",{value:s,onChange:e=>i(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),b())},placeholder:"Share what's on your mind...",className:"w-full px-4 py-3 border border-gray-300 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:1,style:{minHeight:"48px",maxHeight:"120px"}})}),(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)("button",{onClick:()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window))return void alert("Speech recognition is not supported in this browser");const e=new(window.SpeechRecognition||window.webkitSpeechRecognition);e.continuous=!1,e.interimResults=!1,e.lang="en-US",e.onstart=()=>d(!0),e.onresult=e=>{const t=e.results[0][0].transcript;i(t),d(!1)},e.onerror=()=>d(!1),e.onend=()=>d(!1),e.start()},disabled:c||o,className:"p-3 rounded-full transition-colors ".concat(c?"bg-red-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"," ").concat(o?"opacity-50 cursor-not-allowed":""),title:"Voice input",children:c?(0,$o.jsx)(xl,{className:"w-4 h-4"}):(0,$o.jsx)(yl,{className:"w-4 h-4"})}),(0,$o.jsx)("button",{onClick:b,disabled:!s.trim()||o,className:"p-3 rounded-full transition-colors ".concat(s.trim()&&!o?"bg-gradient-to-r from-blue-500 to-purple-500 text-white hover:from-blue-600 hover:to-purple-600":"bg-gray-200 text-gray-400 cursor-not-allowed"),children:(0,$o.jsx)(vl,{className:"w-4 h-4"})})]})]}),(0,$o.jsxs)("div",{className:"mt-2 flex items-center justify-between text-xs text-gray-500",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,$o.jsx)(Ol,{className:"w-3 h-3"}),(0,$o.jsx)("span",{children:"Mira is here to support you"})]}),(0,$o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,$o.jsx)(pl,{className:"w-3 h-3"}),(0,$o.jsx)("span",{children:"Powered by Gemini AI"})]})]})]})]})}function dc(e){let{name:t,mood:n,level:a,isOnline:r,onClick:s}=e;return(0,$o.jsxs)(Mo.div,{className:"w-16 h-16 rounded-lg border-2 border-white shadow-lg overflow-hidden ".concat((e=>{switch(e){case"great":return"bg-gradient-to-br from-yellow-300 to-orange-400";case"good":return"bg-gradient-to-br from-green-300 to-emerald-400";case"okay":return"bg-gradient-to-br from-blue-300 to-cyan-400";case"struggling":return"bg-gradient-to-br from-purple-300 to-pink-400";case"need-support":return"bg-gradient-to-br from-red-300 to-rose-400";default:return"bg-gradient-to-br from-gray-300 to-slate-400"}})(n)," cursor-pointer"),whileHover:{scale:1.05},whileTap:{scale:.95},onClick:s,children:[(0,$o.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,$o.jsxs)("div",{className:"text-center",children:[(0,$o.jsx)("div",{className:"text-lg",children:"\ud83d\ude0a"}),(0,$o.jsxs)("div",{className:"text-xs font-bold text-white",children:["L",a]})]})}),r&&(0,$o.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full border border-white"})]})}function uc(e){let{name:t,icon:n,description:a,occupancy:r,capacity:s,color:i,onClick:o}=e;return(0,$o.jsxs)(Mo.div,{className:"p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 ".concat(i),whileHover:{scale:1.02},onClick:o,children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,$o.jsx)("div",{className:"text-2xl",children:n}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h3",{className:"font-semibold text-gray-800",children:t}),(0,$o.jsxs)("p",{className:"text-sm text-gray-600",children:[r,"/",s," online"]})]})]}),(0,$o.jsx)("p",{className:"text-sm text-gray-600",children:a})]})}function mc(e){let{title:t,description:n,xpReward:a,participants:r,difficulty:s,onJoin:i}=e;return(0,$o.jsxs)(Mo.div,{className:"p-4 bg-white rounded-lg border border-gray-200 shadow-sm",whileHover:{scale:1.02},children:[(0,$o.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h3",{className:"font-semibold text-gray-800",children:t}),(0,$o.jsx)("p",{className:"text-sm text-gray-600",children:n})]}),(0,$o.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"easy":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"hard":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(s)),children:s})]}),(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,$o.jsx)(ql,{className:"w-3 h-3"}),(0,$o.jsxs)("span",{children:["+",a," XP"]})]}),(0,$o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,$o.jsx)(Yl,{className:"w-3 h-3"}),(0,$o.jsx)("span",{children:r})]})]}),(0,$o.jsx)("button",{onClick:i,className:"px-3 py-1 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm",children:"Join"})]})]})}function hc(e){let{content:t,timestamp:n,reactions:a}=e;return(0,$o.jsxs)(Mo.div,{className:"p-3 bg-white rounded-lg border border-gray-200 shadow-sm",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[(0,$o.jsx)("p",{className:"text-gray-800 mb-2",children:t}),(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsx)("span",{className:"text-xs text-gray-500",children:n.toLocaleTimeString()}),(0,$o.jsx)("div",{className:"flex items-center space-x-2",children:a.map((e,t)=>(0,$o.jsx)("span",{className:"text-sm",children:e},t))})]})]})}function pc(e){let{story:t,onLike:n,onShare:a}=e;const r=[{id:"daily-wins",icon:"\ud83c\udf1f",color:"from-yellow-500 to-orange-500"},{id:"struggles",icon:"\ud83d\udcaa",color:"from-red-500 to-pink-500"},{id:"hope",icon:"\ud83c\udf08",color:"from-green-500 to-teal-500"},{id:"lessons-learned",icon:"\ud83c\udf93",color:"from-purple-500 to-indigo-500"}];return(0,$o.jsxs)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition-shadow duration-300",children:[(0,$o.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r ".concat((e=>{const t=r.find(t=>t.id===e);return(null===t||void 0===t?void 0:t.color)||"from-gray-500 to-gray-600"})(t.theme)," rounded-full flex items-center justify-center text-white font-bold"),children:(e=>{const t=r.find(t=>t.id===e);return(null===t||void 0===t?void 0:t.icon)||"\ud83d\udcda"})(t.theme)}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:t.title}),(0,$o.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,$o.jsxs)("span",{children:["by ",t.author]}),(0,$o.jsx)(Xl,{className:"w-4 h-4"}),(0,$o.jsx)("span",{children:t.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})]}),t.isSpotlight&&(0,$o.jsxs)("div",{className:"flex items-center space-x-1 text-yellow-500",children:[(0,$o.jsx)($l,{className:"w-5 h-5"}),(0,$o.jsx)("span",{className:"text-sm font-medium",children:"Spotlight"})]})]}),(0,$o.jsx)("p",{className:"text-gray-700 mb-4 leading-relaxed",children:t.content}),(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,$o.jsxs)("button",{onClick:()=>n(t.id),className:"flex items-center space-x-2 px-3 py-1 rounded-full transition-colors ".concat(t.isLiked?"bg-red-100 text-red-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[(0,$o.jsx)(Ol,{className:"w-4 h-4 ".concat(t.isLiked?"fill-current":"")}),(0,$o.jsx)("span",{className:"text-sm",children:t.likes})]}),(0,$o.jsxs)("button",{className:"flex items-center space-x-2 px-3 py-1 rounded-full bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors",children:[(0,$o.jsx)(Hl,{className:"w-4 h-4"}),(0,$o.jsx)("span",{className:"text-sm",children:"Comment"})]}),(0,$o.jsxs)("button",{onClick:()=>a(t.id),className:"flex items-center space-x-2 px-3 py-1 rounded-full bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors",children:[(0,$o.jsx)(Kl,{className:"w-4 h-4"}),(0,$o.jsx)("span",{className:"text-sm",children:"Share"})]})]}),(0,$o.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-green-600",children:[(0,$o.jsx)(hl,{className:"w-4 h-4"}),(0,$o.jsxs)("span",{children:["+",t.xpEarned," XP"]})]})]})]})}const fc=[{id:"1",title:"Today I asked for help",content:"I've always been the \"strong one\" in my family, but today I finally told my roommate I was struggling with anxiety. She didn't judge me - she just listened and offered to help. Sometimes the bravest thing we can do is be vulnerable.",author:"Anonymous Student",theme:"daily-wins",timestamp:new Date(Date.now()-18e5),likes:24,isLiked:!1,isAnonymous:!0,isSpotlight:!0,xpEarned:15},{id:"2",title:"The power of small steps",content:"I've been feeling overwhelmed with finals, but instead of trying to study for 8 hours straight, I started with just 25 minutes. I used the pomodoro technique and actually got more done than usual. Small steps really do add up.",author:"Night Owl",theme:"lessons-learned",timestamp:new Date(Date.now()-36e5),likes:18,isLiked:!0,isAnonymous:!0,isSpotlight:!1,xpEarned:12},{id:"3",title:"Finding hope in dark times",content:"Last month I felt like giving up on everything. But I started writing down one good thing each day, even if it was just \"the sun was shining.\" Slowly, I began to notice more positive things. Hope isn't about being happy all the time - it's about believing things can get better.",author:"Hope Seeker",theme:"hope",timestamp:new Date(Date.now()-72e5),likes:31,isLiked:!1,isAnonymous:!0,isSpotlight:!1,xpEarned:20},{id:"4",title:"Struggling with perfectionism",content:"I used to think I had to be perfect at everything. Today I turned in a paper that wasn't perfect, and you know what? The world didn't end. My professor actually said it was good. I'm learning that \"good enough\" is often better than perfect.",author:"Recovering Perfectionist",theme:"struggles",timestamp:new Date(Date.now()-144e5),likes:22,isLiked:!1,isAnonymous:!0,isSpotlight:!1,xpEarned:18}],gc=[{id:"all",label:"All Stories",icon:"\ud83d\udcda",color:"from-blue-500 to-purple-500"},{id:"daily-wins",label:"Daily Wins",icon:"\ud83c\udf1f",color:"from-yellow-500 to-orange-500"},{id:"struggles",label:"Struggles",icon:"\ud83d\udcaa",color:"from-red-500 to-pink-500"},{id:"hope",label:"Hope",icon:"\ud83c\udf08",color:"from-green-500 to-teal-500"},{id:"lessons-learned",label:"Lessons Learned",icon:"\ud83c\udf93",color:"from-purple-500 to-indigo-500"}];function xc(e){let{user:t}=e;const{setUser:n}=Xo(),[a,s]=(0,r.useState)("stories"),[i,o]=(0,r.useState)(fc),[l,c]=(0,r.useState)("all"),[d,u]=(0,r.useState)(!1),[m,h]=(0,r.useState)({title:"",content:"",theme:"daily-wins"}),[p,f]=(0,r.useState)(null),[g,x]=(0,r.useState)(!1),[y,v]=(0,r.useState)(null),[b,w]=(0,r.useState)(150),[j,N]=(0,r.useState)({level:1,title:"Newcomer",tokens:150,rank:"Bronze"}),k=[{content:"Feeling grateful for this supportive community today! \ud83d\udc9d",timestamp:new Date(Date.now()-3e5),reactions:["\ud83d\udc9d","\ud83c\udf1f","\ud83e\udd17"]},{content:"Just completed my first mindfulness challenge - feeling more centered! \ud83e\uddd8",timestamp:new Date(Date.now()-6e5),reactions:["\ud83c\udf89","\ud83d\udcaa","\u2728"]},{content:"Thank you to everyone who shared their stories. You're not alone! \ud83e\udd1d",timestamp:new Date(Date.now()-9e5),reactions:["\ud83e\udd1d","\ud83d\udc99","\ud83c\udf08"]}],S=[{name:"Mindful Garden",icon:"\ud83c\udf31",description:"Peaceful reflection and growth",occupancy:12,capacity:50,color:"bg-green-50 border-green-200 hover:border-green-300"},{name:"Wisdom Library",icon:"\ud83d\udcda",description:"Share knowledge and stories",occupancy:8,capacity:30,color:"bg-blue-50 border-blue-200 hover:border-blue-300"},{name:"Cozy Cafe",icon:"\u2615",description:"Casual conversations and coffee chats",occupancy:15,capacity:40,color:"bg-amber-50 border-amber-200 hover:border-amber-300"},{name:"Creative Workshop",icon:"\ud83c\udfa8",description:"Art therapy and skill-building",occupancy:6,capacity:25,color:"bg-purple-50 border-purple-200 hover:border-purple-300"},{name:"Peaceful Sanctuary",icon:"\ud83d\udd4a\ufe0f",description:"Meditation and inner connection",occupancy:4,capacity:20,color:"bg-pink-50 border-pink-200 hover:border-pink-300"},{name:"Joy Playground",icon:"\ud83c\udfaa",description:"Celebration and fun activities",occupancy:22,capacity:60,color:"bg-yellow-50 border-yellow-200 hover:border-yellow-300"}],C="all"===l?i:i.filter(e=>e.theme===l),E=i.find(e=>e.isSpotlight),P=e=>{o(t=>t.map(t=>t.id===e?(0,Ie.A)((0,Ie.A)({},t),{},{isLiked:!t.isLiked,likes:t.isLiked?t.likes-1:t.likes+1}):t))},A=e=>{console.log("Sharing story: ".concat(e))};(0,r.useEffect)(()=>{t&&T()},[t]);const T=async()=>{try{const e=await bl.vertexAIService.generateResponse([{role:"user",parts:[{text:"Generate a daily reflection prompt for a mental wellness community. It should be warm, thoughtful, and encourage meaningful sharing (1 sentence). Make it personal and engaging."}]}]);f(e)}catch(e){console.error("Error loading daily prompt:",e),f("What's one thing that brought you peace or joy today?")}},M=async()=>{x(!0);try{const e=await Cl.startListening();v(e),console.log("Voice search:",e)}catch(e){console.error("Error with voice search:",e)}finally{x(!1)}};return(0,$o.jsxs)("div",{className:"h-full bg-gradient-to-br from-sky-50 via-emerald-50 to-purple-50 p-4",children:[(0,$o.jsxs)("div",{className:"mb-6",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,$o.jsx)(Jl,{className:"w-6 h-6 text-emerald-600"}),(0,$o.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Community & Stories"})]}),(0,$o.jsx)("p",{className:"text-gray-600",children:"Connect with others and share your journey in a safe, supportive space."})]}),p&&(0,$o.jsxs)(Mo.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-2xl shadow-lg p-6 border-2 border-indigo-200",children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,$o.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,$o.jsx)(pl,{className:"w-5 h-5 mr-2 text-indigo-500"}),"Today's Reflection Prompt",(0,$o.jsx)("span",{className:"ml-2 text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded-full",children:"AI Generated"})]}),(0,$o.jsx)("button",{onClick:T,className:"text-xs text-gray-600 hover:text-gray-800",children:"New Prompt"})]}),(0,$o.jsxs)("p",{className:"text-gray-700 text-lg italic",children:['"',p,'"']})]}),(0,$o.jsx)(Mo.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-2xl shadow-lg p-4 border-2 border-yellow-200",children:(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)(Ql,{className:"w-6 h-6 text-yellow-500"}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:b}),(0,$o.jsx)("div",{className:"text-xs text-gray-600",children:"Mind Tokens"})]})]}),(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)(Zl,{className:"w-5 h-5 text-purple-500"}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("div",{className:"text-sm font-semibold text-gray-800",children:j.title}),(0,$o.jsxs)("div",{className:"text-xs text-gray-600",children:["Level ",j.level," \u2022 ",j.rank]})]})]})]}),(0,$o.jsx)("div",{className:"flex items-center space-x-2",children:(0,$o.jsx)("button",{onClick:M,disabled:g,className:"px-3 py-2 rounded-lg transition-colors flex items-center space-x-2 ".concat(g?"bg-red-100 text-red-600 animate-pulse":"bg-blue-100 text-blue-600 hover:bg-blue-200"),title:"Voice Search Community",children:g?(0,$o.jsx)(xl,{className:"w-4 h-4"}):(0,$o.jsx)(ec,{className:"w-4 h-4"})})})]})}),y&&(0,$o.jsxs)(Mo.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6 bg-white rounded-xl shadow-lg p-4 border-2 border-blue-200",children:[(0,$o.jsxs)("div",{className:"flex items-center mb-3",children:[(0,$o.jsx)(cl,{className:"w-5 h-5 text-blue-500 mr-2"}),(0,$o.jsx)("h3",{className:"font-semibold text-gray-800",children:"Voice Search Results"})]}),(0,$o.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:['You searched: "',y,'"']}),(0,$o.jsx)("div",{className:"text-sm text-gray-500",children:"Finding related community threads..."})]}),(0,$o.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[(0,$o.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200 text-center",children:[(0,$o.jsx)("div",{className:"text-2xl font-bold text-emerald-600",children:"1,247"}),(0,$o.jsx)("div",{className:"text-sm text-gray-600",children:"Community Members"})]}),(0,$o.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200 text-center",children:[(0,$o.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:"89"}),(0,$o.jsx)("div",{className:"text-sm text-gray-600",children:"Online Now"})]}),(0,$o.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200 text-center",children:[(0,$o.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:i.length}),(0,$o.jsx)("div",{className:"text-sm text-gray-600",children:"Stories Shared"})]}),(0,$o.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200 text-center",children:[(0,$o.jsx)("div",{className:"text-2xl font-bold text-pink-600",children:i.reduce((e,t)=>e+t.likes,0)}),(0,$o.jsx)("div",{className:"text-sm text-gray-600",children:"Hearts Given"})]})]}),(0,$o.jsx)("div",{className:"flex space-x-1 mb-6 bg-white rounded-lg p-1 border border-gray-200 overflow-x-auto",children:[{id:"stories",label:"Stories",icon:tc},{id:"spaces",label:"Spaces",icon:Jl},{id:"challenges",label:"Challenges",icon:nc},{id:"chat",label:"Community Chat",icon:Hl},{id:"mira",label:"Chat with Mira",icon:ac},{id:"achievements",label:"Achievements",icon:rc}].map(e=>(0,$o.jsxs)("button",{onClick:()=>s(e.id),className:"flex-1 flex items-center justify-center space-x-2 py-2 px-4 rounded-md transition-colors whitespace-nowrap ".concat(a===e.id?"bg-emerald-500 text-white":"text-gray-600 hover:bg-gray-100"),children:[(0,$o.jsx)(e.icon,{className:"w-4 h-4"}),(0,$o.jsx)("span",{className:"text-sm font-medium",children:e.label})]},e.id))}),(0,$o.jsx)("div",{className:"h-96 overflow-y-auto",children:(0,$o.jsxs)(De,{mode:"wait",children:["stories"===a&&(0,$o.jsxs)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[(0,$o.jsx)("div",{className:"flex justify-end mb-4",children:(0,$o.jsxs)("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:from-blue-600 hover:to-purple-600 transition-all duration-300 flex items-center space-x-2",children:[(0,$o.jsx)(sc,{className:"w-4 h-4"}),(0,$o.jsx)("span",{children:"Share Story"})]})}),E&&(0,$o.jsx)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-6",children:(0,$o.jsxs)("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 rounded-2xl p-6 text-white shadow-lg",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,$o.jsx)($l,{className:"w-6 h-6"}),(0,$o.jsx)("h2",{className:"text-xl font-bold",children:"Daily Spotlight"}),(0,$o.jsx)(pl,{className:"w-5 h-5"})]}),(0,$o.jsx)("h3",{className:"text-lg font-semibold mb-2",children:E.title}),(0,$o.jsx)("p",{className:"text-white/90 mb-4",children:E.content}),(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,$o.jsxs)("span",{className:"text-sm",children:["by ",E.author]}),(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)(Ol,{className:"w-4 h-4"}),(0,$o.jsx)("span",{children:E.likes})]})]}),(0,$o.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,$o.jsx)(ic,{className:"w-4 h-4"}),(0,$o.jsxs)("span",{children:["+",E.xpEarned," XP"]})]})]})]})}),(0,$o.jsx)("div",{className:"mb-6",children:(0,$o.jsx)("div",{className:"flex flex-wrap gap-2",children:gc.map(e=>(0,$o.jsxs)("button",{onClick:()=>c(e.id),className:"px-4 py-2 rounded-lg font-medium transition-all duration-300 ".concat(l===e.id?"bg-gradient-to-r ".concat(e.color," text-white shadow-lg"):"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"),children:[(0,$o.jsx)("span",{className:"mr-2",children:e.icon}),e.label]},e.id))})}),(0,$o.jsx)("div",{className:"space-y-6",children:C.map(e=>(0,$o.jsx)(pc,{story:e,onLike:P,onShare:A},e.id))})]},"stories"),"spaces"===a&&(0,$o.jsxs)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,$o.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Community Spaces"}),(0,$o.jsx)("button",{onClick:M,disabled:g,className:"px-3 py-2 rounded-lg transition-colors flex items-center space-x-2 ".concat(g?"bg-red-100 text-red-600":"bg-purple-100 text-purple-600 hover:bg-purple-200"),title:"Voice Search Spaces",children:g?(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsx)(xl,{className:"w-4 h-4"}),(0,$o.jsx)("span",{className:"text-xs",children:"Listening..."})]}):(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsx)(yl,{className:"w-4 h-4"}),(0,$o.jsx)("span",{className:"text-xs",children:"Voice Search"})]})})]}),(0,$o.jsxs)(Mo.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"mb-6 bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl shadow-lg p-4 border-2 border-purple-200",children:[(0,$o.jsxs)("div",{className:"flex items-center mb-3",children:[(0,$o.jsx)(oc,{className:"w-5 h-5 text-purple-500 mr-2"}),(0,$o.jsx)("h3",{className:"font-semibold text-gray-800",children:"Community Activity Map"}),(0,$o.jsx)("span",{className:"ml-2 text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded-full",children:"Interactive"})]}),(0,$o.jsx)("div",{className:"relative h-48 bg-white rounded-lg overflow-hidden",children:(0,$o.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,$o.jsxs)("div",{className:"relative w-full h-full",children:[S.slice(0,6).map((e,t)=>{const n=60*t*(Math.PI/180),a=80*Math.cos(n)+50,r=80*Math.sin(n)+50;return(0,$o.jsxs)(Mo.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{delay:.1*t},className:"absolute",style:{left:"".concat(a,"%"),top:"".concat(r,"%"),transform:"translate(-50%, -50%)"},children:[(0,$o.jsx)(Mo.div,{whileHover:{scale:1.2},className:"w-12 h-12 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white text-xl shadow-lg cursor-pointer",children:e.icon}),(0,$o.jsx)("div",{className:"absolute top-14 left-1/2 -translate-x-1/2 whitespace-nowrap text-xs font-medium text-gray-700",children:e.name})]},e.name)}),(0,$o.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:(0,$o.jsx)(Mo.div,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},className:"w-16 h-16 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full flex items-center justify-center text-white text-2xl shadow-xl",children:"\ud83c\udf38"})})]})})})]}),(0,$o.jsx)("div",{className:"grid grid-cols-2 gap-4",children:S.map(e=>(0,$o.jsx)(uc,(0,Ie.A)((0,Ie.A)({},e),{},{onClick:()=>{return t=e.name,void console.log("Entered space: ".concat(t));var t}}),e.name))}),(0,$o.jsxs)("div",{className:"mt-6",children:[(0,$o.jsx)("h3",{className:"text-md font-semibold text-gray-800 mb-3",children:"Online Now"}),(0,$o.jsx)("div",{className:"flex flex-wrap gap-3",children:[{name:"Alex",mood:"good",level:5,isOnline:!0},{name:"Sam",mood:"great",level:3,isOnline:!0},{name:"Jordan",mood:"okay",level:7,isOnline:!0},{name:"Taylor",mood:"good",level:4,isOnline:!0},{name:"Casey",mood:"struggling",level:2,isOnline:!0},{name:"Riley",mood:"good",level:6,isOnline:!0}].map(e=>(0,$o.jsx)(dc,(0,Ie.A)((0,Ie.A)({},e),{},{onClick:()=>console.log("Clicked ".concat(e.name))}),e.name))})]})]},"spaces"),"challenges"===a&&(0,$o.jsxs)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[(0,$o.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Wellness Challenges"}),[{title:"Daily Gratitude Practice",description:"Share one thing you're grateful for each day",xpReward:25,participants:45,difficulty:"easy"},{title:"Mindful Moments",description:"Practice 5 minutes of mindfulness daily",xpReward:30,participants:32,difficulty:"easy"},{title:"Community Support",description:"Offer support to at least one community member",xpReward:75,participants:18,difficulty:"medium"},{title:"Creative Expression",description:"Share a creative piece (art, writing, music)",xpReward:50,participants:28,difficulty:"medium"}].map(e=>(0,$o.jsx)(mc,(0,Ie.A)((0,Ie.A)({},e),{},{onJoin:()=>{return t=e.title,void console.log("Joined challenge: ".concat(t));var t}}),e.title))]},"challenges"),"chat"===a&&(0,$o.jsxs)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[(0,$o.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Community Chat"}),(0,$o.jsx)("div",{className:"space-y-3",children:k.map((e,t)=>(0,$o.jsx)(hc,(0,Ie.A)({},e),t))}),(0,$o.jsxs)("div",{className:"mt-4 p-3 bg-white rounded-lg border border-gray-200",children:[(0,$o.jsxs)("div",{className:"flex space-x-2",children:[(0,$o.jsx)("input",{type:"text",placeholder:"Share something with the community...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500"}),(0,$o.jsx)("button",{onClick:M,disabled:g,className:"p-2 rounded-lg transition-colors ".concat(g?"bg-red-100 text-red-600 animate-pulse":"bg-purple-100 text-purple-600 hover:bg-purple-200"),title:"Voice Input",children:g?(0,$o.jsx)(xl,{className:"w-4 h-4"}):(0,$o.jsx)(yl,{className:"w-4 h-4"})}),(0,$o.jsx)("button",{className:"px-4 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-colors",children:(0,$o.jsx)(Hl,{className:"w-4 h-4"})})]}),(0,$o.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"\ud83d\udc9d Be kind, supportive, and respectful. This is a safe space for everyone."})]})]},"chat"),"mira"===a&&(0,$o.jsx)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"h-full",children:(0,$o.jsx)(cc,{onBack:()=>s("stories")})},"mira"),"achievements"===a&&(0,$o.jsxs)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[(0,$o.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Achievements"}),(0,$o.jsx)("div",{className:"grid grid-cols-2 gap-4",children:[{title:"First Steps",description:"Send your first message",icon:"\ud83d\udc4b",unlocked:!0},{title:"Empathy Champion",description:"Earn 100 empathy points",icon:"\ud83d\udc9d",unlocked:!1},{title:"Community Builder",description:"Help 10 community members",icon:"\ud83e\udd1d",unlocked:!1},{title:"Mindfulness Master",description:"Complete 30 days of mindfulness",icon:"\ud83e\uddd8",unlocked:!1}].map(e=>(0,$o.jsx)("div",{className:"p-4 rounded-lg border-2 ".concat(e.unlocked?"border-yellow-200 bg-yellow-50":"border-gray-200 bg-white"),children:(0,$o.jsxs)("div",{className:"text-center",children:[(0,$o.jsx)("div",{className:"text-3xl mb-2",children:e.icon}),(0,$o.jsx)("h3",{className:"font-semibold text-gray-800",children:e.title}),(0,$o.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),e.unlocked&&(0,$o.jsx)("div",{className:"mt-2 text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:"Unlocked!"})]})},e.title))})]},"achievements")]})}),(0,$o.jsx)(De,{children:d&&(0,$o.jsx)(Mo.div,{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,$o.jsxs)(Mo.div,{className:"bg-white rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[(0,$o.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Share Your Story"}),(0,$o.jsxs)("div",{className:"space-y-4",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Story Title"}),(0,$o.jsx)("input",{type:"text",value:m.title,onChange:e=>h(t=>(0,Ie.A)((0,Ie.A)({},t),{},{title:e.target.value})),placeholder:"Give your story a title...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Theme"}),(0,$o.jsxs)("select",{value:m.theme,onChange:e=>h(t=>(0,Ie.A)((0,Ie.A)({},t),{},{theme:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,$o.jsx)("option",{value:"daily-wins",children:"Daily Wins"}),(0,$o.jsx)("option",{value:"struggles",children:"Struggles"}),(0,$o.jsx)("option",{value:"hope",children:"Hope"}),(0,$o.jsx)("option",{value:"lessons-learned",children:"Lessons Learned"})]})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Story"}),(0,$o.jsx)("textarea",{value:m.content,onChange:e=>h(t=>(0,Ie.A)((0,Ie.A)({},t),{},{content:e.target.value})),placeholder:"Share your experience, lesson, or moment of growth...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:6})]}),(0,$o.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,$o.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"Story Guidelines"}),(0,$o.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[(0,$o.jsx)("li",{children:"\u2022 Focus on positive actions, lessons, or moments of growth"}),(0,$o.jsx)("li",{children:"\u2022 Keep it personal and authentic"}),(0,$o.jsx)("li",{children:"\u2022 Avoid clinical or medical language"}),(0,$o.jsx)("li",{children:"\u2022 Your story will be shared anonymously by default"})]})]})]}),(0,$o.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,$o.jsx)("button",{onClick:()=>u(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),(0,$o.jsx)("button",{onClick:()=>{if(m.title.trim()&&m.content.trim()){const e={id:Date.now().toString(),title:m.title.trim(),content:m.content.trim(),author:(null===t||void 0===t?void 0:t.nickname)||"Anonymous",theme:m.theme,timestamp:new Date,likes:0,isLiked:!1,isAnonymous:!0,isSpotlight:!1,xpEarned:10};o(t=>[e,...t]),h({title:"",content:"",theme:"daily-wins"}),u(!1)}},disabled:!m.title.trim()||!m.content.trim(),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Share Story"})]})]})})})]})}const yc=ll("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),vc=ll("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);function bc(e){let{onComplete:t}=e;const[n,a]=(0,r.useState)(0),[s,i]=(0,r.useState)({nickname:"",ageBand:"",language:"en",role:"student",consentGiven:!1,moodCheck:{energy:.5,stress:.5,connection:.5}}),o=[{title:"Welcome to MindBloom",subtitle:"A private place to get stronger \u2014 together.",component:e=>(0,$o.jsx)(wc,(0,Ie.A)({},e))},{title:"Tell us about yourself",subtitle:"Help us personalize your experience",component:e=>(0,$o.jsx)(jc,(0,Ie.A)({},e))},{title:"Your privacy matters",subtitle:"We keep your data safe and anonymous",component:e=>(0,$o.jsx)(Nc,(0,Ie.A)({},e))},{title:"Quick wellness check",subtitle:"Optional - helps us personalize your journey",component:e=>(0,$o.jsx)(kc,(0,Ie.A)({},e))},{title:"You're all set!",subtitle:"Let's start your wellness journey together",component:e=>(0,$o.jsx)(Sc,(0,Ie.A)({},e))}],l=o[n].component;return(0,$o.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:(0,$o.jsxs)(Mo.div,{className:"w-full max-w-2xl bg-white rounded-3xl shadow-2xl overflow-hidden",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:[(0,$o.jsx)("div",{className:"h-2 bg-gray-200",children:(0,$o.jsx)(Mo.div,{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500",initial:{width:0},animate:{width:"".concat((n+1)/o.length*100,"%")},transition:{duration:.3}})}),(0,$o.jsx)("div",{className:"p-8",children:(0,$o.jsx)(Mo.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},children:(0,$o.jsx)(l,{userData:s,updateUserData:e=>{i(t=>(0,Ie.A)((0,Ie.A)({},t),e))},onNext:()=>{n<o.length-1?a(n+1):t(s)},onBack:()=>{n>0&&a(n-1)},isFirst:0===n,isLast:n===o.length-1})},n)})]})})}function wc(e){let{onNext:t}=e;return(0,$o.jsxs)("div",{className:"text-center",children:[(0,$o.jsx)(Mo.div,{className:"w-24 h-24 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center mx-auto mb-6",animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0},children:(0,$o.jsx)(Ol,{className:"w-12 h-12 text-white"})}),(0,$o.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Welcome to MindBloom"}),(0,$o.jsx)("p",{className:"text-xl text-gray-600 mb-8",children:"A private place to get stronger \u2014 together."}),(0,$o.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-3 text-left",children:[(0,$o.jsx)(Fl,{className:"w-6 h-6 text-green-500"}),(0,$o.jsx)("span",{className:"text-gray-700",children:"Anonymous and secure"})]}),(0,$o.jsxs)("div",{className:"flex items-center space-x-3 text-left",children:[(0,$o.jsx)(Yl,{className:"w-6 h-6 text-blue-500"}),(0,$o.jsx)("span",{className:"text-gray-700",children:"Supportive community"})]}),(0,$o.jsxs)("div",{className:"flex items-center space-x-3 text-left",children:[(0,$o.jsx)(Ol,{className:"w-6 h-6 text-pink-500"}),(0,$o.jsx)("span",{className:"text-gray-700",children:"AI wellness guide"})]})]}),(0,$o.jsxs)("button",{onClick:t,className:"w-full bg-gradient-to-r from-blue-500 to-purple-500 text-white py-4 px-8 rounded-xl font-semibold text-lg hover:from-blue-600 hover:to-purple-600 transition-all duration-300 flex items-center justify-center space-x-2",children:[(0,$o.jsx)("span",{children:"Get Started"}),(0,$o.jsx)(yc,{className:"w-5 h-5"})]})]})}function jc(e){let{userData:t,updateUserData:n,onNext:a,onBack:r}=e;return(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Tell us about yourself"}),(0,$o.jsx)("p",{className:"text-gray-600 mb-8",children:"Help us personalize your experience"}),(0,$o.jsxs)("div",{className:"space-y-8",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"What should we call you?"}),(0,$o.jsx)("input",{type:"text",value:t.nickname||"",onChange:e=>n({nickname:e.target.value}),placeholder:"Choose a nickname",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Age range"}),(0,$o.jsx)("div",{className:"grid grid-cols-2 gap-3",children:[{value:"13-17",label:"13-17",icon:"\ud83c\udf93"},{value:"18-24",label:"18-24",icon:"\ud83c\udf93"},{value:"25-34",label:"25-34",icon:"\ud83d\udcbc"},{value:"35-44",label:"35-44",icon:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66"},{value:"45+",label:"45+",icon:"\ud83c\udf1f"}].map(e=>(0,$o.jsxs)("button",{onClick:()=>n({ageBand:e.value}),className:"p-4 rounded-xl border-2 transition-all ".concat(t.ageBand===e.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[(0,$o.jsx)("div",{className:"text-2xl mb-2",children:e.icon}),(0,$o.jsx)("div",{className:"font-medium",children:e.label})]},e.value))})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"I am a..."}),(0,$o.jsx)("div",{className:"space-y-3",children:[{value:"student",label:"Student",icon:"\ud83c\udf93",desc:"I'm a student"},{value:"parent",label:"Parent",icon:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66",desc:"I'm a parent"},{value:"teacher",label:"Teacher",icon:"\ud83d\udc69\u200d\ud83c\udfeb",desc:"I'm an educator"}].map(e=>(0,$o.jsx)("button",{onClick:()=>n({role:e.value}),className:"w-full p-4 rounded-xl border-2 transition-all text-left ".concat(t.role===e.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)("span",{className:"text-2xl",children:e.icon}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("div",{className:"font-medium",children:e.label}),(0,$o.jsx)("div",{className:"text-sm text-gray-600",children:e.desc})]})]})},e.value))})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Language"}),(0,$o.jsx)("div",{className:"grid grid-cols-2 gap-3",children:[{value:"en",label:"English",flag:"\ud83c\uddfa\ud83c\uddf8"},{value:"es",label:"Espa\xf1ol",flag:"\ud83c\uddea\ud83c\uddf8"},{value:"fr",label:"Fran\xe7ais",flag:"\ud83c\uddeb\ud83c\uddf7"},{value:"de",label:"Deutsch",flag:"\ud83c\udde9\ud83c\uddea"}].map(e=>(0,$o.jsx)("button",{onClick:()=>n({language:e.value}),className:"p-3 rounded-xl border-2 transition-all ".concat(t.language===e.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)("span",{className:"text-xl",children:e.flag}),(0,$o.jsx)("span",{className:"font-medium",children:e.label})]})},e.value))})]})]}),(0,$o.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,$o.jsx)("button",{onClick:r,className:"px-6 py-3 text-gray-600 hover:text-gray-800 transition-colors",children:"Back"}),(0,$o.jsx)("button",{onClick:a,disabled:!t.nickname||!t.ageBand||!t.role,className:"px-6 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Continue"})]})]})}function Nc(e){let{userData:t,updateUserData:n,onNext:a,onBack:r}=e;return(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Your privacy matters"}),(0,$o.jsx)("p",{className:"text-gray-600 mb-8",children:"We keep your data safe and anonymous"}),(0,$o.jsxs)("div",{className:"space-y-6",children:[(0,$o.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-xl p-6",children:[(0,$o.jsx)("h3",{className:"font-semibold text-green-800 mb-3",children:"\ud83d\udd12 No names. No shame. Your data is yours."}),(0,$o.jsxs)("ul",{className:"space-y-2 text-green-700",children:[(0,$o.jsxs)("li",{className:"flex items-start space-x-2",children:[(0,$o.jsx)(vc,{className:"w-5 h-5 text-green-500 mt-0.5"}),(0,$o.jsx)("span",{children:"We keep identifiers off. Everything you do here can be anonymous."})]}),(0,$o.jsxs)("li",{className:"flex items-start space-x-2",children:[(0,$o.jsx)(vc,{className:"w-5 h-5 text-green-500 mt-0.5"}),(0,$o.jsx)("span",{children:"Your conversations are encrypted and private."})]}),(0,$o.jsxs)("li",{className:"flex items-start space-x-2",children:[(0,$o.jsx)(vc,{className:"w-5 h-5 text-green-500 mt-0.5"}),(0,$o.jsx)("span",{children:"We never share your personal information."})]})]})]}),(0,$o.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:[(0,$o.jsx)("h3",{className:"font-semibold text-blue-800 mb-3",children:"\ud83c\udd98 Crisis Support"}),(0,$o.jsx)("p",{className:"text-blue-700",children:"If you're in immediate danger, we may connect you with crisis resources while keeping your identity private."})]}),(0,$o.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,$o.jsx)("input",{type:"checkbox",id:"consent",checked:t.consentGiven||!1,onChange:e=>n({consentGiven:e.target.checked}),className:"mt-1 w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,$o.jsx)("label",{htmlFor:"consent",className:"text-sm text-gray-700",children:"I understand and agree to the privacy policy and terms of service. I consent to anonymous data collection for improving the service."})]})]}),(0,$o.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,$o.jsx)("button",{onClick:r,className:"px-6 py-3 text-gray-600 hover:text-gray-800 transition-colors",children:"Back"}),(0,$o.jsx)("button",{onClick:a,disabled:!t.consentGiven,className:"px-6 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"I Agree"})]})]})}function kc(e){let{userData:t,updateUserData:n,onNext:a,onBack:s}=e;const[i,o]=(0,r.useState)(t.moodCheck||{energy:.5,stress:.5,connection:.5}),l=(e,t)=>{const a=(0,Ie.A)((0,Ie.A)({},i),{},{[e]:t});o(a),n({moodCheck:a})},c=e=>e<=.2?"Very Low":e<=.4?"Low":e<=.6?"Moderate":e<=.8?"High":"Very High",d=e=>e<=.2?"text-red-500":e<=.4?"text-orange-500":e<=.6?"text-yellow-500":e<=.8?"text-blue-500":"text-green-500";return(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Quick wellness check"}),(0,$o.jsx)("p",{className:"text-gray-600 mb-8",children:"Optional - helps us personalize your journey"}),(0,$o.jsxs)("div",{className:"space-y-8",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"How's your energy today?"}),(0,$o.jsxs)("div",{className:"space-y-3",children:[(0,$o.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:i.energy,onChange:e=>l("energy",parseFloat(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),(0,$o.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,$o.jsx)("span",{className:"text-gray-500",children:"Exhausted"}),(0,$o.jsx)("span",{className:"font-medium ".concat(d(i.energy)),children:c(i.energy)}),(0,$o.jsx)("span",{className:"text-gray-500",children:"Energized"})]})]})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"How stressed do you feel?"}),(0,$o.jsxs)("div",{className:"space-y-3",children:[(0,$o.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:i.stress,onChange:e=>l("stress",parseFloat(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),(0,$o.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,$o.jsx)("span",{className:"text-gray-500",children:"Calm"}),(0,$o.jsx)("span",{className:"font-medium ".concat(d(i.stress)),children:c(i.stress)}),(0,$o.jsx)("span",{className:"text-gray-500",children:"Very Stressed"})]})]})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"How connected do you feel to others?"}),(0,$o.jsxs)("div",{className:"space-y-3",children:[(0,$o.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:i.connection,onChange:e=>l("connection",parseFloat(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),(0,$o.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,$o.jsx)("span",{className:"text-gray-500",children:"Isolated"}),(0,$o.jsx)("span",{className:"font-medium ".concat(d(i.connection)),children:c(i.connection)}),(0,$o.jsx)("span",{className:"text-gray-500",children:"Very Connected"})]})]})]})]}),(0,$o.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,$o.jsx)("button",{onClick:s,className:"px-6 py-3 text-gray-600 hover:text-gray-800 transition-colors",children:"Back"}),(0,$o.jsx)("button",{onClick:a,className:"px-6 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-colors",children:"Continue"})]})]})}function Sc(e){let{onNext:t}=e;return(0,$o.jsxs)("div",{className:"text-center",children:[(0,$o.jsx)(Mo.div,{className:"w-24 h-24 bg-gradient-to-br from-green-500 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-6",animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},children:(0,$o.jsx)(vc,{className:"w-12 h-12 text-white"})}),(0,$o.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"You're all set!"}),(0,$o.jsx)("p",{className:"text-xl text-gray-600 mb-8",children:"Let's start your wellness journey together"}),(0,$o.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6 mb-8",children:(0,$o.jsx)("p",{className:"text-blue-800 font-medium",children:"\"Hello \u2014 I'm Mira. You're safe here. Share as little or as much as you like.\""})}),(0,$o.jsxs)("button",{onClick:t,className:"w-full bg-gradient-to-r from-green-500 to-blue-500 text-white py-4 px-8 rounded-xl font-semibold text-lg hover:from-green-600 hover:to-blue-600 transition-all duration-300 flex items-center justify-center space-x-2",children:[(0,$o.jsx)("span",{children:"Start My Journey"}),(0,$o.jsx)(yc,{className:"w-5 h-5"})]})]})}const Cc=ll("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Ec=ll("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Pc=ll("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Ac=ll("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]),Tc=ll("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Mc=ll("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);const Lc=new class{async analyzeRecentActivities(e,t){const n=t.filter(e=>e.content).slice(-10).map(e=>e.content).join(" ");if(!n)return{sentiment:{score:0,magnitude:0,sentiment:"neutral"},emotions:[],trend:"stable"};try{const e=await jl.analyzeSentiment(n),r=await jl.analyzeEmotionalTone(n),s=t.filter(e=>e.sentiment).map(e=>e.sentiment.score),i=s.slice(-5).reduce((e,t)=>e+t,0)/(s.slice(-5).length||1),o=s.slice(0,-5).length>0?s.slice(0,-5).reduce((e,t)=>e+t,0)/s.slice(0,-5).length:i;let l,c="stable";i>o+.1?c="improving":i<o-.1&&(c="declining");try{const n="Based on the following wellness activities and sentiment analysis, provide a brief, encouraging recommendation (1-2 sentences):\n\nSentiment: ".concat(e.sentiment," (score: ").concat(e.score.toFixed(2),")\nPrimary emotion: ").concat(r.primaryEmotion,"\nRecent activities: ").concat(t.length," activities\n\nProvide a warm, supportive recommendation for continuing wellness journey.");l=await bl.vertexAIService.generateResponse([{role:"user",parts:[{text:n}]}])}catch(a){console.warn("Failed to get AI recommendation:",a)}return{sentiment:{score:e.score,magnitude:e.magnitude,sentiment:e.sentiment},emotions:r.emotions.map(e=>({emotion:e.emotion,intensity:e.intensity})),recommendation:l,trend:c}}catch(a){return console.error("Error analyzing activities:",a),{sentiment:{score:0,magnitude:0,sentiment:"neutral"},emotions:[],trend:"stable"}}}async calculateWellnessMetrics(e,t){try{const n=await this.analyzeRecentActivities(e,t),a=Math.max(0,Math.min(1,n.sentiment.score+.5)),r=n.emotions.find(e=>"anxiety"===e.emotion),s=r?a*(1-.5*r.intensity):a,i=n.emotions.find(e=>"joy"===e.emotion||"excitement"===e.emotion),o=.5+.3*n.sentiment.score,l=i?Math.min(1,o+.3*i.intensity):o,c=t.filter(e=>"chat"===e.type||"journal"===e.type).length,d=Math.min(1,.3+c/t.length*.7);return{calmness:Math.max(.2,Math.min(1,s)),energy:Math.max(.2,Math.min(1,l)),connection:Math.max(.2,Math.min(1,d))}}catch(n){return console.error("Error calculating wellness metrics:",n),{calmness:.6,energy:.6,connection:.5}}}async getPersonalizedRecommendation(e,t){try{var n;const e="You are a wellness coach. Based on the following insights, provide a brief (2-3 sentences), warm, and actionable recommendation:\n\nSentiment: ".concat(t.sentiment.sentiment," (").concat(t.sentiment.score.toFixed(2),")\nTrend: ").concat(t.trend,"\nPrimary emotion: ").concat((null===(n=t.emotions[0])||void 0===n?void 0:n.emotion)||"neutral","\n\nProvide an encouraging, personalized recommendation that helps improve wellness.");return await bl.vertexAIService.generateResponse([{role:"user",parts:[{text:e}]}])||"Keep up the great work on your wellness journey!"}catch(a){return console.error("Error getting recommendation:",a),"Continue with your daily wellness activities. You're doing great!"}}async saveWellnessData(e,t,n){try{const a={userId:e,timestamp:(new Date).toISOString(),metrics:t,insight:n},r=new Blob([JSON.stringify(a,null,2)],{type:"application/json"});await Nl.P.uploadAudio(r,e,"wellness","wellness-".concat(Date.now(),".json"))}catch(a){console.error("Error saving wellness data:",a)}}async loadWellnessHistory(e){try{return[]}catch(t){return console.error("Error loading wellness history:",t),[]}}};function Rc(e){let{particleCount:t=50,colors:n=["rgba(255, 143, 163, 0.5)","rgba(177, 156, 217, 0.5)","rgba(168, 230, 207, 0.5)"],speed:a=1,size:s={min:2,max:6},className:i=""}=e;const o=(0,r.useRef)(null),l=(0,r.useRef)([]),c=(0,r.useRef)();return(0,r.useEffect)(()=>{const e=o.current;if(!e)return;const r=e.getContext("2d");if(!r)return;const i=()=>{e.width=window.innerWidth,e.height=window.innerHeight};i(),window.addEventListener("resize",i),l.current=Array.from({length:t},()=>({x:Math.random()*e.width,y:Math.random()*e.height,size:Math.random()*(s.max-s.min)+s.min,speedX:(Math.random()-.5)*a*.5,speedY:(Math.random()-.5)*a*.5,opacity:.5*Math.random()+.3,color:n[Math.floor(Math.random()*n.length)]}));const d=()=>{r.clearRect(0,0,e.width,e.height),l.current.forEach((t,n)=>{t.x+=t.speedX,t.y+=t.speedY,t.x<0&&(t.x=e.width),t.x>e.width&&(t.x=0),t.y<0&&(t.y=e.height),t.y>e.height&&(t.y=0),r.beginPath(),r.arc(t.x,t.y,t.size,0,2*Math.PI),r.fillStyle=t.color,r.globalAlpha=t.opacity,r.fill(),r.globalAlpha=1,l.current.slice(n+1).forEach(e=>{const n=t.x-e.x,a=t.y-e.y,s=Math.sqrt(n*n+a*a);s<100&&(r.beginPath(),r.moveTo(t.x,t.y),r.lineTo(e.x,e.y),r.strokeStyle=t.color,r.globalAlpha=.2*(1-s/100),r.lineWidth=1,r.stroke(),r.globalAlpha=1)})}),c.current=requestAnimationFrame(d)};return d(),()=>{window.removeEventListener("resize",i),c.current&&cancelAnimationFrame(c.current)}},[t,n,a,s]),(0,$o.jsx)("canvas",{ref:o,className:"absolute inset-0 pointer-events-none ".concat(i),style:{zIndex:0}})}const Dc={calm:{from:"#87CEEB",to:"#4682B4"},happy:{from:"#FFB88C",to:"#FF8FA3"},reflective:{from:"#B19CD9",to:"#9370DB"},energetic:{from:"#FF8FA3",to:"#FF6B8A"},peaceful:{from:"#A8E6CF",to:"#66D9A3"},creative:{from:"#D4A5F7",to:"#B980E8"}};function Ic(e){let{mood:t,intensity:n,size:a=120,className:r=""}=e;const s=Dc[t],i=2*Math.PI*(a/2-10),o=i-n*i;return(0,$o.jsxs)("div",{className:"relative ".concat(r),style:{width:a,height:a},children:[(0,$o.jsxs)("svg",{width:a,height:a,className:"transform -rotate-90",children:[(0,$o.jsx)("circle",{cx:a/2,cy:a/2,r:a/2-10,fill:"none",stroke:"rgba(0, 0, 0, 0.1)",strokeWidth:"8"}),(0,$o.jsx)(Mo.circle,{cx:a/2,cy:a/2,r:a/2-10,fill:"none",stroke:"url(#gradient-".concat(t,")"),strokeWidth:"8",strokeLinecap:"round",strokeDasharray:i,strokeDashoffset:o,initial:{strokeDashoffset:i},animate:{strokeDashoffset:o},transition:{duration:1,ease:"easeOut"}}),(0,$o.jsx)("defs",{children:(0,$o.jsxs)("linearGradient",{id:"gradient-".concat(t),x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,$o.jsx)("stop",{offset:"0%",stopColor:s.from}),(0,$o.jsx)("stop",{offset:"100%",stopColor:s.to})]})})]}),(0,$o.jsx)(Mo.div,{className:"absolute inset-0 flex items-center justify-center",animate:{rotate:[0,360]},transition:{duration:20,repeat:1/0,ease:"linear"},children:(0,$o.jsx)(Mo.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:(0,$o.jsx)(pl,{className:"w-8 h-8",style:{color:s.from}})})}),[...Array(3)].map((e,t)=>(0,$o.jsx)(Mo.div,{className:"absolute rounded-full",style:{width:6,height:6,background:s.from,left:"50%",top:"50%",x:0,y:0},animate:{x:[0,Math.cos(120*t*Math.PI/180)*(a/2+20)],y:[0,Math.sin(120*t*Math.PI/180)*(a/2+20)],opacity:[.8,0,.8],scale:[1,1.5,1]},transition:{duration:3,repeat:1/0,delay:.3*t,ease:"easeInOut"}},t))]})}function _c(e){let{icon:t,label:n,value:a,max:r,color:s,unit:i="",trend:o,trendValue:l}=e;const c=a/r*100;return(0,$o.jsxs)(Mo.div,{className:"glass-strong rounded-2xl p-6 shadow-xl hover:shadow-2xl transition-shadow",initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02,y:-4},children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,$o.jsx)("div",{className:"p-3 rounded-xl bg-gradient-to-br ".concat(s," bg-opacity-20"),children:(0,$o.jsx)(t,{className:"w-6 h-6",style:{color:s.split("-")[1]}})}),o&&(0,$o.jsxs)("div",{className:"flex items-center space-x-1 text-sm ".concat("up"===o?"text-green-500":"down"===o?"text-red-500":"text-gray-500"),children:[(0,$o.jsx)("span",{children:"up"===o?"\u2191":"down"===o?"\u2193":"\u2192"}),l&&(0,$o.jsxs)("span",{children:[Math.abs(l),"%"]})]})]}),(0,$o.jsxs)("div",{className:"mb-2",children:[(0,$o.jsxs)("div",{className:"flex items-baseline space-x-2",children:[(0,$o.jsx)(Mo.div,{className:"text-3xl font-bold text-gray-800",initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},children:a}),i&&(0,$o.jsx)("span",{className:"text-sm text-gray-600",children:i})]}),(0,$o.jsx)("div",{className:"text-sm text-gray-600",children:n})]}),(0,$o.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:(0,$o.jsx)(Mo.div,{className:"h-2 rounded-full bg-gradient-to-r ".concat(s),initial:{width:0},animate:{width:"".concat(c,"%")},transition:{duration:1,delay:.3,ease:"easeOut"}})}),(0,$o.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[c.toFixed(0),"% of ",r]})]})}function Oc(e){let{user:t,onNavigate:a}=e;const{mood:s,intensity:i}=Qo(),[o,l]=(0,r.useState)({calmness:.7,energy:.6,connection:.5}),[c,d]=(0,r.useState)(null),[u,m]=(0,r.useState)({activeUsers:1247,gardenGrowth:89,storiesShared:23,supportTokens:156}),[h,p]=(0,r.useState)([]),[f,g]=(0,r.useState)(null),[x,y]=(0,r.useState)(""),[v,b]=(0,r.useState)(!0),[w,j]=(0,r.useState)([]);(0,r.useEffect)(()=>{N()},[t]);const N=async()=>{d({id:"1",title:"3-Minute Breathing",description:"A quick breathing exercise to center yourself",duration:3,xpReward:10,type:"breathing"}),await k()},k=async()=>{if(t){b(!0);try{const e=[{id:"1",type:"chat",timestamp:new Date(Date.now()-72e5),content:"Had a good conversation with Mira today about stress management",emotion:"calm"},{id:"2",type:"game",timestamp:new Date(Date.now()-864e5),content:"Completed breathing dragon game, feeling more relaxed",emotion:"peaceful"},{id:"3",type:"journal",timestamp:new Date(Date.now()-1728e5),content:"Wrote in gratitude journal, feeling grateful",emotion:"grateful"}];j(e);const n=await Lc.analyzeRecentActivities(t.id,e);g(n);const a=await Lc.calculateWellnessMetrics(t.id,e);l(a);const r=await Lc.getPersonalizedRecommendation(t.id,n);y(r),await Lc.saveWellnessData(t.id,a,n)}catch(e){console.error("Error loading activities:",e)}finally{b(!1)}}};return(0,$o.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 p-6 relative overflow-hidden",children:[(0,$o.jsx)(Rc,{particleCount:30,className:"opacity-50"}),(0,$o.jsxs)("div",{className:"max-w-7xl mx-auto relative z-10",children:[(0,$o.jsxs)(Mo.div,{className:"mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,$o.jsxs)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:["Welcome back, ",t.nickname,"! \ud83d\udc4b"]}),(0,$o.jsxs)("p",{className:"text-gray-600",children:["Day ",t.streak," streak \u2022 ",t.xp," XP \u2022 Level ",t.avatarLevel]})]}),(0,$o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,$o.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,$o.jsxs)(Mo.div,{className:"bg-white rounded-2xl shadow-lg p-6",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},children:[(0,$o.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center",children:[(0,$o.jsx)(Cc,{className:"w-5 h-5 mr-2 text-blue-500"}),"Your Wellness Snapshot"]}),(0,$o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,$o.jsx)(_c,{icon:Ol,label:"Calmness",value:Math.round(100*o.calmness),max:100,color:"from-red-400 to-pink-400",unit:"%",trend:"up",trendValue:5}),(0,$o.jsx)(_c,{icon:ql,label:"Energy",value:Math.round(100*o.energy),max:100,color:"from-yellow-400 to-orange-400",unit:"%",trend:"up",trendValue:3}),(0,$o.jsx)(_c,{icon:Yl,label:"Connection",value:Math.round(100*o.connection),max:100,color:"from-green-400 to-teal-400",unit:"%",trend:"neutral"})]}),(0,$o.jsx)("div",{className:"flex justify-center",children:(0,$o.jsx)(Mo.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.2},children:(0,$o.jsx)(Ic,{mood:s,intensity:i,size:150})})})]}),c&&(0,$o.jsxs)(Mo.div,{className:"bg-white rounded-2xl shadow-lg p-6",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:[(0,$o.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center",children:[(0,$o.jsx)(nc,{className:"w-5 h-5 mr-2 text-green-500"}),"Today's Micro-Task"]}),(0,$o.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-6",children:[(0,$o.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:c.title}),(0,$o.jsx)("p",{className:"text-gray-600 mb-3",children:c.description}),(0,$o.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[(0,$o.jsxs)("span",{className:"flex items-center",children:[(0,$o.jsx)(Ec,{className:"w-4 h-4 mr-1"}),c.duration," minutes"]}),(0,$o.jsxs)("span",{className:"flex items-center",children:[(0,$o.jsx)(ql,{className:"w-4 h-4 mr-1"}),c.xpReward," XP"]})]})]}),(0,$o.jsxs)("div",{className:"text-3xl",children:["breathing"===c.type&&"\ud83e\udec1","journaling"===c.type&&"\ud83d\udcdd","mindfulness"===c.type&&"\ud83e\uddd8","gratitude"===c.type&&"\ud83d\ude4f"]})]}),h.includes(c.id)?(0,$o.jsxs)("div",{className:"flex items-center justify-center py-4 text-green-600",children:[(0,$o.jsx)(vc,{className:"w-6 h-6 mr-2"}),(0,$o.jsx)("span",{className:"font-medium",children:"Completed! Great job! \ud83c\udf89"})]}):(0,$o.jsxs)("button",{onClick:()=>(async e=>{if(!h.includes(e)&&(p(t=>[...t,e]),t)){const{xpService:r}=await Promise.resolve().then(n.bind(n,564)),s={id:"1",title:"3-Minute Breathing",description:"A quick breathing exercise to center yourself",duration:3,xpReward:10,type:"breathing"};try{const n=await r.addXP(t.id,t.xp||0,{id:"task-".concat(e,"-").concat(Date.now()),type:"meditation",xp:s.xpReward,description:"Completed: ".concat(s.title)});console.log("Task completed, XP added:",n)}catch(a){console.error("Error adding XP:",a)}}})(c.id),className:"w-full bg-gradient-to-r from-green-500 to-blue-500 text-white py-3 px-6 rounded-xl font-semibold hover:from-green-600 hover:to-blue-600 transition-all duration-300 flex items-center justify-center space-x-2",children:[(0,$o.jsx)(Pc,{className:"w-5 h-5"}),(0,$o.jsxs)("span",{children:["Start \u2014 ",c.duration," minutes"]})]})]})]}),(0,$o.jsxs)(Mo.div,{className:"bg-white rounded-2xl shadow-lg p-6",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.3},children:[(0,$o.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center",children:[(0,$o.jsx)(ql,{className:"w-5 h-5 mr-2 text-purple-500"}),"Quick Actions"]}),(0,$o.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,$o.jsxs)("button",{onClick:()=>a("chat"),className:"p-4 bg-gradient-to-br from-blue-500 to-purple-500 text-white rounded-xl hover:from-blue-600 hover:to-purple-600 transition-all duration-300 text-center",children:[(0,$o.jsx)(Ol,{className:"w-6 h-6 mx-auto mb-2"}),(0,$o.jsx)("span",{className:"text-sm font-medium",children:"Talk to Mira"})]}),(0,$o.jsxs)("button",{onClick:()=>a("resources"),className:"p-4 bg-gradient-to-br from-green-500 to-teal-500 text-white rounded-xl hover:from-green-600 hover:to-teal-600 transition-all duration-300 text-center",children:[(0,$o.jsx)(cl,{className:"w-6 h-6 mx-auto mb-2"}),(0,$o.jsx)("span",{className:"text-sm font-medium",children:"Journal"})]}),(0,$o.jsxs)("button",{onClick:()=>a("circles"),className:"p-4 bg-gradient-to-br from-pink-500 to-rose-500 text-white rounded-xl hover:from-pink-600 hover:to-rose-600 transition-all duration-300 text-center",children:[(0,$o.jsx)(Yl,{className:"w-6 h-6 mx-auto mb-2"}),(0,$o.jsx)("span",{className:"text-sm font-medium",children:"Join Circle"})]}),(0,$o.jsxs)("button",{onClick:()=>a("resources"),className:"p-4 bg-gradient-to-br from-orange-500 to-yellow-500 text-white rounded-xl hover:from-orange-600 hover:to-yellow-600 transition-all duration-300 text-center",children:[(0,$o.jsx)(Ac,{className:"w-6 h-6 mx-auto mb-2"}),(0,$o.jsx)("span",{className:"text-sm font-medium",children:"Breathe"})]})]})]}),f&&(0,$o.jsxs)(Mo.div,{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl shadow-lg p-6 border-2 border-purple-200",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[(0,$o.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center",children:[(0,$o.jsx)(pl,{className:"w-5 h-5 mr-2 text-purple-500"}),"AI Wellness Insights",(0,$o.jsx)("span",{className:"ml-2 text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded-full",children:"Powered by Google Cloud"})]}),v?(0,$o.jsx)("div",{className:"text-center py-4 text-gray-500",children:"Analyzing your wellness patterns..."}):(0,$o.jsxs)("div",{className:"space-y-4",children:[(0,$o.jsxs)("div",{className:"bg-white rounded-xl p-4",children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,$o.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Sentiment"}),(0,$o.jsx)("span",{className:"text-sm font-semibold ".concat("positive"===f.sentiment.sentiment?"text-green-600":"negative"===f.sentiment.sentiment?"text-red-600":"text-gray-600"),children:f.sentiment.sentiment.toUpperCase()})]}),(0,$o.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,$o.jsx)("div",{className:"h-2 rounded-full ".concat(f.sentiment.score>0?"bg-green-500":"bg-red-500"),style:{width:"".concat(100*Math.abs(f.sentiment.score),"%")}})})]}),(0,$o.jsx)("div",{className:"bg-white rounded-xl p-4",children:(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Trend"}),(0,$o.jsx)("div",{className:"flex items-center",children:"improving"===f.trend?(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsx)(hl,{className:"w-4 h-4 text-green-500 mr-1"}),(0,$o.jsx)("span",{className:"text-sm font-semibold text-green-600",children:"Improving"})]}):"declining"===f.trend?(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsx)(Tc,{className:"w-4 h-4 text-red-500 mr-1"}),(0,$o.jsx)("span",{className:"text-sm font-semibold text-red-600",children:"Declining"})]}):(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsx)(Mc,{className:"w-4 h-4 text-gray-500 mr-1"}),(0,$o.jsx)("span",{className:"text-sm font-semibold text-gray-600",children:"Stable"})]})})]})}),f.emotions&&f.emotions.length>0&&(0,$o.jsxs)("div",{className:"bg-white rounded-xl p-4",children:[(0,$o.jsx)("span",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Detected Emotions"}),(0,$o.jsx)("div",{className:"flex flex-wrap gap-2",children:f.emotions.slice(0,3).map((e,t)=>(0,$o.jsxs)("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:[e.emotion," (",Math.round(100*e.intensity),"%)"]},t))})]}),x&&(0,$o.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-200",children:(0,$o.jsxs)("div",{className:"flex items-start",children:[(0,$o.jsx)(cl,{className:"w-5 h-5 text-blue-500 mr-2 mt-0.5 flex-shrink-0"}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("span",{className:"text-sm font-semibold text-gray-800 block mb-1",children:"Personalized Recommendation"}),(0,$o.jsx)("p",{className:"text-sm text-gray-700",children:x})]})]})})]})]})]}),(0,$o.jsxs)("div",{className:"space-y-6",children:[(0,$o.jsxs)(Mo.div,{className:"bg-white rounded-2xl shadow-lg p-6",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:[(0,$o.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center",children:[(0,$o.jsx)(hl,{className:"w-5 h-5 mr-2 text-green-500"}),"Community Pulse"]}),(0,$o.jsxs)("div",{className:"space-y-4",children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)(Yl,{className:"w-5 h-5 text-green-500"}),(0,$o.jsx)("span",{className:"text-gray-700",children:"Active today"})]}),(0,$o.jsx)("span",{className:"font-bold text-green-600",children:u.activeUsers})]}),(0,$o.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)(Ac,{className:"w-5 h-5 text-blue-500"}),(0,$o.jsx)("span",{className:"text-gray-700",children:"Garden growth"})]}),(0,$o.jsxs)("span",{className:"font-bold text-blue-600",children:["+",u.gardenGrowth]})]}),(0,$o.jsxs)("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)(Ol,{className:"w-5 h-5 text-purple-500"}),(0,$o.jsx)("span",{className:"text-gray-700",children:"Stories shared"})]}),(0,$o.jsx)("span",{className:"font-bold text-purple-600",children:u.storiesShared})]}),(0,$o.jsxs)("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)(ql,{className:"w-5 h-5 text-yellow-500"}),(0,$o.jsx)("span",{className:"text-gray-700",children:"Support tokens"})]}),(0,$o.jsx)("span",{className:"font-bold text-yellow-600",children:u.supportTokens})]})]})]}),(0,$o.jsxs)(Mo.div,{className:"bg-white rounded-2xl shadow-lg p-6",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.3},children:[(0,$o.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center",children:[(0,$o.jsx)(nc,{className:"w-5 h-5 mr-2 text-blue-500"}),"Your Progress"]}),(0,$o.jsxs)("div",{className:"space-y-4",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[(0,$o.jsx)("span",{children:"Current Streak"}),(0,$o.jsxs)("span",{children:[t.streak," days"]})]}),(0,$o.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,$o.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full",style:{width:"".concat(Math.min(t.streak/30*100,100),"%")}})})]}),(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[(0,$o.jsx)("span",{children:"XP to Next Level"}),(0,$o.jsxs)("span",{children:[t.xp," / ",100*t.avatarLevel]})]}),(0,$o.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,$o.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-teal-500 h-2 rounded-full",style:{width:"".concat(t.xp/(100*t.avatarLevel)*100,"%")}})})]})]})]})]})]})]})]})}const Fc=ll("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),zc=ll("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Vc=ll("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]),Bc=ll("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);const Uc=new class{async analyzeCircleMood(e,t){try{const n=t.map(e=>e.content).join(" "),a=await jl.analyzeSentiment(n),r=(await jl.analyzeEmotionalTone(n),new Map);t.forEach(e=>{if(e.emotion){const t=r.get(e.emotion.type)||{count:0,totalIntensity:0};r.set(e.emotion.type,{count:t.count+1,totalIntensity:t.totalIntensity+e.emotion.intensity})}});const s=Array.from(r.entries()).map(e=>{let[t,n]=e;return{emotion:t,count:n.count,averageIntensity:n.totalIntensity/n.count}});return{circleId:e,averageSentiment:a.score,emotions:s,timestamp:new Date}}catch(n){return console.error("Error analyzing circle mood:",n),{circleId:e,averageSentiment:0,emotions:[],timestamp:new Date}}}async summarizeCircleDiscussion(e,t){try{const a=t.slice(0,20).map(e=>"- ".concat(e.content)).join("\n"),r="You are a compassionate moderator for a peer support circle. Summarize the following discussion in a warm, supportive way (2-3 sentences). Identify the main themes or topics being discussed.\n\nPosts:\n".concat(a,'\n\nProvide:\n1. A brief summary of the discussion\n2. Key themes (3-5 themes as a comma-separated list)\n\nFormat your response as JSON:\n{\n  "summary": "summary text here",\n  "themes": ["theme1", "theme2", "theme3"]\n}'),s=await bl.vertexAIService.generateResponse([{role:"user",parts:[{text:r}]}]);let i;try{const e=s.match(/\{[\s\S]*\}/);if(!e)throw new Error("No JSON found");i=JSON.parse(e[0])}catch(n){i={summary:s.substring(0,200),themes:["support","wellness","community"]}}const o=t.filter(e=>e.sentiment).map(e=>e.sentiment.score),l=o.length>0?o.reduce((e,t)=>e+t,0)/o.length:0;return{circleId:e,summary:i.summary,keyThemes:i.themes,sentiment:l,timestamp:new Date}}catch(a){return console.error("Error summarizing circle discussion:",a),{circleId:e,summary:"The circle members have been sharing their thoughts and supporting each other.",keyThemes:["support","community"],sentiment:0,timestamp:new Date}}}async processVoiceCheckIn(e,t){try{const n=await Cl.startListening(),a=await jl.analyzeSentiment(n),r=await jl.analyzeEmotionalTone(n),s='Summarize this voice reflection in a supportive, concise way (1-2 sentences):\n\n"'.concat(n,'"\n\nProvide a brief, empathetic summary:'),i=await bl.vertexAIService.generateResponse([{role:"user",parts:[{text:s}]}]),o={circleId:e,userId:t,transcript:n,summary:i,sentiment:a.score,emotion:r.primaryEmotion,timestamp:new Date},l=new Blob([JSON.stringify(o,null,2)],{type:"application/json"});return await Nl.P.uploadAudio(l,t,"recording","circle-checkin-".concat(e,"-").concat(Date.now(),".json")),{transcript:n,summary:i,sentiment:a.score,emotion:r.primaryEmotion}}catch(n){throw console.error("Error processing voice check-in:",n),n}}async analyzePost(e){try{const t=await jl.analyzeSentiment(e);return{sentiment:t,emotion:{type:(await jl.analyzeEmotionalTone(e)).primaryEmotion,intensity:Math.abs(t.score)}}}catch(t){return console.error("Error analyzing post:",t),{sentiment:{score:0,magnitude:0},emotion:{type:"neutral",intensity:.5}}}}};function Hc(e){let{trigger:t,colors:n=["#FF8FA3","#FFB88C","#B19CD9","#A8E6CF","#87CEEB","#FFD93D"],count:a=50,onComplete:s}=e;const[i,o]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{if(t){o(!0);const e=setTimeout(()=>{o(!1),null===s||void 0===s||s()},3e3);return()=>clearTimeout(e)}},[t,s]),(0,$o.jsx)(De,{children:i&&(0,$o.jsx)("div",{className:"fixed inset-0 pointer-events-none z-50",children:[...Array(a)].map((e,t)=>{const r=t/a*Math.PI*2,s=200+200*Math.random(),i=n[t%n.length],o=.5*Math.random();return(0,$o.jsx)(Mo.div,{className:"absolute w-3 h-3 rounded-sm",style:{left:"50%",top:"50%",background:i,rotate:360*Math.random()},initial:{scale:0,opacity:1},animate:{x:Math.cos(r)*s+100*(Math.random()-.5),y:Math.sin(r)*s+100*(Math.random()-.5),rotate:720*Math.random(),scale:[0,1,0],opacity:[1,1,0]},transition:{duration:2+Math.random(),delay:o,ease:"easeOut"}},t)})})})}function Wc(e){let{count:t=10,size:n=4,duration:a=2,color:r="#FFD93D",className:s=""}=e;return(0,$o.jsx)("div",{className:"absolute inset-0 pointer-events-none overflow-hidden ".concat(s),children:[...Array(t)].map((e,t)=>(0,$o.jsx)(Mo.div,{className:"absolute rounded-full",style:{width:n,height:n,background:r,left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%")},animate:{scale:[0,1,0],opacity:[0,1,0],rotate:[0,180,360]},transition:{duration:a+Math.random(),repeat:1/0,delay:Math.random()*a,ease:"easeInOut"}},t))})}const Gc=[{id:"1",name:"Exam Support",description:"A safe space for students dealing with exam stress",theme:"academic",maxCapacity:30,currentMembers:24,rules:["No diagnosing","Listen and hold space","Use Get Help flow for crisis"],lastActivity:"2 hours ago",isJoined:!1},{id:"2",name:"First-gen Students",description:"Support for first-generation college students",theme:"academic",maxCapacity:25,currentMembers:18,rules:["No diagnosing","Listen and hold space","Use Get Help flow for crisis"],lastActivity:"1 hour ago",isJoined:!0},{id:"3",name:"Night Owls",description:"For those who struggle with sleep and late-night thoughts",theme:"wellness",maxCapacity:20,currentMembers:15,rules:["No diagnosing","Listen and hold space","Use Get Help flow for crisis"],lastActivity:"30 minutes ago",isJoined:!1},{id:"4",name:"Parents of Teens",description:"Support for parents navigating teen mental health",theme:"family",maxCapacity:15,currentMembers:12,rules:["No diagnosing","Listen and hold space","Use Get Help flow for crisis"],lastActivity:"4 hours ago",isJoined:!1}],qc=[{id:"1",content:"Feeling overwhelmed with finals coming up. Anyone else struggling with time management?",author:"Anonymous Student",timestamp:new Date(Date.now()-18e5),likes:8,isLiked:!1,isAnonymous:!0},{id:"2",content:"Just wanted to say you're not alone in this. We've got this together! \ud83d\udcaa",author:"Anonymous Supporter",timestamp:new Date(Date.now()-27e5),likes:12,isLiked:!0,isAnonymous:!0},{id:"3",content:"Has anyone tried the pomodoro technique? It really helped me focus better.",author:"Anonymous Helper",timestamp:new Date(Date.now()-36e5),likes:5,isLiked:!1,isAnonymous:!0}];function Yc(e){let{user:t,onBack:n}=e;const{setUser:a}=Xo(),[s,i]=(0,r.useState)(Gc),[o,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(qc),[u,m]=(0,r.useState)(""),[h,p]=(0,r.useState)(!1),[f,g]=(0,r.useState)(!1),[x,y]=(0,r.useState)(null),[v,b]=(0,r.useState)(null),[w,j]=(0,r.useState)(!1),[N,k]=(0,r.useState)(!1),[S,C]=(0,r.useState)(null),[E,P]=(0,r.useState)([]),[A,T]=(0,r.useState)(new Map),M=e=>{i(t=>t.map(t=>t.id===e?(0,Ie.A)((0,Ie.A)({},t),{},{isJoined:!0,currentMembers:t.currentMembers+1}):t))},L=e=>{i(t=>t.map(t=>t.id===e?(0,Ie.A)((0,Ie.A)({},t),{},{isJoined:!1,currentMembers:t.currentMembers-1}):t))};(0,r.useEffect)(()=>{o&&c.length>0&&R()},[o,c]);const R=async()=>{if(o){j(!0);try{const e=await Uc.analyzeCircleMood(o.id,c);y(e);const t=await Uc.summarizeCircleDiscussion(o.id,c);b(t);const n=new Map;c.forEach(e=>{if(e.emotion){const t=D(e.emotion.type);n.set(e.id,t)}}),T(n)}catch(e){console.error("Error analyzing circle data:",e)}finally{j(!1)}}},D=e=>{switch(e.toLowerCase()){case"joy":return"from-yellow-400 to-orange-400";case"happiness":return"from-green-400 to-emerald-400";case"calm":return"from-blue-400 to-indigo-400";case"sadness":return"from-blue-300 to-blue-400";case"anxiety":return"from-purple-300 to-pink-300";case"anger":return"from-red-400 to-red-500";default:return"from-gray-400 to-gray-500"}},I=async()=>{if(o&&t){k(!0);try{const e=await Uc.processVoiceCheckIn(o.id,t.id);C(e);const n={id:Date.now().toString(),content:e.summary,author:"You (Voice)",timestamp:new Date,likes:0,isLiked:!1,isAnonymous:!0,sentiment:{score:e.sentiment,magnitude:.7},emotion:{type:e.emotion,intensity:.7}};d(e=>[n,...e]);const r=await Zo.xpService.addXP(t.id,t.xp||0,{id:"voice-checkin-".concat(Date.now()),type:"chat",xp:15,description:"Voice check-in in circle"});a&&a((0,Ie.A)((0,Ie.A)({},t),{},{xp:r.newXP,avatarLevel:r.newLevel}))}catch(e){console.error("Error with voice check-in:",e)}finally{k(!1)}}},_=async()=>{if(u.trim()&&o&&t){const e=await Uc.analyzePost(u.trim()),n={id:Date.now().toString(),content:u.trim(),author:"You",timestamp:new Date,likes:0,isLiked:!1,isAnonymous:!0,sentiment:e.sentiment,emotion:e.emotion};d(e=>[n,...e]),m("");const r=await Zo.xpService.addXP(t.id,t.xp||0,{id:"circle-post-".concat(Date.now()),type:"chat",xp:10,description:"Posted in circle"});a&&a((0,Ie.A)((0,Ie.A)({},t),{},{xp:r.newXP,avatarLevel:r.newLevel}))}},O=e=>{switch(e){case"academic":return"\ud83c\udf93";case"wellness":return"\ud83c\udf19";case"family":return"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66";default:return"\ud83d\udcac"}},F=e=>{switch(e){case"academic":return"from-blue-500 to-indigo-500";case"wellness":return"from-purple-500 to-pink-500";case"family":return"from-green-500 to-teal-500";default:return"from-gray-500 to-gray-600"}};return o?(0,$o.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:[(0,$o.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200 p-4",children:(0,$o.jsxs)("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,$o.jsx)("button",{onClick:()=>l(null),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,$o.jsx)(Fc,{className:"w-5 h-5 text-gray-600"})}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h1",{className:"text-xl font-semibold text-gray-800",children:o.name}),(0,$o.jsxs)("p",{className:"text-sm text-gray-600",children:[o.currentMembers," members \u2022 ",o.lastActivity]})]})]}),(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)("button",{onClick:()=>g(!0),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Circle Rules",children:(0,$o.jsx)(Fl,{className:"w-5 h-5"})}),o.isJoined?(0,$o.jsx)("button",{onClick:()=>L(o.id),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Leave"}):(0,$o.jsx)("button",{onClick:()=>M(o.id),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Join"})]})]})}),o.isJoined&&(0,$o.jsxs)("div",{className:"max-w-4xl mx-auto p-4 space-y-4",children:[x&&(0,$o.jsxs)(Mo.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl shadow-lg p-4 border-2 border-purple-200",children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,$o.jsxs)("h3",{className:"font-semibold text-gray-800 flex items-center",children:[(0,$o.jsx)(Mc,{className:"w-5 h-5 mr-2 text-purple-500"}),"Circle Mood Pulse",(0,$o.jsx)("span",{className:"ml-2 text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded-full",children:"AI Powered"})]}),w&&(0,$o.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,$o.jsx)(Mo.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-purple-500 border-t-transparent rounded-full mr-2"}),"Analyzing..."]})]}),(0,$o.jsxs)("div",{className:"space-y-3",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,$o.jsx)("span",{className:"text-sm text-gray-700",children:"Overall Sentiment"}),(0,$o.jsx)("span",{className:"text-sm font-semibold ".concat(x.averageSentiment>.3?"text-green-600":x.averageSentiment<-.3?"text-red-600":"text-gray-600"),children:x.averageSentiment>.3?"Positive":x.averageSentiment<-.3?"Needs Support":"Neutral"})]}),(0,$o.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,$o.jsx)(Mo.div,{initial:{width:0},animate:{width:"".concat(50*(x.averageSentiment+1),"%")},transition:{duration:.5},className:"h-3 rounded-full ".concat(x.averageSentiment>.3?"bg-gradient-to-r from-green-400 to-green-500":x.averageSentiment<-.3?"bg-gradient-to-r from-red-400 to-red-500":"bg-gradient-to-r from-gray-400 to-gray-500")})})]}),x.emotions&&x.emotions.length>0&&(0,$o.jsxs)("div",{children:[(0,$o.jsx)("span",{className:"text-sm text-gray-700 mb-2 block",children:"Detected Emotions"}),(0,$o.jsx)("div",{className:"flex flex-wrap gap-2",children:x.emotions.slice(0,5).map((e,t)=>(0,$o.jsxs)(Mo.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.1*t},className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:[e.emotion," (",e.count,")"]},t))})]})]})]}),v&&(0,$o.jsx)(Mo.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl shadow-lg p-4 border-2 border-blue-200",children:(0,$o.jsxs)("div",{className:"flex items-start mb-3",children:[(0,$o.jsx)(cl,{className:"w-5 h-5 text-blue-500 mr-2 mt-0.5 flex-shrink-0"}),(0,$o.jsxs)("div",{className:"flex-1",children:[(0,$o.jsxs)("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center",children:["AI-Moderated Summary",(0,$o.jsx)(pl,{className:"w-4 h-4 ml-2 text-blue-500"})]}),(0,$o.jsx)("p",{className:"text-sm text-gray-700 mb-3",children:v.summary}),v.keyThemes&&v.keyThemes.length>0&&(0,$o.jsxs)("div",{children:[(0,$o.jsx)("span",{className:"text-xs text-gray-600 mb-1 block",children:"Key Themes:"}),(0,$o.jsx)("div",{className:"flex flex-wrap gap-2",children:v.keyThemes.map((e,t)=>(0,$o.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs",children:e},t))})]})]})]})})]}),(0,$o.jsx)("div",{className:"max-w-4xl mx-auto p-4",children:(0,$o.jsxs)("div",{className:"space-y-4",children:[o.isJoined&&(0,$o.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-4",children:(0,$o.jsxs)("div",{className:"flex space-x-3",children:[(0,$o.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-semibold",children:t.nickname.charAt(0).toUpperCase()}),(0,$o.jsxs)("div",{className:"flex-1",children:[(0,$o.jsx)("textarea",{value:u,onChange:e=>m(e.target.value),placeholder:"Share something supportive with the community...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:3}),(0,$o.jsxs)("div",{className:"flex justify-between items-center mt-3",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,$o.jsx)(zc,{className:"w-4 h-4"}),(0,$o.jsx)("span",{children:"Posting anonymously"})]}),(0,$o.jsx)("button",{onClick:I,disabled:N,className:"p-2 rounded-lg transition-colors ".concat(N?"bg-red-100 text-red-600 animate-pulse":"bg-purple-100 text-purple-600 hover:bg-purple-200"),title:"Voice Check-in",children:N?(0,$o.jsx)(xl,{className:"w-4 h-4"}):(0,$o.jsx)(yl,{className:"w-4 h-4"})})]}),(0,$o.jsxs)("button",{onClick:_,disabled:!u.trim(),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:[(0,$o.jsx)(vl,{className:"w-4 h-4"}),(0,$o.jsx)("span",{children:"Post"})]})]})]})]})}),(0,$o.jsx)("div",{className:"space-y-4",children:c.map(e=>(0,$o.jsx)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm p-4",children:(0,$o.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,$o.jsx)(Mo.div,{animate:{scale:A.has(e.id)?[1,1.1,1]:1},transition:{duration:.5,repeat:1/0,repeatDelay:2},className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold bg-gradient-to-br ".concat(A.get(e.id)||"from-gray-400 to-gray-500"),children:e.author.charAt(0).toUpperCase()}),(0,$o.jsxs)("div",{className:"flex-1",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,$o.jsx)("span",{className:"font-medium text-gray-800",children:e.author}),(0,$o.jsx)("span",{className:"text-sm text-gray-500",children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),e.isAnonymous&&(0,$o.jsx)(zc,{className:"w-4 h-4 text-gray-400"})]}),(0,$o.jsx)("p",{className:"text-gray-700 mb-3",children:e.content}),e.emotion&&(0,$o.jsx)("div",{className:"mb-3",children:(0,$o.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gradient-to-r ".concat(D(e.emotion.type)," text-white"),children:e.emotion.type})}),(0,$o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,$o.jsxs)("button",{onClick:()=>{return t=e.id,void d(e=>e.map(e=>e.id===t?(0,Ie.A)((0,Ie.A)({},e),{},{isLiked:!e.isLiked,likes:e.isLiked?e.likes-1:e.likes+1}):e));var t},className:"flex items-center space-x-1 px-3 py-1 rounded-full transition-colors ".concat(e.isLiked?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[(0,$o.jsx)(Vc,{className:"w-4 h-4"}),(0,$o.jsx)("span",{className:"text-sm",children:e.likes})]}),(0,$o.jsxs)("button",{className:"flex items-center space-x-1 px-3 py-1 rounded-full bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors",children:[(0,$o.jsx)(Hl,{className:"w-4 h-4"}),(0,$o.jsx)("span",{className:"text-sm",children:"Reply"})]}),(0,$o.jsxs)("button",{className:"flex items-center space-x-1 px-3 py-1 rounded-full bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors",children:[(0,$o.jsx)(Bc,{className:"w-4 h-4"}),(0,$o.jsx)("span",{className:"text-sm",children:"Report"})]})]})]})]})},e.id))})]})}),(0,$o.jsx)(De,{children:f&&(0,$o.jsx)(Mo.div,{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,$o.jsxs)(Mo.div,{className:"bg-white rounded-2xl p-6 max-w-md w-full",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[(0,$o.jsxs)("h3",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center",children:[(0,$o.jsx)(Fl,{className:"w-5 h-5 mr-2 text-blue-500"}),"Circle Rules"]}),(0,$o.jsx)("ul",{className:"space-y-3 mb-6",children:o.rules.map((e,t)=>(0,$o.jsxs)("li",{className:"flex items-start space-x-2",children:[(0,$o.jsx)(vc,{className:"w-5 h-5 text-green-500 mt-0.5"}),(0,$o.jsx)("span",{className:"text-gray-700",children:e})]},t))}),(0,$o.jsx)("button",{onClick:()=>g(!1),className:"w-full bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors",children:"Got it"})]})})})]}):(0,$o.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 relative overflow-hidden",children:[(0,$o.jsx)(Rc,{particleCount:20,className:"opacity-40"}),(0,$o.jsxs)("div",{className:"relative z-10",children:[(0,$o.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200 p-4",children:(0,$o.jsx)("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,$o.jsx)("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,$o.jsx)(Fc,{className:"w-5 h-5 text-gray-600"})}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Peer Circles"}),(0,$o.jsx)("p",{className:"text-gray-600",children:"Small safe groups for support and connection"})]})]})})}),(0,$o.jsx)("div",{className:"max-w-6xl mx-auto p-6",children:(0,$o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>(0,$o.jsxs)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02},className:"bg-white rounded-2xl shadow-lg overflow-hidden cursor-pointer",onClick:()=>l(e),children:[(0,$o.jsx)("div",{className:"h-2 bg-gradient-to-r ".concat(F(e.theme))}),(0,$o.jsxs)("div",{className:"p-6",children:[(0,$o.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)("span",{className:"text-3xl",children:O(e.theme)}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:e.name}),(0,$o.jsx)("p",{className:"text-sm text-gray-600",children:e.theme})]})]}),e.isJoined&&(0,$o.jsxs)("div",{className:"flex items-center space-x-1 text-green-600",children:[(0,$o.jsx)(vc,{className:"w-4 h-4"}),(0,$o.jsx)("span",{className:"text-sm font-medium",children:"Joined"})]})]}),(0,$o.jsx)("p",{className:"text-gray-600 mb-4",children:e.description}),(0,$o.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,$o.jsx)(Yl,{className:"w-4 h-4"}),(0,$o.jsxs)("span",{children:[e.currentMembers,"/",e.maxCapacity," members"]})]}),(0,$o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,$o.jsx)(Xl,{className:"w-4 h-4"}),(0,$o.jsx)("span",{children:e.lastActivity})]})]}),(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)(Ol,{className:"w-4 h-4 text-gray-400"}),(0,$o.jsx)("span",{className:"text-sm text-gray-500",children:"Supportive community"})]}),(0,$o.jsx)("button",{onClick:t=>{t.stopPropagation(),e.isJoined?L(e.id):M(e.id)},className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat(e.isJoined?"bg-red-500 text-white hover:bg-red-600":"bg-blue-500 text-white hover:bg-blue-600"),children:e.isJoined?"Leave":"Join"})]})]})]},e.id))})})]}),(0,$o.jsx)(Hc,{trigger:h,onComplete:()=>p(!1)}),(0,$o.jsx)(Wc,{count:5,size:3,duration:3})]})}const Xc=ll("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),$c=ll("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),Kc={primary:"bg-gradient-to-r from-pink-400 via-peach-400 to-lavender-400",secondary:"bg-gradient-to-r from-sky-400 via-mint-400 to-lavender-400",mint:"bg-gradient-to-r from-mint-400 via-sky-400 to-lavender-400",lavender:"bg-gradient-to-r from-lavender-400 via-pink-400 to-peach-400"},Jc={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"};function Qc(e){let{children:t,onClick:n,variant:a="primary",size:r="md",className:s="",disabled:i=!1,icon:o}=e;return(0,$o.jsxs)(Mo.button,{onClick:n,disabled:i,className:"\n        relative overflow-hidden\n        ".concat(Kc[a],"\n        ").concat(Jc[r],"\n        text-white font-semibold rounded-2xl\n        shadow-lg shadow-pink-200/50\n        backdrop-blur-sm\n        ").concat(i?"opacity-50 cursor-not-allowed":"cursor-pointer","\n        ").concat(s,"\n      "),whileHover:i?{}:{scale:1.05,boxShadow:"0 0 30px rgba(255, 143, 163, 0.4)"},whileTap:i?{}:{scale:.98},animate:i?{}:{boxShadow:["0 10px 40px rgba(255, 143, 163, 0.2)","0 10px 40px rgba(255, 143, 163, 0.3)","0 10px 40px rgba(255, 143, 163, 0.2)"]},transition:{boxShadow:{duration:2,repeat:1/0,ease:"easeInOut"}},children:[(0,$o.jsx)(Mo.div,{className:"absolute inset-0 bg-white/20 rounded-full",initial:{scale:0,opacity:1},whileTap:{scale:2,opacity:0},transition:{duration:.4}}),(0,$o.jsxs)("span",{className:"relative flex items-center justify-center space-x-2",children:[o&&(0,$o.jsx)("span",{children:o}),(0,$o.jsx)("span",{children:t}),!o&&(0,$o.jsx)(Mo.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:(0,$o.jsx)(pl,{className:"w-4 h-4"})})]}),(0,$o.jsx)(Mo.div,{className:"absolute inset-0 pointer-events-none",initial:{opacity:0},whileHover:{opacity:1},children:[...Array(6)].map((e,t)=>(0,$o.jsx)(Mo.div,{className:"absolute w-2 h-2 bg-white/60 rounded-full",style:{left:"".concat(20+15*t,"%"),top:"50%"},animate:{y:[0,-30,-60],x:[0,20*Math.random()-10],opacity:[0,1,0],scale:[0,1,0]},transition:{duration:1.5,repeat:1/0,delay:.2*t,ease:"easeOut"}},t))})]})}const Zc=new class{constructor(){this.audioContext=null,this.sounds=new Map,"undefined"!==typeof window&&"AudioContext"in window&&(this.audioContext=new AudioContext)}async playSound(e){if(this.audioContext)try{({xp:[800,1e3],achievement:[523.25,659.25,783.99],levelup:[523.25,659.25,783.99,1046.5],click:[400],success:[659.25,783.99]})[e].forEach((t,n)=>{const a=this.audioContext.createOscillator(),r=this.audioContext.createGain();a.connect(r),r.connect(this.audioContext.destination),a.frequency.value=t,a.type="click"===e?"square":"sine",r.gain.setValueAtTime(.3,this.audioContext.currentTime),r.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.3),a.start(this.audioContext.currentTime+.1*n),a.stop(this.audioContext.currentTime+.3+.1*n)})}catch(t){console.warn("Could not play sound:",t)}}};class ed{static lightTap(){"vibrate"in navigator&&navigator.vibrate(10)}static mediumTap(){"vibrate"in navigator&&navigator.vibrate(30)}static strongTap(){"vibrate"in navigator&&navigator.vibrate([50,30,50])}static success(){"vibrate"in navigator&&navigator.vibrate([30,50,30])}static achievement(){"vibrate"in navigator&&navigator.vibrate([50,50,100,50,100])}}function td(e){let{xp:t,show:n,onComplete:a,position:s={x:50,y:50}}=e;return(0,r.useEffect)(()=>{if(n){Zc.playSound("xp"),ed.lightTap();const e=setTimeout(()=>{null===a||void 0===a||a()},2e3);return()=>clearTimeout(e)}},[n,a]),(0,$o.jsx)(De,{children:n&&(0,$o.jsxs)(Mo.div,{className:"fixed pointer-events-none z-50",style:{left:"".concat(s.x,"%"),top:"".concat(s.y,"%"),transform:"translate(-50%, -50%)"},initial:{opacity:0,scale:0,y:0},animate:{opacity:1,scale:1,y:-50},exit:{opacity:0,scale:.5,y:-100},transition:{duration:.5},children:[(0,$o.jsxs)(Mo.div,{className:"relative bg-gradient-to-r from-yellow-400 via-orange-400 to-pink-400 rounded-full px-6 py-3 shadow-2xl",animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{duration:.6,ease:[.34,1.56,.64,1]},children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-2 text-white font-bold text-lg",children:[(0,$o.jsx)(pl,{className:"w-5 h-5"}),(0,$o.jsxs)("span",{children:["+",t," XP"]}),(0,$o.jsx)(hl,{className:"w-5 h-5"})]}),(0,$o.jsx)(Mo.div,{className:"absolute inset-0 rounded-full bg-white/30 blur-xl",animate:{scale:[1,1.5,1],opacity:[.5,.8,.5]},transition:{duration:1,repeat:1/0}})]}),[...Array(12)].map((e,t)=>{const n=t/12*Math.PI*2;return(0,$o.jsx)(Mo.div,{className:"absolute w-3 h-3 bg-yellow-300 rounded-full",style:{left:"50%",top:"50%"},initial:{scale:0,opacity:1},animate:{x:60*Math.cos(n),y:60*Math.sin(n),scale:[0,1,0],opacity:[1,1,0]},transition:{duration:1,delay:.05*t,ease:"easeOut"}},t)})]})})}function nd(e){let{quests:t,onQuestClick:n}=e;return(0,$o.jsxs)("div",{className:"relative w-full h-full min-h-[500px]",children:[(0,$o.jsx)("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",children:t.slice(0,-1).map((e,n)=>{const a=t[n+1];return a?(0,$o.jsx)(Mo.line,{x1:"".concat(e.x,"%"),y1:"".concat(e.y,"%"),x2:"".concat(a.x,"%"),y2:"".concat(a.y,"%"),stroke:"completed"===e.status?"#A8E6CF":"#E5E7EB",strokeWidth:"3",strokeDasharray:"completed"===e.status?"0":"10 5",initial:{pathLength:0},animate:{pathLength:"completed"===e.status?1:.5},transition:{duration:1,ease:"easeInOut"}},"path-".concat(e.id,"-").concat(a.id)):null})}),t.map(e=>(0,$o.jsxs)(Mo.div,{className:"absolute cursor-pointer",style:{left:"".concat(e.x,"%"),top:"".concat(e.y,"%"),transform:"translate(-50%, -50%)"},initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.1*t.indexOf(e)},whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>null===n||void 0===n?void 0:n(e.id),children:[(0,$o.jsxs)("div",{className:"\n              w-16 h-16 rounded-full\n              flex items-center justify-center\n              shadow-xl transition-all\n              ".concat("completed"===e.status?"bg-gradient-to-br from-green-400 to-emerald-500":"available"===e.status?"bg-gradient-to-br from-pink-400 to-peach-400":"bg-gradient-to-br from-gray-300 to-gray-400","\n            "),children:["completed"===e.status&&(0,$o.jsx)(vc,{className:"w-8 h-8 text-white"}),"available"===e.status&&(0,$o.jsx)(Pc,{className:"w-8 h-8 text-white"}),"locked"===e.status&&(0,$o.jsx)(zc,{className:"w-8 h-8 text-gray-600"})]}),(0,$o.jsx)(Mo.div,{className:"absolute top-full mt-2 left-1/2 -translate-x-1/2 whitespace-nowrap",initial:{opacity:0,y:-10},whileHover:{opacity:1,y:0},children:(0,$o.jsx)("div",{className:"bg-white/90 backdrop-blur-sm px-3 py-1 rounded-lg shadow-md text-sm font-medium text-gray-800",children:e.title})}),"available"===e.status&&(0,$o.jsx)(Mo.div,{className:"absolute inset-0 rounded-full border-2 border-pink-400",animate:{scale:[1,1.5,1],opacity:[.5,0,.5]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]},e.id))]})}const ad=new class{async getStreak(e){try{const t=localStorage.getItem("streak-".concat(e));if(t){const n=JSON.parse(t);return this.updateStreak(e,n)}const n={currentStreak:0,longestStreak:0,lastActivityDate:(new Date).toISOString().split("T")[0],streakMultiplier:1};return this.updateStreak(e,n)}catch(t){return console.error("Error getting streak:",t),{currentStreak:0,longestStreak:0,lastActivityDate:(new Date).toISOString().split("T")[0],streakMultiplier:1}}}async updateStreak(e,t){const n=(new Date).toISOString().split("T")[0],a=new Date(t.lastActivityDate),r=new Date(n),s=Math.floor((r.getTime()-a.getTime())/864e5);if(0===s)return t;if(1===s){const a=t.currentStreak+1,r=Math.min(1+.1*a,1.7),s={currentStreak:a,longestStreak:Math.max(a,t.longestStreak),lastActivityDate:n,streakMultiplier:r};return await this.saveStreak(e,s),s}{const a={currentStreak:1,longestStreak:t.longestStreak,lastActivityDate:n,streakMultiplier:1};return await this.saveStreak(e,a),a}}async recordActivity(e){const t=await this.getStreak(e);return this.updateStreak(e,t)}async getMultiplier(e){return(await this.getStreak(e)).streakMultiplier}async saveStreak(e,t){try{localStorage.setItem("streak-".concat(e),JSON.stringify(t));const n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"});await Nl.P.uploadAudio(n,e,"wellness","streak-".concat(Date.now(),".json"))}catch(n){console.error("Error saving streak:",n)}}};const rd=new class{constructor(){this.rewards=[{id:"theme-sunset",title:"Sunset Theme",description:"Warm orange and pink gradients",icon:"\ud83c\udf05",cost:100,type:"theme",rarity:"common",unlocked:!1},{id:"theme-ocean",title:"Ocean Theme",description:"Calming blues and teals",icon:"\ud83c\udf0a",cost:150,type:"theme",rarity:"common",unlocked:!1},{id:"theme-forest",title:"Forest Theme",description:"Nature greens and browns",icon:"\ud83c\udf32",cost:200,type:"theme",rarity:"rare",unlocked:!1},{id:"effect-glitter",title:"Glitter Effect",description:"Sparkly avatar particles",icon:"\u2728",cost:250,type:"effect",rarity:"rare",unlocked:!1},{id:"effect-rainbow",title:"Rainbow Aura",description:"Colorful glow around avatar",icon:"\ud83c\udf08",cost:500,type:"effect",rarity:"epic",unlocked:!1},{id:"sound-chimes",title:"Chime Pack",description:"Gentle bell sounds",icon:"\ud83d\udd14",cost:150,type:"sound",rarity:"common",unlocked:!1},{id:"sound-nature",title:"Nature Sounds",description:"Birds, water, wind",icon:"\ud83d\udc26",cost:200,type:"sound",rarity:"common",unlocked:!1},{id:"badge-warrior",title:"Warrior Badge",description:"For completing 10 challenges",icon:"\u2694\ufe0f",cost:300,type:"badge",rarity:"rare",unlocked:!1},{id:"badge-zen",title:"Zen Master Badge",description:"For 30-day streak",icon:"\ud83e\uddd8",cost:1e3,type:"badge",rarity:"legendary",unlocked:!1}]}getRewards(){return this.rewards}async purchaseReward(e,t,n){const a=this.rewards.find(e=>e.id===t);if(!a)return{success:!1,message:"Reward not found",remainingXP:n};if(a.unlocked)return{success:!1,message:"Already unlocked",remainingXP:n};if(n<a.cost)return{success:!1,message:"Not enough XP",remainingXP:n};a.unlocked=!0;const r=n-a.cost;return this.saveRewards(e),{success:!0,message:"Unlocked ".concat(a.title,"!"),remainingXP:r}}async saveRewards(e){try{localStorage.setItem("rewards-".concat(e),JSON.stringify(this.rewards))}catch(t){console.error("Error saving rewards:",t)}}async loadRewards(e){try{const t=localStorage.getItem("rewards-".concat(e));t&&(this.rewards=JSON.parse(t))}catch(t){console.error("Error loading rewards:",t)}return this.rewards}};const sd=new class{async getWeeklyLeaderboard(){return[{userId:"1",nickname:"WellnessWarrior",avatarLevel:12,totalXP:5420,weeklyXP:850,streak:15,rank:1},{userId:"2",nickname:"CalmSoul",avatarLevel:11,totalXP:5100,weeklyXP:720,streak:12,rank:2},{userId:"3",nickname:"MindfulMe",avatarLevel:10,totalXP:4850,weeklyXP:680,streak:10,rank:3},{userId:"4",nickname:"PeacefulPath",avatarLevel:9,totalXP:4520,weeklyXP:620,streak:8,rank:4},{userId:"5",nickname:"BloomBuddy",avatarLevel:8,totalXP:4200,weeklyXP:580,streak:7,rank:5}]}async getUserRank(e){const t=(await this.getWeeklyLeaderboard()).find(t=>t.userId===e);return(null===t||void 0===t?void 0:t.rank)||0}async getFriendsLeaderboard(e,t){return(await this.getWeeklyLeaderboard()).filter(e=>t.includes(e.userId))}},id=ll("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),od=["\ud83c\udf38","\ud83c\udf3a","\ud83c\udf3b","\ud83c\udf37","\ud83c\udf39","\ud83c\udf3c","\ud83c\udf3f","\ud83c\udf40","\ud83c\udf44","\ud83c\udf35","\ud83c\udf34","\ud83c\udf32"];function ld(e){let{onComplete:t}=e;const[n,a]=(0,r.useState)([]),[s,i]=(0,r.useState)([]),[o,l]=(0,r.useState)(0),[c,d]=(0,r.useState)(0),[u,m]=(0,r.useState)(!1),[h,p]=(0,r.useState)(0);(0,r.useEffect)(()=>{f()},[]),(0,r.useEffect)(()=>{if(u)return;const e=setInterval(()=>{p(e=>e+1)},1e3);return()=>clearInterval(e)},[u]);const f=()=>{const e=[...od.slice(0,8),...od.slice(0,8)].sort(()=>Math.random()-.5).map((e,t)=>({id:t,emoji:e,isFlipped:!1,isMatched:!1}));a(e),i([]),l(0),d(0),m(!1),p(0)},g=(e,t)=>{const n=Math.max(0,5*(30-e)),a=Math.max(0,2*(60-t));return Math.max(50,100+n+a)};return(0,$o.jsxs)("div",{className:"w-full max-w-2xl mx-auto p-6 glass-strong rounded-3xl",children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[(0,$o.jsx)(pl,{className:"w-6 h-6 mr-2 text-purple-500"}),"Memory Match"]}),(0,$o.jsx)("p",{className:"text-gray-600",children:"Match all pairs to win!"})]}),(0,$o.jsx)(Qc,{variant:"secondary",size:"sm",onClick:f,icon:(0,$o.jsx)(id,{className:"w-4 h-4"}),children:"Restart"})]}),(0,$o.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,$o.jsxs)("div",{className:"bg-white/50 backdrop-blur-sm rounded-xl p-3 text-center",children:[(0,$o.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:c}),(0,$o.jsx)("div",{className:"text-xs text-gray-600",children:"Moves"})]}),(0,$o.jsxs)("div",{className:"bg-white/50 backdrop-blur-sm rounded-xl p-3 text-center",children:[(0,$o.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[o,"/8"]}),(0,$o.jsx)("div",{className:"text-xs text-gray-600",children:"Matches"})]}),(0,$o.jsxs)("div",{className:"bg-white/50 backdrop-blur-sm rounded-xl p-3 text-center",children:[(0,$o.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[h,"s"]}),(0,$o.jsx)("div",{className:"text-xs text-gray-600",children:"Time"})]})]}),(0,$o.jsx)("div",{className:"grid grid-cols-4 gap-3 mb-6",children:n.map((e,r)=>(0,$o.jsxs)(Mo.button,{onClick:()=>(e=>{if(n[e].isFlipped||n[e].isMatched||s.length>=2)return;const r=[...n];r[e].isFlipped=!0,a(r);const u=[...s,e];i(u),2===u.length&&(d(e=>e+1),setTimeout(()=>{const[e,n]=u;r[e].emoji===r[n].emoji?(r[e].isMatched=!0,r[n].isMatched=!0,r[e].isFlipped=!0,r[n].isFlipped=!0,l(e=>e+1),o+1===8&&setTimeout(()=>{m(!0);const e=g(c+1,h);t(e)},500)):(r[e].isFlipped=!1,r[n].isFlipped=!1),a(r),i([])},1e3))})(r),disabled:e.isMatched||u,className:"\n              aspect-square rounded-xl p-4 text-4xl\n              transition-all duration-300\n              ".concat(e.isMatched?"bg-green-400":e.isFlipped?"bg-white/90":"bg-purple-400","\n              ").concat(e.isMatched?"cursor-default":"cursor-pointer hover:scale-105","\n              shadow-lg\n            "),whileHover:e.isMatched?{}:{scale:1.05},whileTap:e.isMatched?{}:{scale:.95},initial:{rotateY:0},animate:{rotateY:e.isFlipped||e.isMatched?0:180},transition:{duration:.3},children:[e.isFlipped||e.isMatched?(0,$o.jsx)(Mo.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},children:e.emoji}):(0,$o.jsx)("div",{className:"text-gray-600",children:"?"}),e.isMatched&&(0,$o.jsx)(Mo.div,{className:"absolute inset-0 flex items-center justify-center",initial:{scale:0},animate:{scale:1.2},transition:{type:"spring"},children:(0,$o.jsx)(vc,{className:"w-8 h-8 text-white"})})]},e.id))}),(0,$o.jsx)(De,{children:u&&(0,$o.jsxs)(Mo.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center p-6 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-2xl border-2 border-yellow-200",children:[(0,$o.jsx)(Mo.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200},children:(0,$o.jsx)(rc,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"})}),(0,$o.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Congratulations!"}),(0,$o.jsx)("p",{className:"text-gray-600 mb-4",children:"You matched all pairs!"}),(0,$o.jsxs)("div",{className:"space-y-2",children:[(0,$o.jsxs)("div",{className:"text-lg",children:[(0,$o.jsx)("span",{className:"font-semibold",children:"Final Score:"})," ",(0,$o.jsxs)("span",{className:"text-purple-600 font-bold",children:[g(c,h)," XP"]})]}),(0,$o.jsxs)("div",{className:"text-sm text-gray-600",children:["Completed in ",c," moves and ",h," seconds"]})]})]})})]})}const cd=["I am capable of achieving my goals","Every day I grow stronger and wiser","I choose to focus on positive thoughts","I am worthy of love and happiness","I embrace challenges as opportunities","My mind is calm and peaceful","I trust in my ability to succeed","I am grateful for this moment"];function dd(e){let{onComplete:t}=e;const[n,a]=(0,r.useState)(""),[s,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(0),[u,m]=(0,r.useState)(100),[h,p]=(0,r.useState)(!1),[f,g]=(0,r.useState)(0),x=(0,r.useRef)(null);(0,r.useEffect)(()=>{var e;const t=cd[Math.floor(Math.random()*cd.length)];a(t),null===(e=x.current)||void 0===e||e.focus()},[]),(0,r.useEffect)(()=>{if(o&&1===s.length&&l(Date.now()),s.length>0&&o){const e=(Date.now()-o)/1e3/60,t=s.length/5;d(Math.round(t/e));let a=0;for(let r=0;r<s.length;r++)s[r]!==n[r]&&a++;g(a),m(Math.max(0,(s.length-a)/s.length*100))}},[s,o,n]);const y=(e,t)=>{const n=Math.min(100,2*e),a=t/100*50;return Math.round(n+a)},v=e=>e>=s.length?"text-gray-400":s[e]===n[e]?"text-green-500":"text-red-500 bg-red-100";return(0,$o.jsxs)("div",{className:"w-full max-w-2xl mx-auto p-6 glass-strong rounded-3xl",children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[(0,$o.jsx)(ql,{className:"w-6 h-6 mr-2 text-yellow-500"}),"Type Racer"]}),(0,$o.jsx)("p",{className:"text-gray-600",children:"Type the affirmation as fast as you can!"})]}),(0,$o.jsx)(Qc,{variant:"secondary",size:"sm",onClick:()=>{var e;const t=cd[Math.floor(Math.random()*cd.length)];a(t),i(""),l(null),d(0),m(100),p(!1),g(0),null===(e=x.current)||void 0===e||e.focus()},icon:(0,$o.jsx)(id,{className:"w-4 h-4"}),children:"Restart"})]}),(0,$o.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,$o.jsxs)("div",{className:"bg-white/50 backdrop-blur-sm rounded-xl p-3 text-center",children:[(0,$o.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:c}),(0,$o.jsx)("div",{className:"text-xs text-gray-600",children:"WPM"})]}),(0,$o.jsxs)("div",{className:"bg-white/50 backdrop-blur-sm rounded-xl p-3 text-center",children:[(0,$o.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[Math.round(u),"%"]}),(0,$o.jsx)("div",{className:"text-xs text-gray-600",children:"Accuracy"})]}),(0,$o.jsxs)("div",{className:"bg-white/50 backdrop-blur-sm rounded-xl p-3 text-center",children:[(0,$o.jsx)("div",{className:"text-2xl font-bold text-red-600",children:f}),(0,$o.jsx)("div",{className:"text-xs text-gray-600",children:"Errors"})]})]}),(0,$o.jsxs)("div",{className:"mb-6",children:[(0,$o.jsx)("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-6 mb-4",children:(0,$o.jsx)("div",{className:"text-lg leading-relaxed font-medium text-gray-800",children:n.split("").map((e,t)=>(0,$o.jsx)("span",{className:v(t),children:" "===e?"\xa0":e},t))})}),(0,$o.jsx)("input",{ref:x,type:"text",value:s,onChange:e=>{const a=e.target.value;if(o||l(Date.now()),i(a),a===n){p(!0);const e=y(c,u);setTimeout(()=>t(e),1e3)}},disabled:h,placeholder:"Start typing...",className:"w-full px-4 py-3 rounded-xl bg-white/70 backdrop-blur-sm border-2 border-purple-300 focus:border-purple-500 focus:outline-none text-lg font-medium text-gray-800"})]}),(0,$o.jsxs)("div",{className:"mb-6",children:[(0,$o.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,$o.jsx)(Mo.div,{className:"bg-gradient-to-r from-purple-400 to-pink-400 h-3 rounded-full",initial:{width:0},animate:{width:"".concat(s.length/n.length*100,"%")},transition:{duration:.1}})}),(0,$o.jsxs)("div",{className:"text-center text-sm text-gray-600 mt-2",children:[s.length," / ",n.length," characters"]})]}),(0,$o.jsx)(De,{children:h&&(0,$o.jsxs)(Mo.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center p-6 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-2xl border-2 border-yellow-200",children:[(0,$o.jsx)(Mo.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200},children:(0,$o.jsx)(rc,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"})}),(0,$o.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Amazing!"}),(0,$o.jsx)("p",{className:"text-gray-600 mb-4",children:"You completed the typing challenge!"}),(0,$o.jsxs)("div",{className:"space-y-2",children:[(0,$o.jsxs)("div",{className:"text-lg",children:[(0,$o.jsx)("span",{className:"font-semibold",children:"Final Score:"})," ",(0,$o.jsxs)("span",{className:"text-purple-600 font-bold",children:[y(c,u)," XP"]})]}),(0,$o.jsxs)("div",{className:"text-sm text-gray-600",children:[c," WPM \u2022 ",Math.round(u),"% Accuracy"]})]})]})})]})}const ud=ll("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),md=[{question:"Which breathing technique is most effective for reducing stress?",options:["Fast shallow breaths","Deep diaphragmatic breathing","Holding breath","Irregular breathing"],correct:1,explanation:"Deep diaphragmatic breathing activates the parasympathetic nervous system, promoting relaxation."},{question:"How long does it typically take to form a new habit?",options:["7 days","21 days","30-66 days","100 days"],correct:2,explanation:"Research shows it takes an average of 66 days to form a new habit, but can range from 18 to 254 days."},{question:"What is a common technique used in Cognitive Behavioral Therapy (CBT)?",options:["Ignoring negative thoughts","Challenging cognitive distortions","Avoiding emotions","Suppressing feelings"],correct:1,explanation:"CBT focuses on identifying and challenging cognitive distortions to change thought patterns."},{question:"Which activity is proven to boost mood naturally?",options:["Watching TV","Exercise","Scrolling social media","Isolation"],correct:1,explanation:"Exercise releases endorphins and other mood-boosting chemicals in the brain."},{question:"What percentage of communication is non-verbal?",options:["30%","55%","70%","90%"],correct:2,explanation:"Research suggests that 55% of communication is body language, 38% is tone of voice, and only 7% is words."}];function hd(e){let{onComplete:t}=e;const[n,a]=(0,r.useState)(0),[s,i]=(0,r.useState)(null),[o,l]=(0,r.useState)(0),[c,d]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!1),[h,p]=(0,r.useState)([]);(0,r.useEffect)(()=>{const e=[...md].sort(()=>Math.random()-.5).slice(0,5);p(e)},[]);const f=e=>50*e+(e===h.length?50:0);if(0===h.length)return(0,$o.jsx)("div",{children:"Loading..."});const g=h[n];return(0,$o.jsxs)("div",{className:"w-full max-w-2xl mx-auto p-6 glass-strong rounded-3xl",children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[(0,$o.jsx)(cl,{className:"w-6 h-6 mr-2 text-blue-500"}),"Wellness Trivia"]}),(0,$o.jsx)("p",{className:"text-gray-600",children:"Test your mental wellness knowledge!"})]}),(0,$o.jsx)(Qc,{variant:"secondary",size:"sm",onClick:()=>{const e=[...md].sort(()=>Math.random()-.5).slice(0,5);p(e),a(0),i(null),l(0),d(!1),m(!1)},icon:(0,$o.jsx)(id,{className:"w-4 h-4"}),children:"Restart"})]}),(0,$o.jsxs)("div",{className:"mb-6",children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,$o.jsxs)("span",{className:"text-sm text-gray-600",children:["Question ",n+1," of ",h.length]}),(0,$o.jsxs)("span",{className:"text-sm font-semibold text-purple-600",children:["Score: ",o,"/",h.length]})]}),(0,$o.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,$o.jsx)(Mo.div,{className:"bg-gradient-to-r from-blue-400 to-purple-400 h-2 rounded-full",initial:{width:0},animate:{width:"".concat((n+1)/h.length*100,"%")},transition:{duration:.3}})})]}),(0,$o.jsx)(De,{mode:"wait",children:(0,$o.jsxs)(Mo.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"mb-6",children:[(0,$o.jsx)("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-6 mb-4",children:(0,$o.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:g.question})}),(0,$o.jsx)("div",{className:"space-y-3",children:g.options.map((e,r)=>{const u=s===r,p=r===g.correct,x=c&&u;return(0,$o.jsx)(Mo.button,{onClick:()=>(e=>{null===s&&(i(e),d(!0),e===h[n].correct&&l(e=>e+1),setTimeout(()=>{if(n<h.length-1)a(e=>e+1),i(null),d(!1);else{m(!0);const a=f(o+(e===h[n].correct?1:0));setTimeout(()=>t(a),1500)}},2e3))})(r),disabled:null!==s,className:"\n                    w-full p-4 rounded-xl text-left transition-all\n                    ".concat(c&&p?"bg-green-100 border-2 border-green-400":"","\n                    ").concat(x&&!p?"bg-red-100 border-2 border-red-400":"","\n                    ").concat(!c&&"bg-white/70 backdrop-blur-sm hover:bg-white/90 border-2 border-transparent hover:border-purple-300","\n                    ").concat(null!==s&&r===g.correct?"bg-green-100 border-2 border-green-400":"","\n                  "),whileHover:null===s?{scale:1.02}:{},whileTap:null===s?{scale:.98}:{},children:(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsx)("span",{className:"text-gray-800 font-medium",children:e}),x&&(0,$o.jsx)(Mo.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring"},children:p?(0,$o.jsx)(vc,{className:"w-5 h-5 text-green-600"}):(0,$o.jsx)(ud,{className:"w-5 h-5 text-red-600"})}),null!==s&&r===g.correct&&!u&&(0,$o.jsx)(vc,{className:"w-5 h-5 text-green-600"})]})},r)})}),c&&(0,$o.jsx)(Mo.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-4 p-4 bg-blue-50 rounded-xl border border-blue-200",children:(0,$o.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,$o.jsx)("span",{className:"font-semibold",children:"Explanation:"})," ",g.explanation]})})]},n)}),(0,$o.jsx)(De,{children:u&&(0,$o.jsxs)(Mo.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center p-6 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-2xl border-2 border-yellow-200",children:[(0,$o.jsx)(Mo.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200},children:(0,$o.jsx)(rc,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"})}),(0,$o.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Quiz Complete!"}),(0,$o.jsxs)("p",{className:"text-gray-600 mb-4",children:["You got ",o," out of ",h.length," correct!"]}),(0,$o.jsxs)("div",{className:"text-lg",children:[(0,$o.jsx)("span",{className:"font-semibold",children:"Final Score:"})," ",(0,$o.jsxs)("span",{className:"text-purple-600 font-bold",children:[f(o)," XP"]})]})]})})]})}const pd=ll("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);function fd(e){let{onClose:t,onComplete:n}=e;const[a,s]=(0,r.useState)(!1),[i,o]=(0,r.useState)("inhale"),[l,c]=(0,r.useState)(0),[d,u]=(0,r.useState)(!1),[m,h]=(0,r.useState)(!1),[p,f]=(0,r.useState)(0),[g,x]=(0,r.useState)(0),[y,v]=(0,r.useState)(1),[b,w]=(0,r.useState)(!0),j=(0,r.useRef)(null),N=(0,r.useRef)(null),k=(0,r.useRef)(),S=(0,r.useRef)(0),{user:C,setUser:E}=Xo(),P={inhale:4e3,hold:7e3,exhale:8e3,rest:2e3};(0,r.useEffect)(()=>()=>{A(),k.current&&cancelAnimationFrame(k.current)},[]);const A=()=>{N.current&&(N.current.getTracks().forEach(e=>e.stop()),N.current=null),j.current&&(j.current.srcObject=null)},T=()=>{s(!0),w(!1),(async()=>{try{const e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"},audio:!0});N.current=e,j.current&&(j.current.srcObject=e)}catch(e){console.error("Error accessing camera:",e)}})(),o("inhale"),c(0),S.current=Date.now(),M()},M=()=>{if(!a)return;if(Date.now()-S.current>=P[i]){let e;switch(i){case"inhale":e="hold";break;case"hold":e="exhale";break;case"exhale":e="rest",x(e=>e+1),c(e=>e+1);const t=L();f(e=>e+t),(l+1)%5===0&&v(e=>e+1);break;case"rest":e="inhale"}o(e),S.current=Date.now()}k.current=requestAnimationFrame(M)},L=()=>{let e=10;return l>0&&(e+=5*Math.floor(l/2)),e+=2*y,e},R=()=>{s(!1),A(),k.current&&cancelAnimationFrame(k.current)},D=(()=>{switch(i){case"inhale":return{text:"Breathe IN...",color:"text-blue-500",emoji:"\u2b06\ufe0f"};case"hold":return{text:"Hold...",color:"text-purple-500",emoji:"\u23f8\ufe0f"};case"exhale":return{text:"Breathe OUT...",color:"text-green-500",emoji:"\u2b07\ufe0f"};case"rest":return{text:"Rest...",color:"text-gray-500",emoji:"\ud83d\udca4"}}})(),I=(()=>{const e=Date.now()-S.current,t=P[i];return Math.min(e/t*100,100)})();return(0,$o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,$o.jsxs)(Mo.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,$o.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-teal-500 p-6 text-white flex justify-between items-center",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("h2",{className:"text-3xl font-bold flex items-center gap-3",children:["\ud83d\udc09 Breathing Dragon",(0,$o.jsxs)("span",{className:"text-sm font-normal bg-white bg-opacity-20 px-3 py-1 rounded-full",children:["Level ",y]})]}),(0,$o.jsx)("p",{className:"text-sm mt-1",children:"4-7-8 Breathing Exercise"})]}),(0,$o.jsx)("button",{onClick:t,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-full transition",children:(0,$o.jsx)(Bl,{size:24})})]}),(0,$o.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:b?(0,$o.jsxs)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center space-y-6",children:[(0,$o.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udc09"}),(0,$o.jsx)("h3",{className:"text-2xl font-bold text-gray-800",children:"Welcome to Breathing Dragon!"}),(0,$o.jsxs)("div",{className:"bg-blue-50 p-6 rounded-xl space-y-4 text-left max-w-2xl mx-auto",children:[(0,$o.jsxs)("div",{className:"flex items-start gap-3",children:[(0,$o.jsx)("div",{className:"text-2xl",children:"\ud83d\udcd6"}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h4",{className:"font-semibold mb-1",children:"How to Play"}),(0,$o.jsx)("p",{className:"text-sm text-gray-600",children:"Follow the breathing pattern: Inhale for 4 seconds, hold for 7 seconds, exhale for 8 seconds, then rest. Complete cycles to earn XP!"})]})]}),(0,$o.jsxs)("div",{className:"flex items-start gap-3",children:[(0,$o.jsx)("div",{className:"text-2xl",children:"\ud83c\udfaf"}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h4",{className:"font-semibold mb-1",children:"Your Goal"}),(0,$o.jsx)("p",{className:"text-sm text-gray-600",children:"Complete as many breathing cycles as you can. Each cycle earns you XP, and you level up every 5 cycles!"})]})]}),(0,$o.jsxs)("div",{className:"flex items-start gap-3",children:[(0,$o.jsx)("div",{className:"text-2xl",children:"\ud83d\udcf9"}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h4",{className:"font-semibold mb-1",children:"Camera"}),(0,$o.jsx)("p",{className:"text-sm text-gray-600",children:"Your camera helps track your breathing. Don't worry - nothing is recorded or saved without your permission."})]})]})]}),(0,$o.jsxs)("button",{onClick:T,className:"bg-gradient-to-r from-green-500 to-teal-500 text-white px-8 py-4 rounded-xl font-semibold text-lg hover:shadow-lg transition flex items-center gap-2 mx-auto",children:[(0,$o.jsx)(Pc,{size:20}),"Start Breathing Journey"]})]}):(0,$o.jsxs)("div",{className:"space-y-6",children:[(0,$o.jsxs)("div",{className:"relative bg-gray-900 rounded-xl overflow-hidden aspect-video",children:[(0,$o.jsx)("video",{ref:j,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),a&&(0,$o.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,$o.jsx)(Mo.div,{className:"absolute w-64 h-64 rounded-full border-4 border-white border-opacity-50",animate:{scale:"inhale"===i?[1,1.5,1]:"exhale"===i?[1.5,1,1]:1,opacity:"hold"===i?[.5,.8,.5]:1},transition:{duration:P[i]/1e3,repeat:1/0,ease:"inhale"===i?"easeIn":"exhale"===i?"easeOut":"linear"}})})]}),(0,$o.jsxs)("div",{className:"text-center",children:[(0,$o.jsx)(Mo.div,{className:"text-6xl mb-4 ".concat(D.color),animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0},children:D.emoji}),(0,$o.jsx)("h3",{className:"text-4xl font-bold mb-4 ".concat(D.color),children:D.text}),(0,$o.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden",children:(0,$o.jsx)(Mo.div,{className:"h-full ".concat("inhale"===i?"bg-blue-500":"hold"===i?"bg-purple-500":"exhale"===i?"bg-green-500":"bg-gray-400"),initial:{width:0},animate:{width:"".concat(I,"%")},transition:{duration:.1}})})]}),(0,$o.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,$o.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-xl text-center",children:[(0,$o.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:l}),(0,$o.jsx)("div",{className:"text-sm text-blue-700",children:"Cycles"})]}),(0,$o.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-xl text-center",children:[(0,$o.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:p}),(0,$o.jsx)("div",{className:"text-sm text-purple-700",children:"XP Earned"})]}),(0,$o.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-xl text-center",children:[(0,$o.jsx)("div",{className:"text-2xl font-bold text-green-600",children:y}),(0,$o.jsx)("div",{className:"text-sm text-green-700",children:"Level"})]})]})]})}),!b&&(0,$o.jsxs)("div",{className:"border-t p-4 bg-gray-50 flex justify-between items-center",children:[(0,$o.jsx)("div",{className:"flex gap-2",children:(0,$o.jsxs)("button",{onClick:a?R:T,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition flex items-center gap-2",children:[a?(0,$o.jsx)(pd,{size:18}):(0,$o.jsx)(Pc,{size:18}),a?"Pause":"Resume"]})}),(0,$o.jsxs)("button",{onClick:async()=>{R();const e=p+5*l+10*y;if(C){try{const t={userId:C.id,gameType:"breathing-dragon",cyclesCompleted:l,totalBreaths:g,level:y,score:p,xpEarned:e,timestamp:(new Date).toISOString()},n=new Blob([JSON.stringify(t)],{type:"application/json"});await Nl.P.uploadAudio(n,C.id,"recording","breathing-session-".concat(Date.now(),".json"))}catch(t){console.error("Error saving session:",t)}const n=(0,Ie.A)((0,Ie.A)({},C),{},{xp:(C.xp||0)+e});E(n)}n(e)},className:"px-6 py-2 bg-gradient-to-r from-green-500 to-teal-500 text-white rounded-lg hover:shadow-lg transition flex items-center gap-2 font-semibold",children:[(0,$o.jsx)(rc,{size:18}),"Complete & Earn ",p+5*l+10*y," XP"]})]})]})})}function gd(e){let{user:t,onBack:n}=e;const{mood:a}=Qo(),{xp:s,level:i,addXP:o}=function(){const e=(0,r.useContext)(el);if(!e)throw new Error("useGamification must be used within GamificationProvider");return e}(),[l,c]=(0,r.useState)([]),[d,u]=(0,r.useState)(null),[m,h]=(0,r.useState)(null),[p,f]=(0,r.useState)(!1),[g,x]=(0,r.useState)(!1),[y,v]=(0,r.useState)(null),[b,w]=(0,r.useState)([]),[j,N]=(0,r.useState)([]),[k,S]=(0,r.useState)({show:!1,xp:0}),[C,E]=(0,r.useState)(!1),[P,A]=(0,r.useState)("all");(0,r.useEffect)(()=>{t&&(T(),M(),L(),R())},[t,i]);const T=()=>{const e=[{id:"1",title:"5-Minute Breathing",description:"Complete a guided breathing exercise",difficulty:"easy",xpReward:25,status:i>=1?"available":"locked",category:"breathing",duration:5,icon:"\ud83e\udec1",requiresLevel:1},{id:"2",title:"Gratitude Journal",description:"Write 3 things you're grateful for",difficulty:"easy",xpReward:30,status:i>=1?"available":"locked",category:"gratitude",icon:"\ud83d\ude4f",requiresLevel:1},{id:"3",title:"Mindful Walk",description:"Take a 10-minute mindful walk",difficulty:"medium",xpReward:50,status:i>=3?"available":"locked",category:"exercise",duration:10,icon:"\ud83d\udeb6",requiresLevel:3},{id:"4",title:"Reflection Meditation",description:"15-minute guided meditation",difficulty:"medium",xpReward:60,status:i>=5?"available":"locked",category:"mindfulness",duration:15,icon:"\ud83e\uddd8",requiresLevel:5},{id:"5",title:"Breathing Dragon",description:"Complete a guided breathing exercise with camera tracking",difficulty:"easy",xpReward:50,status:"available",category:"breathing",duration:5,icon:"\ud83d\udc09"},{id:"6",title:"Memory Match",description:"Complete the memory game",difficulty:"medium",xpReward:75,status:"available",category:"game",icon:"\ud83c\udfae"},{id:"7",title:"Type Racer",description:"Speed typing challenge",difficulty:"hard",xpReward:100,status:"available",category:"game",icon:"\u2328\ufe0f"},{id:"8",title:"Wellness Trivia",description:"Test your wellness knowledge",difficulty:"hard",xpReward:120,status:i>=7?"available":"locked",category:"game",icon:"\ud83e\udde0",requiresLevel:7}],n=JSON.parse(localStorage.getItem("completed-challenges-".concat(t.id))||"[]"),a=e.map(e=>(0,Ie.A)((0,Ie.A)({},e),{},{status:n.includes(e.id)?"completed":e.status}));c(a);const r=(new Date).toISOString().split("T")[0],s=localStorage.getItem("daily-".concat(r,"-").concat(t.id));u({id:"daily-1",title:"Daily Wellness Check",description:"Complete your daily wellness routine",difficulty:"easy",xpReward:50,status:"available",category:"mindfulness",icon:"\u2b50",isDaily:!0,completedToday:!!s})},M=async()=>{if(!t)return;const e=await ad.getStreak(t.id);h(e)},L=async()=>{if(!t)return;const e=await rd.loadRewards(t.id);w(e)},R=async()=>{const e=await sd.getWeeklyLeaderboard();N(e)},D=async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!t)return;const a=l.find(t=>t.id===e);if(!a||"completed"===a.status)return;const r=await ad.recordActivity(t.id);h(r);const s=a.xpReward,c=r.streakMultiplier,d=Math.round((s+n)*c),u=i;await o({id:"".concat(e,"-").concat(Date.now()),type:"game"===a.category?"game":"challenge",xp:d,description:a.title,timestamp:new Date}),i>u&&(E(!0),setTimeout(()=>E(!1),3e3)),S({show:!0,xp:d}),setTimeout(()=>S({show:!1,xp:0}),2e3);const m=JSON.parse(localStorage.getItem("completed-challenges-".concat(t.id))||"[]");m.includes(e)||(m.push(e),localStorage.setItem("completed-challenges-".concat(t.id),JSON.stringify(m))),T()},I=async(e,t)=>{const n=l.find(t=>"breathing"===e&&"5"===t.id||"memory"===e&&"6"===t.id||"typeracer"===e&&"7"===t.id||"trivia"===e&&"8"===t.id);n&&await D(n.id,t),v(null)},_="all"===P?l:l.filter(e=>e.category===P),O=e=>{switch(e){case"easy":return"from-green-400 to-emerald-500";case"medium":return"from-yellow-400 to-orange-500";case"hard":return"from-red-400 to-pink-500";default:return"from-gray-400 to-gray-500"}},F=e=>{switch(e){case"completed":return(0,$o.jsx)(vc,{className:"w-5 h-5 text-green-500"});case"available":return(0,$o.jsx)(Pc,{className:"w-5 h-5 text-blue-500"});case"locked":return(0,$o.jsx)(zc,{className:"w-5 h-5 text-gray-400"});default:return null}};return(0,$o.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-purple-50 to-blue-50",children:[(0,$o.jsx)("div",{className:"bg-white/80 backdrop-blur-sm shadow-sm border-b border-gray-200 p-4 sticky top-0 z-50",children:(0,$o.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,$o.jsx)("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:"\u2190"}),(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("h1",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[(0,$o.jsx)(nc,{className:"w-6 h-6 mr-2 text-purple-500"}),"Challenges & Games"]}),(0,$o.jsx)("p",{className:"text-gray-600",children:"Level up through wellness activities"})]})]}),(0,$o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,$o.jsxs)("div",{className:"text-right",children:[(0,$o.jsxs)("div",{className:"text-sm text-gray-600",children:["Level ",i]}),(0,$o.jsxs)("div",{className:"text-lg font-bold text-purple-600",children:[s," XP"]})]}),(0,$o.jsxs)("div",{className:"flex space-x-2",children:[(0,$o.jsx)(Qc,{variant:"secondary",size:"sm",onClick:()=>x(!0),icon:(0,$o.jsx)(rc,{className:"w-4 h-4"}),children:"Leaderboard"}),(0,$o.jsx)(Qc,{variant:"mint",size:"sm",onClick:()=>f(!0),icon:(0,$o.jsx)(Xc,{className:"w-4 h-4"}),children:"Rewards"})]})]})]})}),(0,$o.jsxs)("div",{className:"max-w-7xl mx-auto p-6",children:[(0,$o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[m&&(0,$o.jsxs)(Mo.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"glass-strong rounded-2xl p-6 shadow-xl border-2 border-orange-200 bg-gradient-to-r from-orange-50 to-yellow-50",children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,$o.jsxs)("h2",{className:"text-xl font-bold text-gray-800 flex items-center",children:[(0,$o.jsx)($c,{className:"w-6 h-6 mr-2 text-orange-500"}),"Streak"]}),(0,$o.jsx)("div",{className:"text-3xl font-bold text-orange-600",children:m.currentStreak})]}),(0,$o.jsxs)("div",{className:"space-y-3",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,$o.jsx)("span",{className:"text-sm text-gray-700",children:"Current Streak"}),(0,$o.jsxs)("span",{className:"text-sm font-semibold text-orange-600",children:[Math.round(100*m.streakMultiplier-100),"% XP Bonus"]})]}),(0,$o.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,$o.jsx)(Mo.div,{initial:{width:0},animate:{width:"".concat(m.currentStreak/7*100,"%")},transition:{duration:.5},className:"bg-gradient-to-r from-orange-400 to-red-400 h-3 rounded-full"})})]}),(0,$o.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,$o.jsx)("span",{className:"text-gray-600",children:"Longest Streak"}),(0,$o.jsxs)("span",{className:"font-semibold text-gray-800",children:[m.longestStreak," days"]})]})]})]}),d&&(0,$o.jsxs)(Mo.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-strong rounded-2xl p-6 shadow-xl border-2 border-yellow-200 bg-gradient-to-r from-yellow-50 to-orange-50",children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,$o.jsxs)("h2",{className:"text-xl font-bold text-gray-800 flex items-center",children:[(0,$o.jsx)(Ec,{className:"w-6 h-6 mr-2 text-yellow-500"}),"Daily Challenge"]}),d.completedToday&&(0,$o.jsx)(vc,{className:"w-6 h-6 text-green-500"})]}),(0,$o.jsxs)("div",{className:"mb-4",children:[(0,$o.jsx)("div",{className:"text-3xl mb-2",children:d.icon}),(0,$o.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:d.title}),(0,$o.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:d.description}),(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,$o.jsxs)("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-xs font-medium",children:[d.xpReward," XP + 25 Bonus"]}),(0,$o.jsx)("span",{className:"text-xs text-gray-600",children:null!==m&&void 0!==m&&m.streakMultiplier?"+".concat(Math.round((d.xpReward+25)*(m.streakMultiplier-1))," XP"):""})]})]}),(0,$o.jsx)(Qc,{variant:"primary",size:"md",onClick:async()=>{if(!t||!d)return;const e=(new Date).toISOString().split("T")[0];localStorage.setItem("daily-".concat(e,"-").concat(t.id),"completed"),await D(d.id,25),T()},disabled:d.completedToday,className:"w-full",children:d.completedToday?"Completed Today!":"Start Daily Challenge"})]})]}),(0,$o.jsxs)(Mo.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2},className:"glass-strong rounded-2xl p-6 shadow-xl mb-8",children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,$o.jsxs)("h2",{className:"text-xl font-bold text-gray-800 flex items-center",children:[(0,$o.jsx)(hl,{className:"w-6 h-6 mr-2 text-purple-500"}),"Progress to Level ",i+1]}),(0,$o.jsxs)("div",{className:"text-sm text-gray-600",children:[s," / ",100*(i+1)," XP"]})]}),(0,$o.jsx)("div",{className:"relative",children:(0,$o.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-6",children:(0,$o.jsx)(Mo.div,{className:"bg-gradient-to-r from-purple-500 via-pink-500 to-orange-500 h-6 rounded-full relative overflow-hidden",initial:{width:0},animate:{width:"".concat(s/(100*(i+1))*100,"%")},transition:{duration:.5},children:(0,$o.jsx)(Mo.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,ease:"linear"}})})})}),(0,$o.jsxs)("div",{className:"flex justify-between text-xs text-gray-600 mt-2",children:[(0,$o.jsxs)("span",{children:["Level ",i]}),(0,$o.jsxs)("span",{children:["Level ",i+1]})]})]}),(0,$o.jsx)("div",{className:"mb-6",children:(0,$o.jsx)("div",{className:"flex flex-wrap gap-2",children:[{id:"all",label:"All",icon:"\ud83c\udfaf"},{id:"breathing",label:"Breathing",icon:"\ud83e\udec1"},{id:"mindfulness",label:"Mindfulness",icon:"\ud83e\uddd8"},{id:"gratitude",label:"Gratitude",icon:"\ud83d\ude4f"},{id:"journaling",label:"Journaling",icon:"\ud83d\udcdd"},{id:"game",label:"Games",icon:"\ud83c\udfae"}].map(e=>(0,$o.jsxs)("button",{onClick:()=>A(e.id),className:"px-4 py-2 rounded-lg font-medium transition-all ".concat(P===e.id?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg":"bg-white/70 backdrop-blur-sm text-gray-700 hover:bg-white/90"),children:[(0,$o.jsx)("span",{className:"mr-2",children:e.icon}),e.label]},e.id))})}),l.length>0&&(0,$o.jsxs)(Mo.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.3},className:"glass-strong rounded-2xl p-6 shadow-xl mb-8",children:[(0,$o.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[(0,$o.jsx)(Cc,{className:"w-6 h-6 mr-2 text-blue-500"}),"Quest Map"]}),(0,$o.jsx)("div",{className:"h-64 bg-white/30 rounded-xl p-4",children:(0,$o.jsx)(nd,{quests:l.slice(0,6).map((e,t)=>({id:e.id,title:e.title,status:e.status,x:20+t%3*35,y:30+40*Math.floor(t/3)})),onQuestClick:e=>{const t=l.find(t=>t.id===e);"5"===e?v("breathing"):"game"===(null===t||void 0===t?void 0:t.category)?("6"===e&&v("memory"),"7"===e&&v("typeracer"),"8"===e&&v("trivia")):D(e)}})})]}),(0,$o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(0,$o.jsx)(De,{children:_.map((e,t)=>(0,$o.jsxs)(Mo.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{delay:.05*t},whileHover:{scale:1.02,y:-4},className:"\n                  glass-strong rounded-2xl p-6 shadow-xl cursor-pointer transition-all\n                  ".concat("completed"===e.status?"border-2 border-green-400 bg-green-50/50":"","\n                  ").concat("locked"===e.status?"opacity-60":"","\n                "),onClick:()=>{"available"===e.status&&("5"===e.id?v("breathing"):"game"===e.category?("6"===e.id&&v("memory"),"7"===e.id&&v("typeracer"),"8"===e.id&&v("trivia")):D(e.id))},children:[(0,$o.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,$o.jsx)("div",{className:"text-4xl",children:e.icon}),(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[F(e.status),(0,$o.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gradient-to-r ".concat(O(e.difficulty)," text-white"),children:e.difficulty})]})]}),(0,$o.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:e.title}),(0,$o.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:e.description}),(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)(ql,{className:"w-4 h-4 text-yellow-500"}),(0,$o.jsxs)("span",{className:"font-semibold text-gray-800",children:[e.xpReward," XP"]}),m&&m.streakMultiplier>1&&(0,$o.jsxs)("span",{className:"text-xs text-orange-600",children:["+",Math.round(e.xpReward*(m.streakMultiplier-1))]})]}),e.duration&&(0,$o.jsxs)("div",{className:"flex items-center space-x-1 text-xs text-gray-600",children:[(0,$o.jsx)(Ec,{className:"w-3 h-3"}),(0,$o.jsxs)("span",{children:[e.duration," min"]})]})]})]},e.id))})}),(0,$o.jsxs)(Mo.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.4},className:"mt-8 glass-strong rounded-2xl p-6 shadow-xl",children:[(0,$o.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[(0,$o.jsx)(Cc,{className:"w-6 h-6 mr-2 text-green-500"}),"Your Growth Graph"]}),(0,$o.jsx)("div",{className:"h-48 flex items-end justify-between space-x-2",children:[...Array(7)].map((e,t)=>{const n=Math.floor(200*Math.random())+50;return(0,$o.jsxs)("div",{className:"flex-1 flex flex-col items-center",children:[(0,$o.jsx)(Mo.div,{initial:{height:0},animate:{height:"".concat(n/200*100,"%")},transition:{delay:.1*t,duration:.5},className:"w-full bg-gradient-to-t from-purple-400 to-pink-400 rounded-t",style:{minHeight:"4px"}}),(0,$o.jsx)("span",{className:"text-xs text-gray-600 mt-2",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][t]})]},t)})})]})]}),(0,$o.jsxs)(De,{children:["breathing"===y&&(0,$o.jsx)(fd,{onClose:()=>v(null),onComplete:e=>I("breathing",e)}),"memory"===y&&(0,$o.jsx)(Mo.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,$o.jsxs)(Mo.div,{className:"bg-white rounded-3xl max-w-4xl w-full p-6",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[(0,$o.jsx)(ld,{onComplete:e=>I("memory",e)}),(0,$o.jsx)("div",{className:"mt-4 text-center",children:(0,$o.jsx)(Qc,{onClick:()=>v(null),children:"Close"})})]})}),"typeracer"===y&&(0,$o.jsx)(Mo.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,$o.jsxs)(Mo.div,{className:"bg-white rounded-3xl max-w-4xl w-full p-6",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[(0,$o.jsx)(dd,{onComplete:e=>I("typeracer",e)}),(0,$o.jsx)("div",{className:"mt-4 text-center",children:(0,$o.jsx)(Qc,{onClick:()=>v(null),children:"Close"})})]})}),"trivia"===y&&(0,$o.jsx)(Mo.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,$o.jsxs)(Mo.div,{className:"bg-white rounded-3xl max-w-4xl w-full p-6",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[(0,$o.jsx)(hd,{onComplete:e=>I("trivia",e)}),(0,$o.jsx)("div",{className:"mt-4 text-center",children:(0,$o.jsx)(Qc,{onClick:()=>v(null),children:"Close"})})]})})]}),(0,$o.jsx)(De,{children:p&&(0,$o.jsx)(Mo.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,$o.jsxs)(Mo.div,{className:"bg-white rounded-3xl max-w-4xl w-full p-6 max-h-[90vh] overflow-y-auto",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,$o.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[(0,$o.jsx)(Xc,{className:"w-6 h-6 mr-2 text-pink-500"}),"Reward Store"]}),(0,$o.jsx)("button",{onClick:()=>f(!1),className:"text-gray-500 hover:text-gray-700",children:"\u2715"})]}),(0,$o.jsxs)("div",{className:"mb-4 text-center",children:[(0,$o.jsxs)("div",{className:"text-3xl font-bold text-purple-600",children:[s," XP"]}),(0,$o.jsx)("div",{className:"text-sm text-gray-600",children:"Available"})]}),(0,$o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:b.map(e=>(0,$o.jsxs)(Mo.div,{className:"p-4 rounded-xl border-2 transition-all ".concat(e.unlocked?"bg-green-50 border-green-400":e.cost<=s?"bg-white/70 backdrop-blur-sm border-purple-200 hover:border-purple-400 cursor-pointer":"bg-gray-50 border-gray-300 opacity-60"),whileHover:!e.unlocked&&e.cost<=s?{scale:1.02}:{},onClick:()=>!e.unlocked&&e.cost<=s&&(async e=>{if(!t)return;const n=await rd.purchaseReward(t.id,e,s);n.success?(await o({id:"purchase-".concat(Date.now()),type:"game",xp:-rd.getRewards().find(t=>t.id===e).cost,description:"Purchased reward",timestamp:new Date}),L(),alert(n.message)):alert(n.message)})(e.id),children:[(0,$o.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,$o.jsx)("div",{className:"text-3xl",children:e.icon}),e.unlocked&&(0,$o.jsx)(vc,{className:"w-5 h-5 text-green-500"})]}),(0,$o.jsx)("h3",{className:"font-semibold text-gray-800 mb-1",children:e.title}),(0,$o.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsxs)("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:[e.cost," XP"]}),(0,$o.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat("legendary"===e.rarity?"bg-yellow-100 text-yellow-700":"epic"===e.rarity?"bg-purple-100 text-purple-700":"rare"===e.rarity?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:e.rarity})]})]},e.id))})]})})}),(0,$o.jsx)(De,{children:g&&(0,$o.jsx)(Mo.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,$o.jsxs)(Mo.div,{className:"bg-white rounded-3xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,$o.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[(0,$o.jsx)(rc,{className:"w-6 h-6 mr-2 text-yellow-500"}),"Weekly Leaderboard"]}),(0,$o.jsx)("button",{onClick:()=>x(!1),className:"text-gray-500 hover:text-gray-700",children:"\u2715"})]}),(0,$o.jsx)("div",{className:"space-y-3",children:j.map((e,t)=>(0,$o.jsx)(Mo.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"p-4 rounded-xl ".concat(1===e.rank?"bg-gradient-to-r from-yellow-50 to-orange-50 border-2 border-yellow-300":2===e.rank?"bg-gradient-to-r from-gray-50 to-blue-50 border-2 border-gray-300":3===e.rank?"bg-gradient-to-r from-orange-50 to-yellow-50 border-2 border-orange-300":"bg-white/70 backdrop-blur-sm border border-gray-200"),children:(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,$o.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-bold text-white ".concat(1===e.rank?"bg-gradient-to-r from-yellow-400 to-orange-400":2===e.rank?"bg-gradient-to-r from-gray-400 to-gray-500":3===e.rank?"bg-gradient-to-r from-orange-400 to-yellow-400":"bg-gradient-to-r from-purple-400 to-pink-400"),children:e.rank<=3?(0,$o.jsx)(rc,{className:"w-6 h-6"}):e.rank}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("div",{className:"font-semibold text-gray-800",children:e.nickname}),(0,$o.jsxs)("div",{className:"text-xs text-gray-600",children:["Level ",e.avatarLevel," \u2022 ",e.streak," day streak"]})]})]}),(0,$o.jsxs)("div",{className:"text-right",children:[(0,$o.jsxs)("div",{className:"font-bold text-purple-600",children:[e.weeklyXP," XP"]}),(0,$o.jsx)("div",{className:"text-xs text-gray-600",children:"This Week"})]})]})},e.userId))})]})})}),(0,$o.jsx)(De,{children:C&&(0,$o.jsx)(Mo.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,$o.jsxs)(Mo.div,{className:"text-center",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},transition:{type:"spring",stiffness:200},children:[(0,$o.jsx)("div",{className:"text-8xl mb-4",children:"\ud83c\udf89"}),(0,$o.jsx)("h2",{className:"text-4xl font-bold text-white mb-2",children:"Level Up!"}),(0,$o.jsxs)("p",{className:"text-xl text-white",children:["You reached Level ",i,"!"]}),[...Array(20)].map((e,t)=>{const n=t/20*Math.PI*2;return(0,$o.jsx)(Mo.div,{className:"absolute w-4 h-4 bg-yellow-300 rounded-full",style:{left:"50%",top:"50%"},initial:{scale:0,opacity:1},animate:{x:150*Math.cos(n),y:150*Math.sin(n),scale:[0,1,0],opacity:[1,1,0]},transition:{duration:2,delay:.1*t,ease:"easeOut"}},t)})]})})}),(0,$o.jsx)(td,{xp:k.xp,show:k.show,onComplete:()=>S({show:!1,xp:0}),position:{x:50,y:20}})]})}const xd=ll("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),yd=ll("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);const vd=new class{async generateWellnessInsights(e,t){try{const e=[],a={},r=[];for(const n of t)if(n.content||n.text){const t=n.content||n.text;r.push(t);const s=await jl.analyzeSentiment(t);e.push(s.score);(await jl.analyzeEmotionalTone(t)).emotions.forEach(e=>{a[e.emotion]=(a[e.emotion]||0)+e.intensity})}const s=e.length>0?e.reduce((e,t)=>e+t,0)/e.length:0,i=Object.entries(a).map(e=>{let[n,a]=e;return{emotion:n,intensity:a/t.length}}).sort((e,t)=>t.intensity-e.intensity).slice(0,5),o="You are a compassionate wellness coach. Analyze the user's recent activities and provide:\n\n1. A brief wellness summary (2-3 sentences)\n2. Key trends noticed (3-5 trends as bullet points)\n3. Personalized recommendations (2-3 actionable recommendations)\n\nUser's recent activities:\n".concat(r.slice(0,10).join("\n"),"\n\nOverall sentiment: ").concat(s>.3?"Positive":s<-.3?"Negative":"Neutral","\nKey emotions: ").concat(i.map(e=>e.emotion).join(", "),'\n\nFormat your response as JSON:\n{\n  "summary": "summary text here",\n  "trends": ["trend1", "trend2", "trend3"],\n  "recommendations": ["rec1", "rec2", "rec3"]\n}'),l=await bl.vertexAIService.generateResponse([{role:"user",parts:[{text:o}]}]);let c;try{const e=l.match(/\{[\s\S]*\}/);if(!e)throw new Error("No JSON found");c=JSON.parse(e[0])}catch(n){c={summary:l.substring(0,200),trends:["Wellness patterns emerging","Growth in activities"],recommendations:["Continue daily practices","Try new activities"]}}return{summary:c.summary,trends:c.trends,recommendations:c.recommendations,sentiment:s,emotions:i,timestamp:new Date}}catch(a){return console.error("Error generating wellness insights:",a),{summary:"Your wellness journey is showing progress. Keep engaging with activities that support your growth.",trends:["Consistent engagement","Positive momentum"],recommendations:["Continue your practices","Explore new activities"],sentiment:0,emotions:[],timestamp:new Date}}}async processVoiceJournal(e){try{const t=await Cl.startListening(),n=await jl.analyzeSentiment(t),a=await jl.analyzeEmotionalTone(t),r='Summarize this voice journal entry in a supportive, concise way (1-2 sentences):\n\n"'.concat(t,'"\n\nProvide a brief, empathetic summary:'),s=await bl.vertexAIService.generateResponse([{role:"user",parts:[{text:r}]}]),i={userId:e,transcript:t,summary:s,sentiment:n.score,emotion:a.primaryEmotion,timestamp:new Date},o=new Blob([JSON.stringify(i,null,2)],{type:"application/json"});return await Nl.P.uploadAudio(o,e,"recording","voice-journal-".concat(Date.now(),".json")),{transcript:t,summary:s,sentiment:n.score,emotion:a.primaryEmotion}}catch(t){throw console.error("Error processing voice journal:",t),t}}async calculateEmotionTrends(e,t){try{const e=[];for(const n of t)if(n.content||n.text){const t=n.content||n.text,a=await jl.analyzeSentiment(t),r=await jl.analyzeEmotionalTone(t);e.push({date:n.timestamp||new Date,sentiment:a.score,emotions:r.emotions})}return e.sort((e,t)=>e.date.getTime()-t.date.getTime())}catch(n){return console.error("Error calculating emotion trends:",n),[]}}checkMilestones(e,t,n){const a=[];return t>=5&&!a.find(e=>"level_5"===e.id)&&a.push({id:"level_5",title:"Rising Star",description:"Reached Level 5!",icon:"\u2b50",unlockedAt:new Date,type:"level"}),t>=10&&!a.find(e=>"level_10"===e.id)&&a.push({id:"level_10",title:"Champion",description:"Reached Level 10!",icon:"\ud83d\udc51",unlockedAt:new Date,type:"level"}),n>=7&&!a.find(e=>"streak_7"===e.id)&&a.push({id:"streak_7",title:"Week Warrior",description:"7-day streak!",icon:"\ud83d\udd25",unlockedAt:new Date,type:"streak"}),n>=30&&!a.find(e=>"streak_30"===e.id)&&a.push({id:"streak_30",title:"Month Master",description:"30-day streak!",icon:"\ud83d\udcaa",unlockedAt:new Date,type:"streak"}),e.length>=50&&a.push({id:"activities_50",title:"Active Explorer",description:"50 activities completed!",icon:"\ud83c\udfaf",unlockedAt:new Date,type:"activity"}),a}};function bd(e){let{progress:t,size:n=120,strokeWidth:a=8,color:s="#FF8FA3",icon:i,label:o,showPercentage:l=!0,className:c=""}=e;const d=(n-a)/2,u=2*Math.PI*d,m=u-t/100*u;return(0,$o.jsxs)("div",{className:"relative ".concat(c),style:{width:n,height:n},children:[(0,$o.jsxs)("svg",{width:n,height:n,className:"transform -rotate-90",children:[(0,$o.jsx)("circle",{cx:n/2,cy:n/2,r:d,fill:"none",stroke:"rgba(0, 0, 0, 0.1)",strokeWidth:a}),(0,$o.jsx)(Mo.circle,{cx:n/2,cy:n/2,r:d,fill:"none",stroke:s,strokeWidth:a,strokeLinecap:"round",strokeDasharray:u,strokeDashoffset:m,initial:{strokeDashoffset:u},animate:{strokeDashoffset:m},transition:{duration:1,ease:"easeOut"}})]}),(0,$o.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[i&&(0,$o.jsx)(Mo.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring"},style:{color:s},children:r.isValidElement(i)?i:"function"===typeof i?r.createElement(i,{className:"w-6 h-6",style:{color:s}}):i}),l&&(0,$o.jsxs)(Mo.div,{className:"text-lg font-bold",style:{color:s},initial:{scale:0},animate:{scale:1},transition:{delay:.4,type:"spring"},children:[Math.round(t),"%"]}),o&&(0,$o.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:o})]})]})}const wd=ll("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),jd=ll("Meh",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"8",x2:"16",y1:"15",y2:"15",key:"1xb1d9"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),Nd=ll("Frown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);function kd(e){let{mood:t,intensity:n,size:a=200,className:r=""}=e;const s=180*(n-.5),i={positive:{icon:wd,color:"#FFB88C",emoji:"\ud83d\ude0a"},neutral:{icon:jd,color:"#B19CD9",emoji:"\ud83d\ude10"},negative:{icon:Nd,color:"#87CEEB",emoji:"\ud83d\ude14"}}[t];return(0,$o.jsxs)("div",{className:"relative ".concat(r),style:{width:a,height:a/2},children:[(0,$o.jsx)("svg",{width:a,height:a/2,className:"absolute inset-0",children:(0,$o.jsx)("path",{d:"M ".concat(.1*a," ").concat(.4*a," A ").concat(.4*a," ").concat(.4*a," 0 0 1 ").concat(.9*a," ").concat(.4*a),fill:"none",stroke:"rgba(0, 0, 0, 0.1)",strokeWidth:"8"})}),(0,$o.jsx)(Mo.svg,{width:a,height:a/2,className:"absolute inset-0",initial:{opacity:0},animate:{opacity:1},children:(0,$o.jsx)(Mo.path,{d:"M ".concat(.1*a," ").concat(.4*a," A ").concat(.4*a," ").concat(.4*a," 0 ").concat(s>0?"1":"0"," 1 ").concat(.5*a+.4*a*Math.cos(s*Math.PI/180)," ").concat(.4*a-.4*a*Math.sin(s*Math.PI/180)),fill:"none",stroke:i.color,strokeWidth:"8",strokeLinecap:"round",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1}})}),(0,$o.jsxs)(Mo.div,{className:"absolute",style:{left:a/2,top:.4*a,transformOrigin:"bottom center"},initial:{rotate:-90},animate:{rotate:-90+s},transition:{duration:1,type:"spring",stiffness:100},children:[(0,$o.jsx)("div",{className:"w-1 bg-gray-800 rounded-full",style:{height:.35*a,transformOrigin:"bottom center"}}),(0,$o.jsx)("div",{className:"absolute -bottom-2 -left-3 w-8 h-8 rounded-full bg-gray-800 border-2 border-white",style:{background:i.color},children:(0,$o.jsx)("div",{className:"flex items-center justify-center h-full text-xl",children:i.emoji})})]}),(0,$o.jsx)("div",{className:"absolute -bottom-6 left-2 text-xs text-gray-600",children:"Low"}),(0,$o.jsx)("div",{className:"absolute -bottom-6 right-2 text-xs text-gray-600",children:"High"})]})}const Sd=[{id:"1",date:new Date,mood:"sunny",note:"Had a great day!",activities:["gratitude","exercise"]},{id:"2",date:new Date(Date.now()-864e5),mood:"partly-cloudy",note:"Feeling okay",activities:["journaling"]},{id:"3",date:new Date(Date.now()-1728e5),mood:"cloudy",note:"A bit stressed",activities:["breathing"]},{id:"4",date:new Date(Date.now()-2592e5),mood:"sunny",note:"Good mood today",activities:["gratitude","meditation"]},{id:"5",date:new Date(Date.now()-3456e5),mood:"rainy",note:"Tough day",activities:["self-care"]},{id:"6",date:new Date(Date.now()-432e6),mood:"partly-cloudy",note:"Mixed feelings",activities:["journaling","breathing"]},{id:"7",date:new Date(Date.now()-5184e5),mood:"sunny",note:"Feeling positive",activities:["gratitude","exercise","meditation"]}],Cd=[{name:"Resilience",value:75,max:100,color:"from-red-500 to-pink-500",icon:(0,$o.jsx)(Fl,{className:"w-5 h-5"})},{name:"Mindfulness",value:60,max:100,color:"from-blue-500 to-indigo-500",icon:(0,$o.jsx)(cl,{className:"w-5 h-5"})},{name:"Connection",value:80,max:100,color:"from-green-500 to-teal-500",icon:(0,$o.jsx)(Yl,{className:"w-5 h-5"})},{name:"Creativity",value:45,max:100,color:"from-purple-500 to-pink-500",icon:(0,$o.jsx)($l,{className:"w-5 h-5"})}],Ed=[{id:"1",title:"First Steps",description:"Completed your first wellness challenge",icon:"\ud83c\udf1f",unlockedAt:new Date(Date.now()-864e6),rarity:"common"},{id:"2",title:"Week Warrior",description:"Maintained a 7-day streak",icon:"\ud83d\udd25",unlockedAt:new Date(Date.now()-432e6),rarity:"rare"},{id:"3",title:"Storyteller",description:"Shared 10 stories with the community",icon:"\ud83d\udcd6",unlockedAt:new Date(Date.now()-2592e5),rarity:"epic"},{id:"4",title:"Garden Keeper",description:"Grew 50 plants in your garden",icon:"\ud83c\udf31",unlockedAt:new Date(Date.now()-864e5),rarity:"legendary"}],Pd={sunny:"\u2600\ufe0f",cloudy:"\u2601\ufe0f",stormy:"\u26c8\ufe0f",rainy:"\ud83c\udf27\ufe0f","partly-cloudy":"\u26c5"},Ad={sunny:"from-yellow-400 to-orange-500",cloudy:"from-gray-400 to-gray-500",stormy:"from-gray-600 to-gray-700",rainy:"from-blue-400 to-blue-500","partly-cloudy":"from-blue-300 to-gray-400"},Td={common:"from-gray-400 to-gray-500",rare:"from-blue-400 to-blue-500",epic:"from-purple-400 to-purple-500",legendary:"from-yellow-400 to-orange-500"};function Md(e){var t;let{user:n,onBack:a}=e;const{setUser:s}=Xo(),[i,o]=(0,r.useState)(Sd),[l,c]=(0,r.useState)(Cd),[d,u]=(0,r.useState)(Ed),[m,h]=(0,r.useState)("week"),[p,f]=(0,r.useState)((null===n||void 0===n?void 0:n.avatarLevel)||5),[g,x]=(0,r.useState)((null===n||void 0===n?void 0:n.xp)||1250),[y,v]=(0,r.useState)(null),[b,w]=(0,r.useState)([]),[j,N]=(0,r.useState)([]),[k,S]=(0,r.useState)(!1),[C,E]=(0,r.useState)(!1),[P,A]=(0,r.useState)(null),T=()=>{let e=0;for(let t=0;t<i.length&&i[t].activities.length>0;t++)e++;return e},M=()=>{const e=100*p,t=(g-e)/(100*(p+1)-e)*100;return Math.max(0,Math.min(100,t))};(0,r.useEffect)(()=>{n&&(L(),R(),D())},[n,i]);const L=async()=>{if(n){E(!0);try{const e=i.map(e=>({content:e.activities.join(" "),timestamp:e.date})),t=await vd.generateWellnessInsights(n.id,e);v(t)}catch(e){console.error("Error loading wellness insights:",e)}finally{E(!1)}}},R=async()=>{if(n)try{const e=i.map(e=>({text:e.activities.join(" "),timestamp:e.date})),t=await vd.calculateEmotionTrends(n.id,e);w(t)}catch(e){console.error("Error loading emotion trends:",e)}},D=()=>{if(!n)return;const e=i.map(e=>e.activities).flat(),t=T(),a=n.avatarLevel||p,r=vd.checkMilestones(e,a,t);N(r)},{mood:I,intensity:_}=Qo(),[O,F]=(0,r.useState)(!1);return(0,$o.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 relative overflow-hidden",children:[(0,$o.jsx)(Rc,{particleCount:25,className:"opacity-40"}),(0,$o.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200 p-4",children:(0,$o.jsxs)("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,$o.jsx)("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:"\u2190"}),(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("h1",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[(0,$o.jsx)(Cc,{className:"w-6 h-6 mr-2 text-blue-500"}),"The Growth Observatory"]}),(0,$o.jsx)("p",{className:"text-gray-600",children:"Track your wellness journey"})]})]}),(0,$o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,$o.jsxs)("div",{className:"text-right",children:[(0,$o.jsxs)("div",{className:"text-sm text-gray-600",children:["Level ",p]}),(0,$o.jsxs)("div",{className:"text-lg font-bold text-blue-600",children:[g," XP"]})]}),(0,$o.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-lg",children:p})]})]})}),(0,$o.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[y&&(0,$o.jsxs)(Mo.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl shadow-lg p-6 border-2 border-blue-200",children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,$o.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[(0,$o.jsx)(cl,{className:"w-6 h-6 mr-2 text-blue-500"}),"AI Wellness Insights",(0,$o.jsx)("span",{className:"ml-2 text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded-full",children:"Powered by Google Cloud AI"})]}),C&&(0,$o.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,$o.jsx)(Mo.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full mr-2"}),"Analyzing..."]})]}),(0,$o.jsxs)("div",{className:"space-y-4",children:[(0,$o.jsxs)("div",{className:"bg-white rounded-xl p-4",children:[(0,$o.jsxs)("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center",children:[(0,$o.jsx)(pl,{className:"w-4 h-4 mr-2 text-purple-500"}),"Summary"]}),(0,$o.jsx)("p",{className:"text-sm text-gray-700",children:y.summary})]}),y.trends&&y.trends.length>0&&(0,$o.jsxs)("div",{className:"bg-white rounded-xl p-4",children:[(0,$o.jsxs)("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center",children:[(0,$o.jsx)(hl,{className:"w-4 h-4 mr-2 text-green-500"}),"Key Trends"]}),(0,$o.jsx)("ul",{className:"space-y-1",children:y.trends.map((e,t)=>(0,$o.jsxs)("li",{className:"text-sm text-gray-700 flex items-start",children:[(0,$o.jsx)("span",{className:"text-green-500 mr-2",children:"\u2022"}),e]},t))})]}),y.recommendations&&y.recommendations.length>0&&(0,$o.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 border border-purple-200",children:[(0,$o.jsxs)("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center",children:[(0,$o.jsx)(Ol,{className:"w-4 h-4 mr-2 text-pink-500"}),"Personalized Recommendations"]}),(0,$o.jsx)("ul",{className:"space-y-2",children:y.recommendations.map((e,t)=>(0,$o.jsxs)("li",{className:"text-sm text-gray-700 flex items-start",children:[(0,$o.jsx)("span",{className:"text-pink-500 mr-2",children:"\u2728"}),e]},t))})]}),(0,$o.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,$o.jsxs)("div",{className:"bg-white rounded-xl p-4",children:[(0,$o.jsx)("h3",{className:"text-xs font-medium text-gray-600 mb-2",children:"Overall Sentiment"}),(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:(0,$o.jsx)(Mo.div,{initial:{width:0},animate:{width:"".concat(50*(y.sentiment+1),"%")},transition:{duration:.5},className:"h-2 rounded-full ".concat(y.sentiment>.3?"bg-green-500":y.sentiment<-.3?"bg-red-500":"bg-gray-500")})}),(0,$o.jsx)("span",{className:"text-xs font-semibold ".concat(y.sentiment>.3?"text-green-600":y.sentiment<-.3?"text-red-600":"text-gray-600"),children:y.sentiment>.3?"Positive":y.sentiment<-.3?"Negative":"Neutral"})]})]}),y.emotions&&y.emotions.length>0&&(0,$o.jsxs)("div",{className:"bg-white rounded-xl p-4",children:[(0,$o.jsx)("h3",{className:"text-xs font-medium text-gray-600 mb-2",children:"Top Emotions"}),(0,$o.jsx)("div",{className:"flex flex-wrap gap-1",children:y.emotions.slice(0,3).map((e,t)=>(0,$o.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:e.emotion},t))})]})]})]})]}),(0,$o.jsx)("div",{className:"mb-6 flex justify-end",children:(0,$o.jsx)("button",{onClick:async()=>{if(n){S(!0);try{const e=await vd.processVoiceJournal(n.id);A(e);const t=await Zo.xpService.addXP(n.id,n.xp||0,{id:"voice-journal-".concat(Date.now()),type:"journal",xp:15,description:"Voice journal entry"});s&&s((0,Ie.A)((0,Ie.A)({},n),{},{xp:t.newXP,avatarLevel:t.newLevel})),await L()}catch(e){console.error("Error with voice journal:",e)}finally{S(!1)}}},disabled:k,className:"px-4 py-2 rounded-lg font-medium transition-colors flex items-center space-x-2 ".concat(k?"bg-red-100 text-red-600 animate-pulse":"bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:from-purple-600 hover:to-pink-600"),children:k?(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsx)(xl,{className:"w-4 h-4"}),(0,$o.jsx)("span",{children:"Recording..."})]}):(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsx)(yl,{className:"w-4 h-4"}),(0,$o.jsx)("span",{children:"Voice Journal Entry"})]})})}),P&&(0,$o.jsxs)(Mo.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6 bg-white rounded-xl shadow-lg p-4 border-2 border-purple-200",children:[(0,$o.jsxs)("div",{className:"flex items-center mb-3",children:[(0,$o.jsx)(xd,{className:"w-5 h-5 text-purple-500 mr-2"}),(0,$o.jsx)("h3",{className:"font-semibold text-gray-800",children:"Latest Voice Journal"})]}),(0,$o.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:P.summary}),(0,$o.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-600",children:[(0,$o.jsxs)("span",{children:["Sentiment: ",P.sentiment>0?"Positive":"Neutral"]}),(0,$o.jsxs)("span",{children:["Emotion: ",P.emotion]})]})]}),j.length>0&&(0,$o.jsxs)(Mo.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,$o.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center",children:[(0,$o.jsx)(Xc,{className:"w-6 h-6 mr-2 text-yellow-500"}),"Recent Milestones"]}),(0,$o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:j.map((e,t)=>(0,$o.jsxs)(Mo.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.1*t},className:"bg-gradient-to-r from-yellow-50 to-orange-50 rounded-xl shadow-lg p-4 border-2 border-yellow-200",children:[(0,$o.jsx)("div",{className:"text-3xl mb-2",children:e.icon}),(0,$o.jsx)("h3",{className:"font-semibold text-gray-800 mb-1",children:e.title}),(0,$o.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]},e.id))})]}),b.length>0&&(0,$o.jsxs)(Mo.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8 bg-white rounded-2xl shadow-lg p-6",children:[(0,$o.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center",children:[(0,$o.jsx)(yd,{className:"w-6 h-6 mr-2 text-blue-500"}),"Emotion Trends Over Time"]}),(0,$o.jsx)("div",{className:"h-64 flex items-end justify-between space-x-2",children:b.slice(-14).map((e,t)=>(0,$o.jsxs)("div",{className:"flex-1 flex flex-col items-center",children:[(0,$o.jsx)(Mo.div,{initial:{height:0},animate:{height:"".concat(50*(e.sentiment+1),"%")},transition:{delay:.05*t,duration:.5},className:"w-full rounded-t ".concat(e.sentiment>.3?"bg-green-400":e.sentiment<-.3?"bg-red-400":"bg-gray-400"),style:{minHeight:"4px"}}),(0,$o.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:e.date.toLocaleDateString("en",{month:"short",day:"numeric"})})]},t))})]}),(0,$o.jsx)("div",{className:"mb-6",children:(0,$o.jsx)("div",{className:"flex space-x-1 bg-white rounded-lg p-1 shadow-sm",children:[{id:"week",label:"This Week"},{id:"month",label:"This Month"},{id:"year",label:"This Year"}].map(e=>(0,$o.jsx)("button",{onClick:()=>h(e.id),className:"px-4 py-2 rounded-md transition-colors ".concat(m===e.id?"bg-blue-500 text-white":"text-gray-600 hover:bg-gray-100"),children:e.label},e.id))})}),(0,$o.jsx)("div",{className:"mb-8",children:(0,$o.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,$o.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Level Progress"}),(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)(Zl,{className:"w-5 h-5 text-yellow-500"}),(0,$o.jsxs)("span",{className:"text-sm text-gray-600",children:["Level ",p," \u2192 ",p+1]})]})]}),(0,$o.jsxs)("div",{className:"relative",children:[(0,$o.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-4",children:(0,$o.jsx)(Mo.div,{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-4 rounded-full",initial:{width:0},animate:{width:"".concat(M(),"%")},transition:{duration:1,ease:"easeOut"}})}),(0,$o.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,$o.jsxs)("span",{className:"text-sm font-medium text-white",children:[Math.round(M()),"%"]})})]}),(0,$o.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mt-2",children:[(0,$o.jsxs)("span",{children:[g," XP"]}),(0,$o.jsxs)("span",{children:[100*(p+1)," XP"]})]})]})}),(0,$o.jsxs)("div",{className:"mb-8",children:[(0,$o.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Wellness Stats"}),(0,$o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:l.map((e,t)=>(0,$o.jsx)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"glass-strong rounded-xl shadow-xl p-6 text-center hover:shadow-2xl transition-shadow",children:(0,$o.jsx)(bd,{progress:e.value/e.max*100,size:100,color:e.color.includes("red")?"#EF4444":e.color.includes("blue")?"#3B82F6":e.color.includes("green")?"#10B981":"#8B5CF6",icon:e.icon,label:e.name,showPercentage:!0})},e.name))})]}),(0,$o.jsx)("div",{className:"mb-8 flex justify-center",children:(0,$o.jsxs)("div",{className:"glass-strong rounded-2xl p-6 shadow-xl",children:[(0,$o.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 text-center",children:"Current Mood Intensity"}),(0,$o.jsx)(kd,{mood:"positive",intensity:_,size:250})]})}),(0,$o.jsxs)("div",{className:"mb-8",children:[(0,$o.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Mood Tracker"}),(0,$o.jsxs)("div",{className:"glass-strong rounded-2xl shadow-xl p-6",children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)(Mo.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:(0,$o.jsx)("span",{className:"text-3xl",children:Pd[(null===(t=i[0])||void 0===t?void 0:t.mood)||"sunny"]})}),(0,$o.jsx)("span",{className:"text-lg font-medium",children:"Today's Mood"})]}),(0,$o.jsxs)("div",{className:"text-right",children:[(0,$o.jsx)("div",{className:"text-sm text-gray-600",children:"Average Mood"}),(0,$o.jsxs)(Mo.div,{className:"text-lg font-bold text-blue-600",initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring"},children:[(()=>{const e=i.slice(0,7).map(e=>{switch(e.mood){case"sunny":return 5;case"partly-cloudy":return 4;case"cloudy":default:return 3;case"rainy":return 2;case"stormy":return 1}});return e.reduce((e,t)=>e+t,0)/e.length})().toFixed(1),"/5"]})]})]}),(0,$o.jsx)("div",{className:"grid grid-cols-7 gap-2",children:i.slice(0,7).map((e,t)=>(0,$o.jsxs)(Mo.button,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},transition:{delay:.1*t,type:"spring"},whileHover:{scale:1.1,y:-5},whileTap:{scale:.95},className:"text-center group",children:[(0,$o.jsx)("div",{className:"w-14 h-14 bg-gradient-to-r ".concat(Ad[e.mood]," rounded-full flex items-center justify-center text-white text-xl mx-auto mb-2 shadow-lg group-hover:shadow-xl transition-shadow"),children:Pd[e.mood]}),(0,$o.jsx)("div",{className:"text-xs text-gray-600 font-medium",children:e.date.toLocaleDateString("en",{weekday:"short"})})]},e.id))})]})]}),(0,$o.jsxs)("div",{className:"mb-8",children:[(0,$o.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Achievements"}),(0,$o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:d.map((e,t)=>(0,$o.jsx)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-white rounded-xl shadow-lg p-4 hover:shadow-xl transition-shadow duration-300",children:(0,$o.jsxs)("div",{className:"text-center",children:[(0,$o.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r ".concat(Td[e.rarity]," rounded-full flex items-center justify-center text-white text-2xl mx-auto mb-3"),children:e.icon}),(0,$o.jsx)("h3",{className:"font-semibold text-gray-800 mb-1",children:e.title}),(0,$o.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,$o.jsx)("div",{className:"text-xs text-gray-500",children:e.unlockedAt.toLocaleDateString()})]})},e.id))})]}),(0,$o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[(0,$o.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-4",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:(0,$o.jsx)($c,{className:"w-5 h-5 text-orange-600"})}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:T()}),(0,$o.jsx)("div",{className:"text-sm text-gray-600",children:"Day Streak"})]})]})}),(0,$o.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-4",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:(0,$o.jsx)(ql,{className:"w-5 h-5 text-green-600"})}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:i.reduce((e,t)=>e+10*t.activities.length,0)}),(0,$o.jsx)("div",{className:"text-sm text-gray-600",children:"Total XP"})]})]})}),(0,$o.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-4",children:(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:(0,$o.jsx)(rc,{className:"w-5 h-5 text-purple-600"})}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:d.length}),(0,$o.jsx)("div",{className:"text-sm text-gray-600",children:"Achievements"})]})]})})]}),(0,$o.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,$o.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,$o.jsx)(Ol,{className:"w-5 h-5 mr-2 text-pink-500"}),"Recent Reflections"]}),(0,$o.jsx)("div",{className:"space-y-3",children:i.slice(0,3).map((e,t)=>(0,$o.jsxs)(Mo.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,$o.jsx)("span",{className:"text-xl",children:Pd[e.mood]}),(0,$o.jsxs)("div",{className:"flex-1",children:[(0,$o.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:e.date.toLocaleDateString()}),e.note&&(0,$o.jsx)("p",{className:"text-gray-800 text-sm",children:e.note}),(0,$o.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:e.activities.map((e,t)=>(0,$o.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:e},t))})]})]},e.id))})]})]}),(0,$o.jsx)(Hc,{trigger:O,onComplete:()=>F(!1)})]})}const Ld=ll("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Rd=ll("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),Dd=ll("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const Id=new class{async getRecommendations(e,t,n){try{const e="Based on the user's mood and recent activities, recommend the most relevant wellness resources.\n\nUser mood: ".concat(t||"neutral","\nRecent activities: ").concat((null===n||void 0===n?void 0:n.join(", "))||"none",'\n\nRecommend 3-5 specific resources that would be most helpful. Format as JSON:\n{\n  "resources": [\n    {\n      "title": "Resource title",\n      "description": "Brief description",\n      "type": "guide|audio|tool|education",\n      "category": "mindfulness|breathing|crisis|tools",\n      "relevance": 0.9\n    }\n  ]\n}'),r=await bl.vertexAIService.generateResponse([{role:"user",parts:[{text:e}]}]);let s;try{const e=r.match(/\{[\s\S]*\}/);if(!e)throw new Error("No JSON found");s=JSON.parse(e[0])}catch(a){s={resources:[{id:"1",title:"Daily Breathing Exercise",description:"A 5-minute guided breathing exercise to help you feel calm",type:"audio",category:"breathing",relevance:.8,icon:"\ud83e\udec1",color:"from-blue-500 to-indigo-500",isBookmarked:!1},{id:"2",title:"Mindfulness Guide",description:"Learn techniques for staying present and reducing stress",type:"guide",category:"mindfulness",relevance:.7,icon:"\ud83e\udde0",color:"from-purple-500 to-pink-500",isBookmarked:!1}]}}return s.resources}catch(r){return console.error("Error getting recommendations:",r),[]}}async generateDailyDose(e,t){try{const e="Generate a daily wellness dose - a short, encouraging message (affirmation, tip, quote, or exercise) that will help the user feel supported today.\n\nUser mood: ".concat(t||"neutral",'\n\nProvide one of:\n1. A positive affirmation (1-2 sentences)\n2. A practical wellness tip (1-2 sentences)\n3. An inspiring quote (with attribution if possible)\n4. A quick exercise suggestion (1-2 sentences)\n\nFormat as JSON:\n{\n  "title": "Short title",\n  "content": "The message content",\n  "type": "affirmation|tip|quote|exercise"\n}'),a=await bl.vertexAIService.generateResponse([{role:"user",parts:[{text:e}]}]);let r;try{const e=a.match(/\{[\s\S]*\}/);if(!e)throw new Error("No JSON found");r=JSON.parse(e[0])}catch(n){r={title:"Daily Wellness Reminder",content:"You are doing your best, and that is enough. Take a moment to breathe and appreciate your progress.",type:"affirmation"}}return{id:"dose-".concat(Date.now()),title:r.title,content:r.content,type:r.type,timestamp:new Date}}catch(a){return console.error("Error generating daily dose:",a),{id:"dose-".concat(Date.now()),title:"Daily Wellness Reminder",content:"You are doing your best, and that is enough.",type:"affirmation",timestamp:new Date}}}async processVoiceSearch(e,t){try{let e=t;e||(e=await Cl.startListening());const a='The user is searching for resources using voice: "'.concat(e,'"\n\nFind 3-5 relevant wellness resources that match this search. Format as JSON:\n{\n  "resources": [\n    {\n      "title": "Resource title",\n      "description": "Brief description",\n      "type": "guide|audio|tool|education",\n      "category": "mindfulness|breathing|crisis|tools",\n      "relevance": 0.9\n    }\n  ]\n}'),r=await bl.vertexAIService.generateResponse([{role:"user",parts:[{text:a}]}]);let s;try{const e=r.match(/\{[\s\S]*\}/);if(!e)throw new Error("No JSON found");s=JSON.parse(e[0])}catch(n){s={resources:[]}}return{transcript:e,results:s.resources}}catch(a){return console.error("Error processing voice search:",a),{transcript:t||"",results:[]}}}async generateLearningPath(e,t){try{const n=[{id:"1",title:"Introduction to Mindfulness",unlocked:!0,completed:!0},{id:"2",title:"Breathing Techniques",unlocked:!0,completed:t>=2},{id:"3",title:"Emotion Regulation",unlocked:t>=3,completed:!1},{id:"4",title:"Stress Management",unlocked:t>=5,completed:!1},{id:"5",title:"Building Resilience",unlocked:t>=7,completed:!1}],a=n.filter(e=>e.completed).length/n.length*100;return{id:"path-".concat(e),title:"Mindfulness Mastery Path",description:"A progressive learning journey through wellness techniques",topics:n,progress:a}}catch(n){return console.error("Error generating learning path:",n),{id:"path-".concat(e),title:"Wellness Journey",description:"Your personalized learning path",topics:[],progress:0}}}async summarizeResource(e){try{const t='Summarize this wellness resource content into key points as flashcards (3-5 cards):\n\n"'.concat(e,'"\n\nFormat as JSON:\n{\n  "cards": [\n    {\n      "front": "Question or topic",\n      "back": "Answer or explanation"\n    }\n  ]\n}');return await bl.vertexAIService.generateResponse([{role:"user",parts:[{text:t}]}])}catch(t){return console.error("Error summarizing resource:",t),e.substring(0,200)}}},_d=[{id:"1",title:"5-Minute Breathing Exercise",description:"A quick guided breathing exercise to help you feel calm and centered.",type:"audio",duration:5,category:"breathing",icon:"\ud83e\udec1",color:"from-blue-500 to-indigo-500",isBookmarked:!1,isPlaying:!1},{id:"2",title:"How to Challenge Anxious Thoughts",description:"Learn CBT techniques to reframe negative thinking patterns.",type:"guide",duration:3,category:"mindfulness",icon:"\ud83e\udde0",color:"from-purple-500 to-pink-500",isBookmarked:!0,isPlaying:!1},{id:"3",title:"Crisis Support Hotline",description:"24/7 crisis support and suicide prevention hotline.",type:"emergency",category:"crisis",icon:"\ud83c\udd98",color:"from-red-500 to-pink-500",isBookmarked:!1,isPlaying:!1},{id:"4",title:"Mood Tracker Tool",description:"Interactive tool to track your daily mood and identify patterns.",type:"tool",category:"tools",icon:"\ud83d\udcca",color:"from-green-500 to-teal-500",isBookmarked:!0,isPlaying:!1},{id:"5",title:"Grounding Techniques",description:"Simple techniques to help you stay present during overwhelming moments.",type:"guide",duration:2,category:"mindfulness",icon:"\ud83c\udf31",color:"from-yellow-500 to-orange-500",isBookmarked:!1,isPlaying:!1},{id:"6",title:"Sleep Meditation",description:"Guided meditation to help you fall asleep peacefully.",type:"audio",duration:15,category:"mindfulness",icon:"\ud83c\udf19",color:"from-indigo-500 to-purple-500",isBookmarked:!1,isPlaying:!1},{id:"7",title:"Why Breathing Works",description:"Science-backed explanation of how breathing affects your nervous system.",type:"education",duration:2,category:"education",icon:"\ud83d\udd2c",color:"from-cyan-500 to-blue-500",isBookmarked:!1,isPlaying:!1},{id:"8",title:"Gratitude Journal Prompts",description:"Daily prompts to help you practice gratitude and positive thinking.",type:"tool",category:"tools",icon:"\ud83d\udcdd",color:"from-pink-500 to-rose-500",isBookmarked:!0,isPlaying:!1}],Od=[{id:"all",label:"All Resources",icon:"\ud83d\udcda",color:"from-gray-500 to-gray-600"},{id:"mindfulness",label:"Mindfulness",icon:"\ud83e\udde0",color:"from-purple-500 to-pink-500"},{id:"breathing",label:"Breathing",icon:"\ud83e\udec1",color:"from-blue-500 to-indigo-500"},{id:"crisis",label:"Crisis Support",icon:"\ud83c\udd98",color:"from-red-500 to-pink-500"},{id:"education",label:"Education",icon:"\ud83d\udd2c",color:"from-cyan-500 to-blue-500"},{id:"tools",label:"Tools",icon:"\ud83d\udee0\ufe0f",color:"from-green-500 to-teal-500"}],Fd=[{name:"National Suicide Prevention Lifeline",number:"988",available:"24/7"},{name:"Crisis Text Line",number:"Text HOME to 741741",available:"24/7"},{name:"National Alliance on Mental Illness",number:"1-800-950-NAMI",available:"Mon-Fri 10am-6pm"},{name:"SAMHSA National Helpline",number:"1-800-662-4357",available:"24/7"}];function zd(e){let{user:t,onBack:n}=e;const{setUser:a}=Xo(),[s,i]=(0,r.useState)(_d),[o,l]=(0,r.useState)("all"),[c,d]=(0,r.useState)(""),[u,m]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1),[f,g]=(0,r.useState)([]),[x,y]=(0,r.useState)(null),[v,b]=(0,r.useState)(null),[w,j]=(0,r.useState)(!1),[N,k]=(0,r.useState)([]),[S,C]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&(E(),P(),A())},[t]);const E=async()=>{if(t)try{const e=await Id.getRecommendations(t.id);g(e)}catch(e){console.error("Error loading AI recommendations:",e)}},P=async()=>{if(t)try{const e=await Id.generateDailyDose(t.id);y(e)}catch(e){console.error("Error loading daily dose:",e)}},A=async()=>{if(t)try{const e=await Id.generateLearningPath(t.id,t.avatarLevel||1);b(e)}catch(e){console.error("Error loading learning path:",e)}},T=s.filter(e=>{const t="all"===o||e.category===o,n=e.title.toLowerCase().includes(c.toLowerCase())||e.description.toLowerCase().includes(c.toLowerCase());return t&&n}),M=([...s,...f,...N].filter((e,t,n)=>t===n.findIndex(t=>t.id===e.id)),e=>{window.open("tel:".concat(e),"_self")}),L=e=>{switch(e){case"audio":return(0,$o.jsx)(Pc,{className:"w-4 h-4"});case"guide":default:return(0,$o.jsx)(tc,{className:"w-4 h-4"});case"tool":return(0,$o.jsx)(ql,{className:"w-4 h-4"});case"emergency":return(0,$o.jsx)(Ul,{className:"w-4 h-4"});case"education":return(0,$o.jsx)(Ld,{className:"w-4 h-4"})}},R=e=>{const t=Od.find(t=>t.id===e);return(null===t||void 0===t?void 0:t.icon)||"\ud83d\udcda"};return(0,$o.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:[(0,$o.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200 p-4",children:(0,$o.jsxs)("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,$o.jsx)("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:"\u2190"}),(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("h1",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[(0,$o.jsx)(tc,{className:"w-6 h-6 mr-2 text-blue-500"}),"The Wisdom Library"]}),(0,$o.jsx)("p",{className:"text-gray-600",children:"Tools and resources for your wellness journey"})]})]}),(0,$o.jsxs)("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors flex items-center space-x-2",children:[(0,$o.jsx)(Ul,{className:"w-4 h-4"}),(0,$o.jsx)("span",{children:"Emergency"})]})]})}),(0,$o.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[x&&(0,$o.jsxs)(Mo.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-2xl shadow-lg p-6 border-2 border-yellow-200",children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,$o.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[(0,$o.jsx)(Xc,{className:"w-6 h-6 mr-2 text-yellow-500"}),"Daily Bloom Dose",(0,$o.jsx)("span",{className:"ml-2 text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded-full",children:"AI Generated"})]}),(0,$o.jsx)("button",{onClick:P,className:"text-xs text-gray-600 hover:text-gray-800",children:"Refresh"})]}),(0,$o.jsx)("div",{className:"bg-white rounded-xl p-4",children:(0,$o.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,$o.jsx)("span",{className:"text-2xl",children:"affirmation"===x.type?"\ud83d\udc9d":"tip"===x.type?"\ud83d\udca1":"quote"===x.type?"\ud83d\udcad":"\ud83c\udfaf"}),(0,$o.jsxs)("div",{className:"flex-1",children:[(0,$o.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:x.title}),(0,$o.jsx)("p",{className:"text-sm text-gray-700",children:x.content})]})]})})]}),f.length>0&&(0,$o.jsxs)(Mo.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8 bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl shadow-lg p-6 border-2 border-purple-200",children:[(0,$o.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center",children:[(0,$o.jsx)(cl,{className:"w-6 h-6 mr-2 text-purple-500"}),"AI-Curated Recommendations",(0,$o.jsx)(pl,{className:"w-5 h-5 ml-2 text-purple-500"})]}),(0,$o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.map((e,t)=>(0,$o.jsx)(Mo.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1*t},className:"bg-white rounded-xl p-4 shadow-md hover:shadow-lg transition-shadow",children:(0,$o.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,$o.jsx)("span",{className:"text-2xl",children:e.icon||"\ud83d\udcda"}),(0,$o.jsxs)("div",{className:"flex-1",children:[(0,$o.jsx)("h3",{className:"font-semibold text-gray-800 mb-1",children:e.title}),(0,$o.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,$o.jsx)("div",{className:"flex items-center space-x-2",children:(0,$o.jsxs)("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:[Math.round(100*e.relevance),"% Match"]})})]})]})},e.id))})]}),v&&(0,$o.jsxs)(Mo.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8 bg-white rounded-2xl shadow-lg p-6",children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,$o.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[(0,$o.jsx)(nc,{className:"w-6 h-6 mr-2 text-blue-500"}),"Learning Path"]}),(0,$o.jsxs)("span",{className:"text-sm font-medium text-gray-600",children:[Math.round(v.progress),"% Complete"]})]}),(0,$o.jsx)("div",{className:"space-y-3",children:v.topics.map((e,t)=>(0,$o.jsxs)(Mo.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-center space-x-3 p-3 rounded-lg ".concat(e.unlocked?e.completed?"bg-green-50 border-2 border-green-200":"bg-blue-50 border-2 border-blue-200":"bg-gray-50 border-2 border-gray-200 opacity-60"),children:[e.completed?(0,$o.jsx)(vc,{className:"w-5 h-5 text-green-500 flex-shrink-0"}):e.unlocked?(0,$o.jsx)("div",{className:"w-5 h-5 border-2 border-blue-500 rounded-full flex-shrink-0"}):(0,$o.jsx)(Rd,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),(0,$o.jsx)("div",{className:"flex-1",children:(0,$o.jsx)("h3",{className:"font-medium text-gray-800",children:e.title})}),e.unlocked&&!e.completed&&(0,$o.jsx)("button",{className:"text-xs text-blue-600 hover:text-blue-800 font-medium",children:"Start"})]},e.id))})]}),(0,$o.jsx)("div",{className:"mb-6",children:(0,$o.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,$o.jsxs)("div",{className:"flex-1 relative",children:[(0,$o.jsx)("input",{type:"text",placeholder:"Search resources...",value:c,onChange:e=>d(e.target.value),className:"w-full px-4 py-2 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,$o.jsx)("button",{onClick:()=>C(!0),className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 text-gray-500 hover:text-blue-600 transition-colors",title:"Voice Search",children:w?(0,$o.jsx)(Mo.div,{animate:{scale:[1,1.2,1]},transition:{duration:.5,repeat:1/0},children:(0,$o.jsx)(xl,{className:"w-4 h-4 text-red-500"})}):(0,$o.jsx)(yl,{className:"w-4 h-4"})})]}),(0,$o.jsx)("div",{className:"flex space-x-2",children:(0,$o.jsx)("button",{onClick:()=>p(!h),className:"p-2 rounded-lg transition-colors ".concat(h?"bg-red-100 text-red-600":"bg-gray-100 text-gray-600"),title:h?"Unmute":"Mute",children:h?(0,$o.jsx)(ul,{className:"w-4 h-4"}):(0,$o.jsx)(ml,{className:"w-4 h-4"})})})]})}),(0,$o.jsx)("div",{className:"mb-6",children:(0,$o.jsx)("div",{className:"flex flex-wrap gap-2",children:Od.map(e=>(0,$o.jsxs)("button",{onClick:()=>l(e.id),className:"px-4 py-2 rounded-lg font-medium transition-all duration-300 ".concat(o===e.id?"bg-gradient-to-r ".concat(e.color," text-white shadow-lg"):"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"),children:[(0,$o.jsx)("span",{className:"mr-2",children:e.icon}),e.label]},e.id))})}),(0,$o.jsxs)("div",{className:"mb-8",children:[(0,$o.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center",children:[(0,$o.jsx)(Ol,{className:"w-5 h-5 mr-2 text-red-500"}),"Quick Help"]}),(0,$o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Fd.slice(0,2).map((e,t)=>(0,$o.jsxs)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-white rounded-xl shadow-lg p-4 hover:shadow-xl transition-shadow duration-300",children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h3",{className:"font-semibold text-gray-800",children:e.name}),(0,$o.jsx)("p",{className:"text-sm text-gray-600",children:e.available})]}),(0,$o.jsxs)("button",{onClick:()=>M(e.number),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors flex items-center space-x-2",children:[(0,$o.jsx)(Ul,{className:"w-4 h-4"}),(0,$o.jsx)("span",{children:"Call"})]})]}),(0,$o.jsx)("div",{className:"mt-2 text-lg font-mono text-gray-800",children:e.number})]},t))})]}),(0,$o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:T.map((e,t)=>(0,$o.jsxs)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition-all duration-300",children:[(0,$o.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r ".concat(e.color," rounded-full flex items-center justify-center text-white text-xl"),children:e.icon}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h3",{className:"font-semibold text-gray-800",children:e.title}),(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[L(e.type),(0,$o.jsx)("span",{className:"text-sm text-gray-500 capitalize",children:e.type}),e.duration&&(0,$o.jsxs)($o.Fragment,{children:[(0,$o.jsx)(Xl,{className:"w-3 h-3 text-gray-400"}),(0,$o.jsxs)("span",{className:"text-sm text-gray-500",children:[e.duration," min"]})]})]})]})]}),(0,$o.jsx)("button",{onClick:()=>{return t=e.id,void i(e=>e.map(e=>e.id===t?(0,Ie.A)((0,Ie.A)({},e),{},{isBookmarked:!e.isBookmarked}):e));var t},className:"p-2 rounded-lg transition-colors ".concat(e.isBookmarked?"bg-yellow-100 text-yellow-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"),title:e.isBookmarked?"Remove bookmark":"Bookmark",children:(0,$o.jsx)($l,{className:"w-4 h-4 ".concat(e.isBookmarked?"fill-current":"")})})]}),(0,$o.jsx)("p",{className:"text-gray-600 mb-4 text-sm",children:e.description}),(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)("span",{className:"text-xs text-gray-500",children:R(e.category)}),(0,$o.jsx)("span",{className:"text-xs text-gray-500 capitalize",children:e.category})]}),(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:["audio"===e.type&&(0,$o.jsx)("button",{onClick:()=>{return t=e.id,void i(e=>e.map(e=>e.id===t?(0,Ie.A)((0,Ie.A)({},e),{},{isPlaying:!e.isPlaying}):e));var t},className:"p-2 rounded-lg transition-colors ".concat(e.isPlaying?"bg-green-100 text-green-600":"bg-blue-100 text-blue-600"),children:e.isPlaying?(0,$o.jsx)(pd,{className:"w-4 h-4"}):(0,$o.jsx)(Pc,{className:"w-4 h-4"})}),(0,$o.jsx)("button",{className:"p-2 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition-colors",children:(0,$o.jsx)(Kl,{className:"w-4 h-4"})}),(0,$o.jsx)("button",{className:"p-2 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition-colors",children:(0,$o.jsx)(Dd,{className:"w-4 h-4"})})]})]})]},e.id))}),(0,$o.jsxs)("div",{className:"mt-8",children:[(0,$o.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center",children:[(0,$o.jsx)(cl,{className:"w-5 h-5 mr-2 text-purple-500"}),"Did You Know?"]}),(0,$o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,$o.jsx)(Mo.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"bg-white rounded-xl shadow-lg p-4",children:(0,$o.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,$o.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:(0,$o.jsx)(cl,{className:"w-4 h-4 text-blue-600"})}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h3",{className:"font-medium text-gray-800",children:"Breathing & Stress"}),(0,$o.jsx)("p",{className:"text-sm text-gray-600",children:"Deep breathing can reduce cortisol levels by up to 50% within just 60 seconds of practice."})]})]})}),(0,$o.jsx)(Mo.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white rounded-xl shadow-lg p-4",children:(0,$o.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,$o.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:(0,$o.jsx)(Ol,{className:"w-4 h-4 text-green-600"})}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h3",{className:"font-medium text-gray-800",children:"Gratitude Practice"}),(0,$o.jsx)("p",{className:"text-sm text-gray-600",children:"Writing down 3 things you're grateful for each day can increase happiness by 25% over 6 months."})]})]})})]})]})]}),(0,$o.jsx)(De,{children:u&&(0,$o.jsx)(Mo.div,{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,$o.jsxs)(Mo.div,{className:"bg-white rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[(0,$o.jsxs)("h3",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center",children:[(0,$o.jsx)(Ol,{className:"w-5 h-5 mr-2 text-red-500"}),"Crisis Support Resources"]}),(0,$o.jsx)("div",{className:"space-y-4",children:Fd.map((e,t)=>(0,$o.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h4",{className:"font-medium text-gray-800",children:e.name}),(0,$o.jsx)("p",{className:"text-sm text-gray-600",children:e.available}),(0,$o.jsx)("p",{className:"text-lg font-mono text-gray-800 mt-1",children:e.number})]}),(0,$o.jsxs)("button",{onClick:()=>M(e.number),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors flex items-center space-x-2",children:[(0,$o.jsx)(Ul,{className:"w-4 h-4"}),(0,$o.jsx)("span",{children:"Call"})]})]})},t))}),(0,$o.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[(0,$o.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"Remember:"}),(0,$o.jsx)("p",{className:"text-sm text-blue-700",children:"You are not alone. These resources are available 24/7 and are completely confidential. Reaching out for help is a sign of strength, not weakness."})]}),(0,$o.jsx)("div",{className:"flex justify-end mt-6",children:(0,$o.jsx)("button",{onClick:()=>m(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:"Close"})})]})})}),(0,$o.jsx)(De,{children:S&&(0,$o.jsx)(Mo.div,{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,$o.jsxs)(Mo.div,{className:"bg-white rounded-2xl p-6 max-w-md w-full",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[(0,$o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,$o.jsxs)("h3",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[(0,$o.jsx)(yl,{className:"w-5 h-5 mr-2 text-blue-500"}),"Voice Search"]}),(0,$o.jsx)("button",{onClick:()=>C(!1),className:"text-gray-500 hover:text-gray-700",children:"\u2715"})]}),(0,$o.jsx)("div",{className:"text-center mb-6",children:w?(0,$o.jsxs)("div",{className:"space-y-3",children:[(0,$o.jsx)(Mo.div,{animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0},className:"w-16 h-16 bg-red-500 rounded-full mx-auto flex items-center justify-center",children:(0,$o.jsx)(xl,{className:"w-8 h-8 text-white"})}),(0,$o.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Listening..."})]}):(0,$o.jsxs)("div",{className:"space-y-3",children:[(0,$o.jsx)(yl,{className:"w-12 h-12 text-blue-500 mx-auto"}),(0,$o.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Say what you're looking for"})]})}),(0,$o.jsx)("button",{onClick:async()=>{j(!0);try{const e=await Id.processVoiceSearch((null===t||void 0===t?void 0:t.id)||"");k(e.results),d(e.transcript),C(!1)}catch(e){console.error("Error with voice search:",e)}finally{j(!1)}},disabled:w,className:"w-full py-3 rounded-lg font-medium transition-colors ".concat(w?"bg-red-500 text-white hover:bg-red-600":"bg-gradient-to-r from-blue-500 to-purple-500 text-white hover:from-blue-600 hover:to-purple-600"),children:w?"Stop Recording":"Start Voice Search"})]})})})]})}const Vd=ll("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),Bd=ll("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Ud=ll("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Hd=ll("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Wd=ll("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Gd=ll("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),qd=ll("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),Yd=[{id:"pixel",name:"Pixel Art",icon:"\ud83c\udfae",description:"Retro gaming style"},{id:"minimal",name:"Minimal",icon:"\u26aa",description:"Clean and simple"},{id:"detailed",name:"Detailed",icon:"\ud83d\udc64",description:"More realistic"}],Xd=[{id:"warm",name:"Warm",colors:["#FF6B6B","#FFE66D","#FF8E53"],description:"Cozy and comforting"},{id:"cool",name:"Cool",colors:["#4ECDC4","#45B7D1","#96CEB4"],description:"Calm and peaceful"},{id:"neutral",name:"Neutral",colors:["#A8A8A8","#D3D3D3","#F5F5F5"],description:"Balanced and serene"},{id:"vibrant",name:"Vibrant",colors:["#FF9FF3","#54A0FF","#5F27CD"],description:"Energetic and uplifting"}],$d=[{id:"gratitude",name:"Gratitude",icon:"\ud83d\ude4f",description:"Focus on appreciation and thankfulness"},{id:"resilience",name:"Resilience",icon:"\ud83d\udcaa",description:"Build strength and bounce back"},{id:"calm",name:"Calm",icon:"\ud83e\uddd8",description:"Find peace and mindfulness"},{id:"connection",name:"Connection",icon:"\ud83e\udd1d",description:"Build relationships and community"},{id:"creativity",name:"Creativity",icon:"\ud83c\udfa8",description:"Express yourself through art and ideas"},{id:"growth",name:"Growth",icon:"\ud83c\udf31",description:"Learn and develop new skills"}],Kd=[{name:"National Suicide Prevention Lifeline",number:"988",available:"24/7"},{name:"Crisis Text Line",number:"Text HOME to 741741",available:"24/7"},{name:"SAMHSA National Helpline",number:"1-800-662-4357",available:"24/7"}];function Jd(e){let{user:t,onBack:n}=e;const[a,s]=(0,r.useState)({displayName:"anonymous",showAvatar:!0,showActivity:!1,avatarStyle:"pixel",theme:"auto",colorPalette:"warm",backgroundStyle:"gradient",challengeReminders:!0,storyNudges:!0,wellnessCheckIns:!0,communityUpdates:!1,notificationFrequency:"gentle",wellnessFocus:["gratitude","calm"],preferredChallenges:["mindfulness","breathing"],moodTracking:!0,goalSetting:!0,emergencyContacts:[],crisisMode:!1}),[i,o]=(0,r.useState)("privacy"),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1),m=(e,t)=>{s(n=>(0,Ie.A)((0,Ie.A)({},n),{},{[e]:t})),u(!0)},h=[{id:"privacy",name:"Privacy & Safety",icon:Fl,color:"from-red-500 to-pink-500"},{id:"appearance",name:"Appearance",icon:Vd,color:"from-purple-500 to-indigo-500"},{id:"notifications",name:"Notifications",icon:Bd,color:"from-blue-500 to-cyan-500"},{id:"wellness",name:"Wellness Focus",icon:Ol,color:"from-green-500 to-teal-500"},{id:"emergency",name:"Emergency",icon:Ul,color:"from-orange-500 to-red-500"}];return(0,$o.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:[(0,$o.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200 p-4",children:(0,$o.jsxs)("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,$o.jsx)("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:"\u2190"}),(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("h1",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[(0,$o.jsx)(Ud,{className:"w-6 h-6 mr-2 text-blue-500"}),"Your Safe Space"]}),(0,$o.jsx)("p",{className:"text-gray-600",children:"Customize your wellness journey with complete privacy"})]})]}),d&&(0,$o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,$o.jsx)("button",{onClick:()=>{s({displayName:"anonymous",showAvatar:!0,showActivity:!1,avatarStyle:"pixel",theme:"auto",colorPalette:"warm",backgroundStyle:"gradient",challengeReminders:!0,storyNudges:!0,wellnessCheckIns:!0,communityUpdates:!1,notificationFrequency:"gentle",wellnessFocus:["gratitude","calm"],preferredChallenges:["mindfulness","breathing"],moodTracking:!0,goalSetting:!0,emergencyContacts:[],crisisMode:!1}),u(!0)},className:"px-3 py-1 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors text-sm",children:"Reset"}),(0,$o.jsxs)("button",{onClick:()=>{localStorage.setItem("mindbloom-settings",JSON.stringify(a)),u(!1)},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center space-x-2",children:[(0,$o.jsx)(dl,{className:"w-4 h-4"}),(0,$o.jsx)("span",{children:"Save Changes"})]})]})]})}),(0,$o.jsx)("div",{className:"max-w-6xl mx-auto p-6",children:(0,$o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,$o.jsx)("div",{className:"lg:col-span-1",children:(0,$o.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-4 sticky top-6",children:[(0,$o.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Settings"}),(0,$o.jsx)("nav",{className:"space-y-2",children:h.map(e=>(0,$o.jsxs)("button",{onClick:()=>o(e.id),className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg transition-all duration-200 ".concat(i===e.id?"bg-gradient-to-r ".concat(e.color," text-white shadow-lg"):"text-gray-600 hover:bg-gray-100"),children:[(0,$o.jsx)(e.icon,{className:"w-4 h-4"}),(0,$o.jsx)("span",{className:"text-sm font-medium",children:e.name})]},e.id))})]})}),(0,$o.jsx)("div",{className:"lg:col-span-3",children:(0,$o.jsxs)(De,{mode:"wait",children:["privacy"===i&&(0,$o.jsx)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:(0,$o.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,$o.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-red-500 to-pink-500 rounded-full flex items-center justify-center",children:(0,$o.jsx)(Fl,{className:"w-5 h-5 text-white"})}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Privacy & Safety"}),(0,$o.jsx)("p",{className:"text-gray-600",children:"Your data is yours \u2014 we protect it"})]})]}),(0,$o.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:(0,$o.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,$o.jsx)(zc,{className:"w-5 h-5 text-green-600 mt-0.5"}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h3",{className:"font-medium text-green-800 mb-2",children:"Your Safe Space"}),(0,$o.jsx)("p",{className:"text-sm text-green-700",children:"Everything you share here stays private. We never share your personal information, and all your conversations are confidential. This is your safe space to grow and heal."})]})]})}),(0,$o.jsxs)("div",{className:"space-y-4",children:[(0,$o.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:"How Others See You"}),(0,$o.jsxs)("div",{className:"space-y-3",children:[(0,$o.jsxs)("label",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,$o.jsx)("input",{type:"radio",name:"displayName",value:"anonymous",checked:"anonymous"===a.displayName,onChange:e=>m("displayName",e.target.value),className:"w-4 h-4 text-blue-600"}),(0,$o.jsxs)("div",{className:"flex-1",children:[(0,$o.jsx)("div",{className:"font-medium text-gray-800",children:"Fully Anonymous"}),(0,$o.jsx)("div",{className:"text-sm text-gray-600",children:"Others only see your avatar and level"})]}),(0,$o.jsx)(Hd,{className:"w-5 h-5 text-gray-400"})]}),(0,$o.jsxs)("label",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,$o.jsx)("input",{type:"radio",name:"displayName",value:"nickname",checked:"nickname"===a.displayName,onChange:e=>m("displayName",e.target.value),className:"w-4 h-4 text-blue-600"}),(0,$o.jsxs)("div",{className:"flex-1",children:[(0,$o.jsx)("div",{className:"font-medium text-gray-800",children:"Nickname Only"}),(0,$o.jsx)("div",{className:"text-sm text-gray-600",children:"Show a friendly nickname you choose"})]}),(0,$o.jsx)(fl,{className:"w-5 h-5 text-gray-400"})]}),(0,$o.jsxs)("label",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,$o.jsx)("input",{type:"radio",name:"displayName",value:"full",checked:"full"===a.displayName,onChange:e=>m("displayName",e.target.value),className:"w-4 h-4 text-blue-600"}),(0,$o.jsxs)("div",{className:"flex-1",children:[(0,$o.jsx)("div",{className:"font-medium text-gray-800",children:"Full Name"}),(0,$o.jsx)("div",{className:"text-sm text-gray-600",children:"Show your complete name (less private)"})]}),(0,$o.jsx)(Wd,{className:"w-5 h-5 text-gray-400"})]})]})]}),(0,$o.jsxs)("div",{className:"space-y-4 mt-6",children:[(0,$o.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:"Activity Visibility"}),(0,$o.jsxs)("div",{className:"space-y-3",children:[(0,$o.jsxs)("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,$o.jsx)(Yl,{className:"w-4 h-4 text-blue-600"})}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("div",{className:"font-medium text-gray-800",children:"Show Avatar"}),(0,$o.jsx)("div",{className:"text-sm text-gray-600",children:"Let others see your avatar in community spaces"})]})]}),(0,$o.jsx)("input",{type:"checkbox",checked:a.showAvatar,onChange:e=>m("showAvatar",e.target.checked),className:"w-4 h-4 text-blue-600 rounded"})]}),(0,$o.jsxs)("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,$o.jsx)(Hl,{className:"w-4 h-4 text-green-600"})}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("div",{className:"font-medium text-gray-800",children:"Show Activity"}),(0,$o.jsx)("div",{className:"text-sm text-gray-600",children:"Share your wellness progress with the community"})]})]}),(0,$o.jsx)("input",{type:"checkbox",checked:a.showActivity,onChange:e=>m("showActivity",e.target.checked),className:"w-4 h-4 text-blue-600 rounded"})]})]})]}),(0,$o.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-6",children:(0,$o.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,$o.jsx)(Ld,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h3",{className:"font-medium text-blue-800 mb-2",children:"How We Protect Your Data"}),(0,$o.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[(0,$o.jsx)("li",{children:"\u2022 All conversations are encrypted and never shared"}),(0,$o.jsx)("li",{children:"\u2022 Your personal information stays on your device"}),(0,$o.jsx)("li",{children:"\u2022 We never sell or share your data with third parties"}),(0,$o.jsx)("li",{children:"\u2022 You can delete your data anytime"})]})]})]})})]})},"privacy"),"appearance"===i&&(0,$o.jsx)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:(0,$o.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,$o.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-500 to-indigo-500 rounded-full flex items-center justify-center",children:(0,$o.jsx)(Vd,{className:"w-5 h-5 text-white"})}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Appearance"}),(0,$o.jsx)("p",{className:"text-gray-600",children:"Make the app feel like home"})]})]}),(0,$o.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,$o.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:"Avatar Style"}),(0,$o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Yd.map(e=>(0,$o.jsxs)("label",{className:"p-4 border-2 rounded-lg cursor-pointer transition-all duration-200 ".concat(a.avatarStyle===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[(0,$o.jsx)("input",{type:"radio",name:"avatarStyle",value:e.id,checked:a.avatarStyle===e.id,onChange:e=>m("avatarStyle",e.target.value),className:"sr-only"}),(0,$o.jsxs)("div",{className:"text-center",children:[(0,$o.jsx)("div",{className:"text-3xl mb-2",children:e.icon}),(0,$o.jsx)("div",{className:"font-medium text-gray-800",children:e.name}),(0,$o.jsx)("div",{className:"text-sm text-gray-600",children:e.description})]})]},e.id))})]}),(0,$o.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,$o.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:"Color Palette"}),(0,$o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Xd.map(e=>(0,$o.jsxs)("label",{className:"p-4 border-2 rounded-lg cursor-pointer transition-all duration-200 ".concat(a.colorPalette===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[(0,$o.jsx)("input",{type:"radio",name:"colorPalette",value:e.id,checked:a.colorPalette===e.id,onChange:e=>m("colorPalette",e.target.value),className:"sr-only"}),(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)("div",{className:"flex space-x-1",children:e.colors.map((e,t)=>(0,$o.jsx)("div",{className:"w-6 h-6 rounded-full",style:{backgroundColor:e}},t))}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("div",{className:"font-medium text-gray-800",children:e.name}),(0,$o.jsx)("div",{className:"text-sm text-gray-600",children:e.description})]})]})]},e.id))})]}),(0,$o.jsxs)("div",{className:"space-y-4",children:[(0,$o.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:"Theme"}),(0,$o.jsx)("div",{className:"grid grid-cols-3 gap-4",children:[{id:"light",name:"Light",icon:Gd,description:"Bright and cheerful"},{id:"dark",name:"Dark",icon:qd,description:"Easy on the eyes"},{id:"auto",name:"Auto",icon:Ud,description:"Follows system"}].map(e=>(0,$o.jsxs)("label",{className:"p-4 border-2 rounded-lg cursor-pointer transition-all duration-200 ".concat(a.theme===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[(0,$o.jsx)("input",{type:"radio",name:"theme",value:e.id,checked:a.theme===e.id,onChange:e=>m("theme",e.target.value),className:"sr-only"}),(0,$o.jsxs)("div",{className:"text-center",children:[(0,$o.jsx)(e.icon,{className:"w-6 h-6 mx-auto mb-2 text-gray-600"}),(0,$o.jsx)("div",{className:"font-medium text-gray-800",children:e.name}),(0,$o.jsx)("div",{className:"text-sm text-gray-600",children:e.description})]})]},e.id))})]})]})},"appearance"),"notifications"===i&&(0,$o.jsx)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:(0,$o.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,$o.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-full flex items-center justify-center",children:(0,$o.jsx)(Bd,{className:"w-5 h-5 text-white"})}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Gentle Nudges"}),(0,$o.jsx)("p",{className:"text-gray-600",children:"Stay connected with supportive reminders"})]})]}),(0,$o.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,$o.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:"How Often?"}),(0,$o.jsx)("div",{className:"space-y-3",children:[{id:"minimal",name:"Minimal",description:"Only important updates"},{id:"gentle",name:"Gentle",description:"A few helpful nudges per day"},{id:"moderate",name:"Moderate",description:"Regular wellness check-ins"}].map(e=>(0,$o.jsxs)("label",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg cursor-pointer transition-all duration-200 ".concat(a.notificationFrequency===e.id?"border-blue-500 bg-blue-50":"hover:bg-gray-50"),children:[(0,$o.jsx)("input",{type:"radio",name:"notificationFrequency",value:e.id,checked:a.notificationFrequency===e.id,onChange:e=>m("notificationFrequency",e.target.value),className:"w-4 h-4 text-blue-600"}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("div",{className:"font-medium text-gray-800",children:e.name}),(0,$o.jsx)("div",{className:"text-sm text-gray-600",children:e.description})]})]},e.id))})]}),(0,$o.jsxs)("div",{className:"space-y-4",children:[(0,$o.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:"What Would You Like?"}),(0,$o.jsx)("div",{className:"space-y-3",children:[{key:"challengeReminders",name:"Challenge Reminders",description:"Gentle nudges for daily wellness challenges"},{key:"storyNudges",name:"Story Sharing",description:"Encouragement to share your journey"},{key:"wellnessCheckIns",name:"Wellness Check-ins",description:"How are you feeling today?"},{key:"communityUpdates",name:"Community Updates",description:"New stories and community activity"}].map(e=>(0,$o.jsxs)("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("div",{className:"font-medium text-gray-800",children:e.name}),(0,$o.jsx)("div",{className:"text-sm text-gray-600",children:e.description})]}),(0,$o.jsx)("input",{type:"checkbox",checked:a[e.key],onChange:t=>m(e.key,t.target.checked),className:"w-4 h-4 text-blue-600 rounded"})]},e.key))})]})]})},"notifications"),"wellness"===i&&(0,$o.jsx)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:(0,$o.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,$o.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-green-500 to-teal-500 rounded-full flex items-center justify-center",children:(0,$o.jsx)(Ol,{className:"w-5 h-5 text-white"})}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Wellness Focus"}),(0,$o.jsx)("p",{className:"text-gray-600",children:"Choose what matters most to you"})]})]}),(0,$o.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,$o.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:"What Would You Like to Focus On?"}),(0,$o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:$d.map(e=>(0,$o.jsxs)("label",{className:"p-4 border-2 rounded-lg cursor-pointer transition-all duration-200 ".concat(a.wellnessFocus.includes(e.id)?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"),children:[(0,$o.jsx)("input",{type:"checkbox",checked:a.wellnessFocus.includes(e.id),onChange:t=>{const n=t.target.checked?[...a.wellnessFocus,e.id]:a.wellnessFocus.filter(t=>t!==e.id);m("wellnessFocus",n)},className:"sr-only"}),(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)("div",{className:"text-2xl",children:e.icon}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("div",{className:"font-medium text-gray-800",children:e.name}),(0,$o.jsx)("div",{className:"text-sm text-gray-600",children:e.description})]})]})]},e.id))})]}),(0,$o.jsxs)("div",{className:"space-y-4",children:[(0,$o.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:"Additional Preferences"}),(0,$o.jsx)("div",{className:"space-y-3",children:[{key:"moodTracking",name:"Mood Tracking",description:"Track your daily mood and patterns"},{key:"goalSetting",name:"Goal Setting",description:"Set and track personal wellness goals"}].map(e=>(0,$o.jsxs)("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("div",{className:"font-medium text-gray-800",children:e.name}),(0,$o.jsx)("div",{className:"text-sm text-gray-600",children:e.description})]}),(0,$o.jsx)("input",{type:"checkbox",checked:a[e.key],onChange:t=>m(e.key,t.target.checked),className:"w-4 h-4 text-blue-600 rounded"})]},e.key))})]})]})},"wellness"),"emergency"===i&&(0,$o.jsx)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:(0,$o.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,$o.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center",children:(0,$o.jsx)(Ul,{className:"w-5 h-5 text-white"})}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Emergency Support"}),(0,$o.jsx)("p",{className:"text-gray-600",children:"Help is always available when you need it"})]})]}),(0,$o.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$o.jsx)(Vl,{className:"w-5 h-5 text-red-600"}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h3",{className:"font-medium text-red-800",children:"Crisis Mode"}),(0,$o.jsx)("p",{className:"text-sm text-red-700",children:"Enable for immediate access to crisis resources"})]})]}),(0,$o.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,$o.jsx)("input",{type:"checkbox",checked:a.crisisMode,onChange:e=>m("crisisMode",e.target.checked),className:"sr-only peer"}),(0,$o.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-red-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-500"})]})]})}),(0,$o.jsxs)("div",{className:"space-y-4",children:[(0,$o.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:"Crisis Support Resources"}),(0,$o.jsx)("div",{className:"space-y-3",children:Kd.map((e,t)=>(0,$o.jsx)("div",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h4",{className:"font-medium text-gray-800",children:e.name}),(0,$o.jsx)("p",{className:"text-sm text-gray-600",children:e.available}),(0,$o.jsx)("p",{className:"text-lg font-mono text-gray-800 mt-1",children:e.number})]}),(0,$o.jsxs)("button",{onClick:()=>(e=>{window.open("tel:".concat(e),"_self")})(e.number),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors flex items-center space-x-2",children:[(0,$o.jsx)(Ul,{className:"w-4 h-4"}),(0,$o.jsx)("span",{children:"Call"})]})]})},t))})]}),(0,$o.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-6",children:(0,$o.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,$o.jsx)(Ol,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,$o.jsxs)("div",{children:[(0,$o.jsx)("h3",{className:"font-medium text-blue-800 mb-2",children:"You Are Not Alone"}),(0,$o.jsx)("p",{className:"text-sm text-blue-700",children:"If you're having thoughts of self-harm, please reach out to these resources immediately. You matter, and there are people who want to help you through this."})]})]})})]})},"emergency")]})})]})})]})}const Qd=function(){const{user:e,isLoading:t,crisisDetected:n,initializeApp:a,initializeBotpress:s,showInitialGreeting:i,setUser:o}=Xo(),[l,c]=(0,r.useState)(!0),[d,u]=(0,r.useState)(!1),[m,h]=(0,r.useState)("dashboard"),[p,f]=(0,r.useState)(!1),[g,x]=(0,r.useState)("");return(0,r.useEffect)(()=>{(async()=>{await a(),await s()})()},[a,s]),(0,r.useEffect)(()=>{e&&(c(!1),u(!1),setTimeout(()=>{i()},1e3))},[e,i]),t?(0,$o.jsx)(Gl,{}):(0,$o.jsx)(Jo,{children:(0,$o.jsx)(tl,{children:(0,$o.jsx)(ue,{children:(0,$o.jsxs)("div",{className:"App min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:[(0,$o.jsx)(De,{children:l&&(0,$o.jsx)(zl,{onComplete:()=>{c(!1),u(!0)}})}),(0,$o.jsx)(De,{children:d&&(0,$o.jsx)(bc,{onComplete:e=>{const t={id:Date.now().toString(),nickname:e.nickname,age:e.ageBand,language:e.language,avatarLevel:1,xp:0,streak:0,createdAt:new Date};o(t),u(!1)}})}),n&&(0,$o.jsx)(Wl,{}),e&&(0,$o.jsxs)("main",{className:"relative min-h-screen",children:[(0,$o.jsx)(Mo.header,{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50",initial:{y:-100},animate:{y:0},transition:{duration:.5},children:(0,$o.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,$o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,$o.jsx)(Ml,{level:e.avatarLevel}),(0,$o.jsxs)("div",{children:[(0,$o.jsxs)("h1",{className:"text-xl font-semibold text-gray-800",children:["Welcome, ",e.nickname]}),(0,$o.jsxs)("p",{className:"text-sm text-gray-600",children:["Day ",e.streak," streak \u2022 ",e.xp," XP"]})]})]}),(0,$o.jsx)(_l,{currentXP:e.xp,level:e.avatarLevel})]})})}),(0,$o.jsx)("nav",{className:"bg-white border-b border-gray-200 sticky top-16 z-40",children:(0,$o.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,$o.jsx)("div",{className:"flex space-x-1 overflow-x-auto py-2",children:[{id:"dashboard",label:"\ud83c\udfe0 Dashboard",page:"dashboard"},{id:"chat",label:"\ud83d\udcac Chat with Mira",page:"chat"},{id:"circles",label:"\ud83d\udc65 Peer Circles",page:"circles"},{id:"community",label:"\ud83c\udf0d Community & Stories",page:"community"},{id:"challenges",label:"\ud83c\udfaf Challenges",page:"challenges"},{id:"progress",label:"\ud83d\udcca Progress",page:"progress"},{id:"resources",label:"\ud83d\udcda Resources",page:"resources"},{id:"settings",label:"\u2699\ufe0f Settings",page:"settings"}].map(e=>(0,$o.jsx)("button",{onClick:()=>h(e.page),className:"px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors ".concat(m===e.page?"bg-blue-500 text-white":"text-gray-600 hover:bg-gray-100"),children:e.label},e.id))})})}),(0,$o.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,$o.jsxs)(De,{mode:"wait",children:["dashboard"===m&&(0,$o.jsx)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(0,$o.jsx)(Oc,{user:e,onNavigate:e=>h(e)})},"dashboard"),"chat"===m&&(0,$o.jsxs)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"flex h-screen pt-16",children:[(0,$o.jsx)("div",{className:"flex-1 relative",children:(0,$o.jsx)(sl,{isSpeaking:p,currentMessage:g})}),(0,$o.jsx)("div",{className:"w-96 bg-white/80 backdrop-blur-sm border-l border-gray-200",children:(0,$o.jsx)(Tl,{onMessage:(e,t)=>{t||x(e)},onSpeaking:e=>{f(e)}})})]},"chat"),"circles"===m&&(0,$o.jsx)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(0,$o.jsx)(Yc,{user:e,onBack:()=>h("dashboard")})},"circles"),"community"===m&&(0,$o.jsx)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"h-full",children:(0,$o.jsx)(xc,{user:e})},"community"),"challenges"===m&&(0,$o.jsx)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(0,$o.jsx)(gd,{user:e,onBack:()=>h("dashboard")})},"challenges"),"progress"===m&&(0,$o.jsx)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(0,$o.jsx)(Md,{user:e,onBack:()=>h("dashboard")})},"progress"),"resources"===m&&(0,$o.jsx)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(0,$o.jsx)(zd,{user:e,onBack:()=>h("dashboard")})},"resources"),"settings"===m&&(0,$o.jsx)(Mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(0,$o.jsx)(Jd,{user:e,onBack:()=>h("dashboard")})},"settings")]})})]}),(0,$o.jsxs)(le,{children:[(0,$o.jsx)(ie,{path:"/breathing",element:(0,$o.jsx)("div",{children:"Breathing Exercise"})}),(0,$o.jsx)(ie,{path:"/journaling",element:(0,$o.jsx)("div",{children:"Journaling"})}),(0,$o.jsx)(ie,{path:"/exercises",element:(0,$o.jsx)("div",{children:"CBT Exercises"})})]})]})})})})};i.createRoot(document.getElementById("root")).render((0,$o.jsx)(r.StrictMode,{children:(0,$o.jsx)(Qd,{})}))})();
//# sourceMappingURL=main.52fe2897.js.map